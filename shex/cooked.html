<!DOCTYPE html> <html lang=en style><!--
 Page saved with SingleFile 
 url: file:///C:/src/shexSpec/spec/index.html 
 saved date: Sat Mar 08 2025 12:54:38 GMT+0100 (hora estándar de Europa central)
--><meta charset=utf-8><style>:root{--sf-img-0: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc0MDAnIGhlaWdodD0nNDAwJz4KIDxnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDIwMCAyMDApIHJvdGF0ZSgtNDUpIHRyYW5zbGF0ZSgtMjAwIC0yMDApJwogICAgc3R5bGU9J2ZvbnQ6IDc1MCA3MHB4IEFyaWFsLCBzYW5zLXNlcmlmOyBsZXR0ZXItc3BhY2luZzogM3B4JwogICAgZmlsbD0nI0ZERURFRCcgc3Ryb2tlPScjRkRFREVEJyBzdHJva2Utd2lkdGg9JzMnPgogIDx0ZXh0IHg9JzUzJScgeT0nMjIwJyBzdHlsZT0ndGV4dC1hbmNob3I6IG1pZGRsZSc+VU5PRkZJQ0lBTDwvdGV4dD4KICA8dGV4dCB4PSc1MyUnIHk9JzMwNScgc3R5bGU9J3RleHQtYW5jaG9yOiBtaWRkbGUnPkRSQUZUPC90ZXh0PgogPC9nPgo8L3N2Zz4K")}</style><style>span.example-title{text-transform:none}:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}:is(aside,div).example{border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}.example pre{background-color:rgba(0,0,0,.03)}</style><style>dfn{cursor:pointer}</style><style>:root{--text:black;--bg:white;--unofficial-watermark:var(--sf-img-0);--logo-bg:#1a5e9a;--logo-active-bg:#c00;--logo-text:white;--tocnav-normal-text:#707070;--tocnav-normal-bg:var(--bg);--tocnav-hover-text:var(--tocnav-normal-text);--tocnav-hover-bg:#f8f8f8;--tocnav-active-text:#c00;--tocnav-active-bg:var(--tocnav-normal-bg);--tocsidebar-text:var(--text);--tocsidebar-bg:#f7f8f9;--tocsidebar-shadow:rgba(0,0,0,.1);--tocsidebar-heading-text:hsla(203,20%,40%,.7);--toclink-text:var(--text);--toclink-underline:#3980b5;--toclink-visited-text:var(--toclink-text);--toclink-visited-underline:#054572;--heading-text:#005a9c;--hr-text:var(--text);--algo-border:#def;--del-text:#AA0000;--del-bg:transparent;--ins-text:#006100;--ins-bg:transparent;--a-normal-text:#034575;--a-normal-underline:#707070;--a-visited-text:var(--a-normal-text);--a-visited-underline:#bbb;--a-hover-bg:rgba(75%,75%,75%,.25);--a-active-text:#c00;--a-active-underline:#c00;--blockquote-border:silver;--blockquote-bg:transparent;--blockquote-text:var(--text);--issue-border:#e05252;--issue-bg:#fbe9e9;--issue-text:var(--text);--issueheading-text:#831616;--example-border:#e0cb52;--example-bg:#fcfaee;--example-text:var(--text);--exampleheading-text:#574b0f;--note-border:#52e052;--note-bg:#e9fbe9;--note-text:var(--text);--noteheading-text:hsl(120,70%,30%);--notesummary-underline:silver;--advisement-border:orange;--advisement-bg:#fec;--advisement-text:var(--text);--advisementheading-text:#b35f00;--amendment-border:#330099;--amendment-bg:#F5F0FF;--amendment-text:var(--text);--amendmentheading-text:#220066;--warning-border:red;--warning-bg:hsla(40,100%,50%,0.95);--warning-text:var(--text);--def-border:#8ccbf2;--def-bg:#def;--def-text:var(--text);--defrow-border:#bbd7e9;--datacell-border:silver;--indexinfo-text:#707070;--indextable-hover-text:black;--indextable-hover-bg:#f7f8f9;--outdatedspec-bg:rgba(0,0,0,.5);--outdatedspec-text:black;--outdated-bg:maroon;--outdated-text:white;--outdated-shadow:red;--editedrec-bg:darkorange}@media not print{}@media screen{}@media screen and (max-width:28em){}@media screen and (min-width:78em){body:not(.toc-inline){padding-left:29em}}@media screen and (min-width:90em){body:not(.toc-inline){margin:0 4em}}dd>p:first-child,li>p:first-child{margin-top:0}ol.algorithm ol:not(.algorithm),.algorithm>ol ol:not(.algorithm){border-left:0.5em solid #def;border-left:0.5em solid var(--algo-border)}a:visited{color:#034575;color:var(--a-visited-text);text-decoration-color:#bbb;text-decoration-color:var(--a-visited-underline)}a[href]:focus,a[href]:hover{text-decoration-thickness:2px;text-decoration-skip-ink:none}a[href]:active{color:#c00;color:var(--a-active-text);text-decoration-color:#c00;text-decoration-color:var(--a-active-underline)}@media screen and (min-width:20em){}.note>p:first-child,.issue>p:first-child,blockquote>:first-child,.amendment>p:first-child,.correction>p:first-child,.addition>p:first-child{margin-top:0}.note>p:last-child,.issue>p:last-child,blockquote>:last-child,.amendment>p:last-child,.correction>p:last-child,.addition>p:last-child{margin-bottom:0}.issue::before,.issue>.marker,.example::before,.example>.marker,.note::before,.note>.marker,details.note>summary>.marker,.amendment::before,.amendment>.marker,details.amendment>summary>.marker,.correction::before,.correction>.marker,details.correction>summary>.marker,.addition::before,.addition>.marker,details.addition>summary>.marker{text-transform:uppercase;padding-right:1em}.example::before,.example>.marker{display:block;padding-right:0em}.example::before,.example>.marker{color:#574b0f;color:var(--exampleheading-text)}.note::before,.note>.marker,details.note>summary{color:hsl(120,70%,30%);color:var(--noteheading-text)}@media not print{}@media (max-width:30em){}@media screen and (min-width:78em){}@media not print{}@page{margin:1.5cm 1.1cm}@media (min-width:55em){}@media screen and (min-width:78em){}@media screen and (min-width:90em){}@media not print{}</style>
<meta name=viewport content="width=device-width">
<title>P3330/D1 Draft Standard for Shape Expression Schemas</title>
<style>.example{margin-left:0;margin-right:2ex;margin-top:0.1ex;margin-bottom:0.1ex;background-color:#f9f9f9}.pre{font-family:monospace}.shexj,.grammarTable tr.obj{margin-left:0;margin-right:0.1ex;margin-top:0.1ex;margin-bottom:0.1ex;border:thin solid #888888;padding:1ex 2ex 0.5ex 2ex;page-break-inside:avoid;background-color:#F8F8F0;line-height:1.5;font-family:monospace}.shexj th{vertical-align:top}p .json,li>.json{border:thin solid #E0F7E0;page-break-inside:avoid;background-color:#F0FFF0;line-height:1.5;color:black}div.json,div.shexc,div.repchoice{margin-left:0;margin-right:2ex;margin-top:0.1ex;margin-bottom:0.1ex;border:medium solid #E0F7E0;page-break-inside:avoid;background-color:#F0FFF0;line-height:1.5;display:inline-block}div.repchoice{position:relative}div.repchoice button{position:absolute;top:0px;right:0px;font-size:70%;background-color:transparent}button.show-repchoice{font-size:70%;background-color:transparent}div.json pre,div.shexc pre{margin:0}.inline.json,.inline.shexc{padding:0;margin:0}li p,li div.example{margin:0}.grammarTable tr.obj{background-color:#F8F8F0}.grammarTable tr:not(.obj) .param,.grammarTable tr .obj,.jobjref{background-color:#F8F8F0;border:thin solid #E8E8E0}.math{font-style:normal;font-family:sans-serif;color:#004444}.inline .hljs{padding:0}.schema{color:#070}.data{color:#007}table td{vertical-align:top}table th{text-align:center}table{border-collapse:collapse}table.bare td{border:none}table.bare tr td:first-child{width:10em}td,th{border-style:solid}.pass{background-color:#cfc}.fail{background-color:#fcc}span.fail{background-color:#fcc}.param,a[href].param{color:#630}.var{color:#056800}div.grammarTable table{border-style:solid;border-width:1px;border-color:#AAA;border-spacing:0px;border-collapse:collapse}div.grammarTable table *{border-left-width:0px;border-right-width:0px;border-color:#AAA}div.grammarTable table * tr{border-top-style:solid;border-top-width:1px;border-top-color:#AAA}div.shexjTable table{border-style:solid;border-width:1px;border-color:#AAA;border-spacing:0px;border-collapse:collapse}div.shexjTable table *{border-left-width:0px;border-right-width:0px;border-color:#AAA}div.shexjTable table * tr{border-top-style:solid;border-top-width:1px;border-top-color:#AAA}div.shexjTable th{text-align:right}.grammarTable tr.obj td:nth-child(2){text-align:right}.grammarTable tr.obj td:nth-child(3){text-align:right}.comment,.comment a[href]{color:#e20;font-style:italic}.relativeIRI{color:#058}.keyword{color:#c0c}.valueSet{font-style:italic}.grammarTable .grammarParagraph{border-left:thin solid white;border-right:thin solid white}.grammarTable tr.obj td:nth-child(1){border:thin solid white;background-color:white;border-right:thin solid #AAA}.grammarTable tr.params td:nth-child(1){border:thin solid white;border-right:thin solid #AAA}.grammarTable tr.params td:nth-child(2){padding-left:.25em}.label{font-weight:bold}.grammarParagraph{font-style:oblique}.borderHack{border-bottom:thick solid white!important}.borderHack td:nth-child(1){border-top:none!important}.code{color:#C83500;font-family:Menlo,Consolas,"DejaVu Sans Mono",Monaco,monospace;font-size:.9em;page-break-inside:avoid;text-transform:none}.codelist li>div{display:inline-flex}.function{white-space:nowrap;color:#c83500}.example{display:inline-block}.tight li{margin:0;line-height:1}.line-labels{float:left;padding:0;margin:0;text-align:right;border-top:solid medium transparent}.trace li{list-style-type:none;font-style:normal;font-family:sans-serif;color:#003333;margin:0 0 0 .5em;line-height:1.2}.trace ul{padding-left:0;margin-left:.5em}.leadup{margin-bottom:0}.followup{margin-top:0}.lineno.schema{border-radius:.4em;background-color:#ECEAEE;border:thin solid #DCDADE}.lineno.data{border-radius:.4em;background-color:#ECFADE;border:thin solid #DCEACE}.exsec,.validation span:nth-child(1){font-weight:bold}.lookit{font-weight:bold}.repchoice pre{margin-top:0;margin-bottom:0}div.example .error{background-color:#fff7f7;border:medium solid #efe7e7}ol.algorithm{counter-reset:numsection;list-style-type:none}ol.algorithm li{margin:0.5em 0}ol.algorithm li:before{font-weight:bold;counter-increment:numsection;content:counters(numsection,".")") "}.simupre{white-space:pre;font-family:monospace}dd>dl{margin-left:-2em;border-left:2em solid #f7f7f7;Margin-top:0}</style>
<style>h2,h3{color:#000!important}</style>
<style id=respec-ui-styles class=removeOnSave>#respec-ui{position:fixed;display:flex;flex-direction:row-reverse;top:20px;right:20px;width:202px;text-align:right;z-index:9000}#respec-pill,.respec-info-button{height:2.4em;background:#fff;color:#787878;border:1px solid #ccc;box-shadow:1px 1px 8px 0 rgba(100,100,100,.5);padding:.2em 0}.respec-info-button{border:none;opacity:.75;border-radius:2em;margin-right:1em;min-width:3.5em;will-change:opacity}.respec-info-button:focus,.respec-info-button:hover{opacity:1;transition:opacity .2s}#respec-pill{width:4.8em}#respec-pill:not(:disabled){animation:respec-fadein .6s ease-in-out}@keyframes respec-fadein{from{margin-top:-1.2em;border-radius:50%;border:.2em solid rgba(100,100,100,.5);box-shadow:none;height:4.8em}to{margin-top:0;border:1px solid #ccc;border-radius:0;box-shadow:1px 1px 8px 0 rgba(100,100,100,.5);height:2.4em}}#respec-pill:disabled{margin-top:-1.2em;position:relative;border:none;box-shadow:none;border-radius:50%;width:4.8em;height:4.8em;padding:0}#respec-pill:disabled::after{position:absolute;content:"";inset:-.2em;border-radius:50%;border:.2em solid rgba(100,100,100,.5);border-left:.2em solid transparent;animation:respec-spin .5s infinite linear}@media (prefers-reduced-motion){#respec-pill:not(:disabled){animation:none}#respec-pill:disabled::after{animation:none;border-left:.2em solid rgba(100,100,100,.5)}}@keyframes respec-spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}#respec-pill:focus,#respec-pill:hover{color:#000;background-color:#f5f5f5;transition:color .2s}#respec-pill:focus,#respec-ui button:focus,.respec-option:focus{outline:0;outline-style:none}#respec-pill-error{background-color:red;color:#fff}#respec-pill-warning{background-color:orange;color:#fff}:is(.respec-warning-list,.respec-error-list)>li{list-style-type:none;margin:0;padding:.5em 0;padding-left:2em;padding-right:.5em}:is(.respec-warning-list,.respec-error-list)>li+li{margin-top:.5rem}:is(.respec-warning-list,.respec-error-list)>li:before{position:absolute;left:.4em}:is(.respec-warning-list,.respec-error-list) p{padding:0;margin:0}:is(.respec-warning-list,.respec-error-list)>li li{list-style:disc}p:is(.respec-hint,.respec-occurrences){display:block;margin-top:.5em}</style><style id=respec-mainstyle>@keyframes pop{0%{transform:scale(1,1)}25%{transform:scale(1.25,1.25);opacity:.75}100%{transform:scale(1,1)}}a.internalDFN{border-bottom:1px solid #99c;text-decoration:none}a.bibref{text-decoration:none}.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}.respec-offending-element{text-decoration:red wavy underline}@supports not (text-decoration:red wavy underline){.respec-offending-element:not(pre){display:inline-block}.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=)bottom repeat-x}}cite .bibref{font-style:normal}.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}.header-wrapper{display:flex;align-items:baseline}:is(h2,h3,h4,h5,h6):not(#toc>h2,.introductory>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}@media (max-width:767px){dd{margin-left:0}}</style><style>:root{--text:black;--bg:white;--unofficial-watermark:var(--sf-img-0);--logo-bg:#1a5e9a;--logo-active-bg:#c00;--logo-text:white;--tocnav-normal-text:#707070;--tocnav-normal-bg:var(--bg);--tocnav-hover-text:var(--tocnav-normal-text);--tocnav-hover-bg:#f8f8f8;--tocnav-active-text:#c00;--tocnav-active-bg:var(--tocnav-normal-bg);--tocsidebar-text:var(--text);--tocsidebar-bg:#f7f8f9;--tocsidebar-shadow:rgba(0,0,0,.1);--tocsidebar-heading-text:hsla(203,20%,40%,.7);--toclink-text:var(--text);--toclink-underline:#3980b5;--toclink-visited-text:var(--toclink-text);--toclink-visited-underline:#054572;--heading-text:#005a9c;--hr-text:var(--text);--algo-border:#def;--del-text:#AA0000;--del-bg:transparent;--ins-text:#006100;--ins-bg:transparent;--a-normal-text:#034575;--a-normal-underline:#707070;--a-visited-text:var(--a-normal-text);--a-visited-underline:#bbb;--a-hover-bg:rgba(75%,75%,75%,.25);--a-active-text:#c00;--a-active-underline:#c00;--blockquote-border:silver;--blockquote-bg:transparent;--blockquote-text:var(--text);--issue-border:#e05252;--issue-bg:#fbe9e9;--issue-text:var(--text);--issueheading-text:#831616;--example-border:#e0cb52;--example-bg:#fcfaee;--example-text:var(--text);--exampleheading-text:#574b0f;--note-border:#52e052;--note-bg:#e9fbe9;--note-text:var(--text);--noteheading-text:hsl(120,70%,30%);--notesummary-underline:silver;--advisement-border:orange;--advisement-bg:#fec;--advisement-text:var(--text);--advisementheading-text:#b35f00;--amendment-border:#330099;--amendment-bg:#F5F0FF;--amendment-text:var(--text);--amendmentheading-text:#220066;--warning-border:red;--warning-bg:hsla(40,100%,50%,0.95);--warning-text:var(--text);--def-border:#8ccbf2;--def-bg:#def;--def-text:var(--text);--defrow-border:#bbd7e9;--datacell-border:silver;--indexinfo-text:#707070;--indextable-hover-text:black;--indextable-hover-bg:#f7f8f9;--outdatedspec-bg:rgba(0,0,0,.5);--outdatedspec-text:black;--outdated-bg:maroon;--outdated-text:white;--outdated-shadow:red;--editedrec-bg:darkorange}body{counter-reset:example figure issue;max-width:50em;margin:0 auto 4em;padding:1.6em 1.5em 0 calc(26px + 1.5em);line-height:1.5;font-family:sans-serif;widows:2;orphans:2;word-wrap:break-word;overflow-wrap:break-word;color:var(--text);background:white top left fixed no-repeat;background-color:var(--bg);background-size:25px auto}div.head{margin-bottom:1em}@media not print{}@media screen{}@media screen and (max-width:28em){}@media screen and (min-width:78em){body:not(.toc-inline){padding-left:29em}}@media screen and (min-width:90em){body:not(.toc-inline){margin:0 4em}}h2,h3,h4,dt{page-break-after:avoid;page-break-inside:avoid;font:100%sans-serif;font-family:inherit;line-height:1.2;hyphens:manual}h2,h3,h4{margin-top:3rem}h2,h3{color:var(--heading-text)}h2{font-size:140%}h3{font-size:120%}h4{font-weight:bold}dt{font-weight:bold}p{margin:1em 0}dd>p:first-child,li>p:first-child{margin-top:0}ul,ol{margin-left:0;padding-left:2em}li{margin:0.25em 0 0.5em;padding:0}dl dd{margin:0 0 .5em 2em}ol.algorithm ol:not(.algorithm),.algorithm>ol ol:not(.algorithm){border-left:0.5em solid #def;border-left:0.5em solid var(--algo-border)}dfn{font-weight:bolder}pre,code{font-family:Menlo,Consolas,"DejaVu Sans Mono",Monaco,monospace;font-size:.9em;hyphens:none;text-transform:none;text-align:start;font-variant:normal;orphans:3;widows:3;page-break-before:avoid}pre code,code code{font-size:100%}pre{margin-top:1em;margin-bottom:1em;overflow:auto}a[href]{color:var(--a-normal-text);text-decoration-color:var(--a-normal-underline);text-decoration-skip-ink:none}a:visited{color:#034575;color:var(--a-visited-text);text-decoration-color:#bbb;text-decoration-color:var(--a-visited-underline)}a[href]:focus,a[href]:hover{text-decoration-thickness:2px;text-decoration-skip-ink:none}a[href]:active{color:#c00;color:var(--a-active-text);text-decoration-color:#c00;text-decoration-color:var(--a-active-underline)}@media screen and (min-width:20em){}.note,.example{padding:.5em;border:.5em;border-left-style:solid;page-break-inside:avoid;margin:1em auto}span.note{padding:.1em .5em .15em;border-right-style:solid}.note>p:first-child,.issue>p:first-child,blockquote>:first-child,.amendment>p:first-child,.correction>p:first-child,.addition>p:first-child{margin-top:0}.note>p:last-child,.issue>p:last-child,blockquote>:last-child,.amendment>p:last-child,.correction>p:last-child,.addition>p:last-child{margin-bottom:0}.example::before,.example>.marker,.note::before,.note>.marker{text-transform:uppercase;padding-right:1em}.example::before,.example>.marker{display:block;padding-right:0em}.example{border-color:var(--example-border);background:var(--example-bg);color:var(--example-text);counter-increment:example;overflow:auto;clear:both}.example::before,.example>.marker{color:#574b0f;color:var(--exampleheading-text)}.note{border-color:var(--note-border);background:var(--note-bg);color:var(--note-text);overflow:auto}.note::before,.note>.marker{color:hsl(120,70%,30%);color:var(--noteheading-text)}@media not print{}td{text-align:start}table{word-wrap:normal;overflow-wrap:normal;hyphens:manual}@media (max-width:30em){}@media screen and (min-width:78em){}@media not print{}@page{margin:1.5cm 1.1cm}@media (min-width:55em){}@media screen and (min-width:78em){}@media screen and (min-width:90em){}@media not print{}</style><style>.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}.hljs-comment{color:#717277;font-style:italic}.hljs-name{color:#ca4706;font-weight:700}.hljs-literal{color:#0b76c5}.hljs-string{color:#42803c}.hljs-attr,.hljs-number{color:#986801}</style><style class=removeOnSave>var:hover{text-decoration:underline;cursor:pointer}</style><style>var{position:relative;cursor:pointer}</style><meta name=referrer content=no-referrer><link type=image/x-icon rel="shortcut icon" href=data:application/octet-stream;base64,><style>.sf-hidden{display:none!important}</style><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"></head>
<body class=h-entry><div id=respec-ui class=removeOnSave><button id=respec-pill aria-controls=respec-menu aria-expanded=false aria-haspopup=true aria-label="ReSpec Menu">ReSpec</button><ul id=respec-menu role=menu aria-labelledby=respec-pill hidden class=sf-hidden></ul><button class=respec-info-button id=respec-pill-error aria-expanded=false aria-haspopup=true aria-controls=respec-pill-error-modal aria-label="1 ReSpec Error">1</button><button class=respec-info-button id=respec-pill-warning aria-expanded=false aria-haspopup=true aria-controls=respec-pill-warning-modal aria-label="6 ReSpec Warnings">6</button></div><div class=head>
 </div>
 
 <section id=keywords class="introductory flat"><h2>Keywords</h2>
 <p>
 RDF, Schema, Shape Expressions, Structure Definition, Structural Validation
 </p>
 </section><section><div class=header-wrapper><h2 id=overview>Overview</h2><a class="self-link sf-hidden" href=#overview aria-label="Permalink for this Section"></a></div>
 
 <p>
 The Shape Expressions (ShEx) language describes <a data-cite=rdf11-concepts#dfn-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-node>RDF nodes</a> and <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>graph</a> structures.
 A <span class=math>node constraint</span> describes an RDF node (<a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a>, <a data-cite=rdf11-concepts#dfn-blank-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node>blank node</a> or
 <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal>literal</a>) and a <span class=math>shape</span> describes the <a data-cite=rdf11-concepts#dfn-rdf-triple data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple>triples</a> involving nodes in an <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>RDF
 graph</a>.
 These descriptions identify <a data-lt=predicate data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicates</a> and their associated cardinalities and
 datatypes.
 ShEx shapes can be used to communicate data structures associated with some process or interface, generate or
 validate data, or drive user interfaces.
 </p>
 <p>
 This document defines the ShEx language.
 See the <a href=file:///C:/src/shexSpec/primer/index.html>Shape Expressions Primer</a> for a non-normative description of ShEx.
 </p>
 
 <section id=overview_scope><div class=header-wrapper><h3 id=scope>Scope</h3><a class="self-link sf-hidden" href=#overview_scope aria-label="Permalink for this Section"></a></div>
 <p>This standard defines the syntax of Shape Expression schemas represented in JavaScript Object Notation (JSON), Resource Description Framework (RDF) and plain text. This standard includes formal semantics for validation of RDF knowledge graphs using Shape Expressions. This validation process includes the definition of ShapeMaps to associate nodes in RDF graphs with labeled Shape Expressions. A test suite covers all aspects of syntax and validation.</p>
 </section>
 <section id=overview_wordUsage><div class=header-wrapper><h3 id=word-usage>Word Usage</h3><a class="self-link sf-hidden" href=#overview_wordUsage aria-label="Permalink for this Section"></a></div>
 <p>The word shall indicates mandatory requirements strictly to be followed in order to conform to the standard and from which no deviation is permitted (shall equals is required to).</p>
 <p>The word should indicates that among several possibilities one is recommended as particularly suitable, without mentioning or excluding others; or that a certain course of action is preferred but not necessarily required (should equals is recommended that).</p>
 <p>The word may is used to indicate a course of action permissible within the limits of the standard (may equals is permitted to).</p>
 <p>The word can is used for statements of possibility and capability, whether material, physical, or causal (can equals is able to).</p>
 </section>
 <section id=security><div class=header-wrapper><h3 id=security-considerations>Security Considerations</h3><a class="self-link sf-hidden" href=#security aria-label="Permalink for this Section"></a></div>
 
 <p>
 Revealing the structure of an RDF graph can reveal information about the content of conformant data.
 For instance, a schema with a predicate to describe cancer stage indicates that conforming graphs describe
 patients with cancer.
 </p>
 <p>
 The process of testing a graph's conformance to a schema may involve many detailed queries which could draw
 resources to respond to API calls or SPARQL queries.
 </p>
 <p>
 ShEx has an extension mechanism which can, in principle, evalute arbitrary code, possibly as some trusted agent.
 Such extensions should not be executed if they don't come from a trusted source.
 </p>
 <p>
 Since <a href=#dfn-shex class=internalDFN data-link-type=dfn id=ref-for-dfn-shex-1>ShEx</a> is intended to be a pure data exchange format for validating <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>RDF graphs</a>, the <a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-1>ShExJ</a>
 serialization <em class=rfc2119>SHOULD NOT</em> be passed through a code execution mechanism such as JavaScript's <code>eval()</code>
 function to be parsed.
 An (invalid) document may contain code that, when executed, could lead to unexpected side effects compromising the
 security of a system.</p>
 <p>
 See also, <a href=#iana-considerations class="sectionRef sec-ref">IANA Considerations</a>.
 </p>
 </section>
 
 
<section id=normative-references><div class=header-wrapper><h3 id=normative-references-0>Normative references</h3><a class="self-link sf-hidden" href=#normative-references aria-label="Permalink for this Section"></a></div>
 
 <dl class=bibliography><dt id=bib-ecmascript-6.0>[ECMASCRIPT-6.0]<dd>
 Allen Wirfs-Brock. <a href=http://www.ecma-international.org/ecma-262/6.0/index.html><cite>ECMA-262 6th Edition, The ECMAScript 2015 Language Specification</cite></a>. Ecma International. June 2015. Standard. URL: <a href=http://www.ecma-international.org/ecma-262/6.0/index.html>http://www.ecma-international.org/ecma-262/6.0/index.html</a>
 <dt id=bib-json-ld>[JSON-LD]<dd>
 Manu Sporny; Gregg Kellogg; Markus Lanthaler. <a href=https://www.w3.org/TR/json-ld/><cite>JSON-LD 1.0</cite></a>. W3C. 3 November 2020. W3C Recommendation. URL: <a href=https://www.w3.org/TR/json-ld/>https://www.w3.org/TR/json-ld/</a>
 <dt id=bib-rdf11-concepts>[RDF11-CONCEPTS]<dd>
 Richard Cyganiak; David Wood; Markus Lanthaler. <a href=https://www.w3.org/TR/rdf11-concepts/><cite>RDF 1.1 Concepts and Abstract Syntax</cite></a>. W3C. 25 February 2014. W3C Recommendation. URL: <a href=https://www.w3.org/TR/rdf11-concepts/>https://www.w3.org/TR/rdf11-concepts/</a>
 <dt id=bib-rdf11-mt>[rdf11-mt]<dd>
 Patrick Hayes; Peter Patel-Schneider. <a href=https://www.w3.org/TR/rdf11-mt/><cite>RDF 1.1 Semantics</cite></a>. W3C. 25 February 2014. W3C Recommendation. URL: <a href=https://www.w3.org/TR/rdf11-mt/>https://www.w3.org/TR/rdf11-mt/</a>
 <dt id=bib-rfc3986>[RFC3986]<dd>
 T. Berners-Lee; R. Fielding; L. Masinter. <a href=https://www.rfc-editor.org/rfc/rfc3986><cite>Uniform Resource Identifier (URI): Generic Syntax</cite></a>. IETF. January 2005. Internet Standard. URL: <a href=https://www.rfc-editor.org/rfc/rfc3986>https://www.rfc-editor.org/rfc/rfc3986</a>
 <dt id=bib-rfc4647>[rfc4647]<dd>
 A. Phillips, Ed.; M. Davis, Ed.. <a href=https://www.rfc-editor.org/rfc/rfc4647><cite>Matching of Language Tags</cite></a>. IETF. September 2006. Best Current Practice. URL: <a href=https://www.rfc-editor.org/rfc/rfc4647>https://www.rfc-editor.org/rfc/rfc4647</a>
 <dt id=bib-rfc7159>[rfc7159]<dd>
 T. Bray, Ed.. <a href=https://www.rfc-editor.org/rfc/rfc7159><cite>The JavaScript Object Notation (JSON) Data Interchange Format</cite></a>. IETF. March 2014. Proposed Standard. URL: <a href=https://www.rfc-editor.org/rfc/rfc7159>https://www.rfc-editor.org/rfc/rfc7159</a>
 <dt id=bib-shex-vocab>[shex-vocab]<dd>
 Gregg Kellogg. <a href=http://www.w3.org/ns/shex#><cite>Shape Expression Vocabulary</cite></a>. URL: <a href=http://www.w3.org/ns/shex#>http://www.w3.org/ns/shex#</a>
 <dt id=bib-sparql11-query>[sparql11-query]<dd>
 Steven Harris; Andy Seaborne. <a href=https://www.w3.org/TR/sparql11-query/><cite>SPARQL 1.1 Query Language</cite></a>. W3C. 21 March 2013. W3C Recommendation. URL: <a href=https://www.w3.org/TR/sparql11-query/>https://www.w3.org/TR/sparql11-query/</a>
 <dt id=bib-turtle>[turtle]<dd>
 Eric Prud'hommeaux; Gavin Carothers. <a href=https://www.w3.org/TR/turtle/><cite>RDF 1.1 Turtle</cite></a>. W3C. 25 February 2014. W3C Recommendation. URL: <a href=https://www.w3.org/TR/turtle/>https://www.w3.org/TR/turtle/</a>
 <dt id=bib-xml>[XML]<dd>
 Tim Bray; Jean Paoli; Michael Sperberg-McQueen; Eve Maler; François Yergeau et al. <a href=https://www.w3.org/TR/xml/><cite>Extensible Markup Language (XML) 1.0 (Fifth Edition)</cite></a>. W3C. 26 November 2008. W3C Recommendation. URL: <a href=https://www.w3.org/TR/xml/>https://www.w3.org/TR/xml/</a>
 <dt id=bib-xmlschema-2>[xmlschema-2]<dd>
 Paul V. Biron; Ashok Malhotra. <a href=https://www.w3.org/TR/xmlschema-2/><cite>XML Schema Part 2: Datatypes Second Edition</cite></a>. W3C. 28 October 2004. W3C Recommendation. URL: <a href=https://www.w3.org/TR/xmlschema-2/>https://www.w3.org/TR/xmlschema-2/</a>
 <dt id=bib-xpath-functions>[xpath-functions]<dd>
 Ashok Malhotra; Jim Melton; Norman Walsh; Michael Kay. <a href=https://www.w3.org/TR/xpath-functions/><cite>XQuery 1.0 and XPath 2.0 Functions and Operators (Second Edition)</cite></a>. W3C. 14 December 2010. W3C Recommendation. URL: <a href=https://www.w3.org/TR/xpath-functions/>https://www.w3.org/TR/xpath-functions/</a>
 <dt id=bib-xpath-functions-31>[xpath-functions-31]<dd>
 Michael Kay. <a href=https://www.w3.org/TR/xpath-functions-31/><cite>XPath and XQuery Functions and Operators 3.1</cite></a>. W3C. 21 March 2017. W3C Recommendation. URL: <a href=https://www.w3.org/TR/xpath-functions-31/>https://www.w3.org/TR/xpath-functions-31/</a>
 <dt id=bib-xpath20>[xpath20]<dd>
 Anders Berglund; Scott Boag; Don Chamberlin; Mary Fernandez; Michael Kay; Jonathan Robie; Jerome Simeon et al. <a href=https://www.w3.org/TR/xpath20/><cite>XML Path Language (XPath) 2.0 (Second Edition)</cite></a>. W3C. 14 December 2010. W3C Recommendation. URL: <a href=https://www.w3.org/TR/xpath20/>https://www.w3.org/TR/xpath20/</a>
 </dl>
 </section></section><section id=sotd>
 <p>
 This is an editor's draft of the Shape Expressions specification.
 ShEx 2.x differs significantly from the W3C ShEx Submission.
 The <a href=http://shex.io/shex-semantics-20170713/>July 2017 publication</a> included a <a href=#validation>definition of validation</a> which implied infinite recursion.
 This version explicitly includes recursion checks.
 No tests changed as a result of this and no implementations or applications are known to have been affected.
 </p>
 <p>
 If you wish to make comments regarding this document, please raise them as GitHub issues.
 There are separate interfaces for <a href=https://github.com/shexSpec/spec/issues>specification</a>, <a href=https://github.com/shexSpec/shex/issues>language</a> and <a href=https://github.com/shexSpec/shexTest/issues>test</a> issues.
 Only send comments to <a href=mailto:public-shex@w3.org>public-shex@w3.org</a> (<a href="mailto:public-shex-request@w3.org?subject=subscribe">subscribe</a>,
 <a href=https://lists.w3.org/Archives/Public/public-shex/>archives</a>) if you are unable to raise issues on
 GitHub. All comments are welcome.
 </p>
 </section>
 
 <section id=introduction><div class=header-wrapper><h2 id=introduction-0>Introduction</h2><a class="self-link sf-hidden" href=#introduction aria-label="Permalink for this Section"></a></div>
 
 <p>
 The Shape Expressions (<dfn id=dfn-shex tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>ShEx</dfn>) language provides a structural schema for RDF data.
 This can be used to document APIs or datasets, aid in development of API-conformant messages, minimize defensive
 programming, guide user interfaces, or anything else that involves a machine-readable description of data
 organization and typing requirements.
 </p>
 <p>
 ShEx describes <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>RDF graph</a> [<cite><a class=bibref data-link-type=biblio href=#bib-rdf11-concepts title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>] structures as sets of potentially connected <a data-lt=shape href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-1>Shapes</a>.
 These constrain the <a data-cite=rdf11-concepts#dfn-rdf-triple data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple>triples</a> involving nodes in an <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>RDF graph</a>.
 <code>Node Constraints</code> constrain RDF nodes by constraining their node kind (<a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a>, <a data-cite=rdf11-concepts#dfn-blank-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node>blank node</a>
 or <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal>Literal</a>), enumerating permissible values in value sets, specifying their datatype, and constraining
 value ranges of Literals.
 Additionally, they constrain lexical forms of <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal>Literals</a>, <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRIs</a> and <a data-cite=rdf11-concepts#dfn-blank-node-identifier data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier>labeled blank nodes</a>.
 Shape Expressions schemas share blank nodes with the constrained <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>RDF graphs</a> in the same way that graphs in
 <a data-cite=rdf11-concepts#dfn-rdf-dataset href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset>RDF datasets</a> [<cite><a class=bibref data-link-type=biblio href=#bib-rdf11-concepts title="RDF 1.1 Concepts and Abstract Syntax">rdf11-concepts</a></cite>] share blank nodes.
 </p>
 <p>
 ShEx can be represented in JSON structures (<a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-2>ShExJ</a>) or a compact syntax (<a href=#dfn-shexc class=internalDFN data-link-type=dfn id=ref-for-dfn-shexc-1>ShExC</a>).
 The compact syntax is intended for human consumption; the JSON structure for machine processing.
 This document defines ShEx in terms of <a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-3>ShExJ</a> and includes a <a href=#shexc>section on the ShEx Compact
 Syntax (ShEx)</a>.
 </p>
 </section>
 <section id=defn-acro-abbrs><div class=header-wrapper><h2 id=definitions-acronyms-and-abbreviations>Definitions, Acronyms, and Abbreviations</h2><a class="self-link sf-hidden" href=#defn-acro-abbrs aria-label="Permalink for this Section"></a></div>
 
 <section id=definitions><div class=header-wrapper><h3 id=definitions-0>Definitions</h3><a class="self-link sf-hidden" href=#definitions aria-label="Permalink for this Section"></a></div>
 
 <p>Shape expressions are defined using terms from RDF semantics [<cite><a class=bibref data-link-type=biblio href=#bib-rdf11-mt title="RDF 1.1 Semantics">rdf11-mt</a></cite>]:</p>
 <ul>
 <li><dfn data-cite=rdf11-concepts#dfn-node data-lt="nodes|rdf node|rdf nodes" id=dfn-nodes class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-node data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-node>Node</a></dfn>: one of <dfn data-cite=rdf11-concepts#dfn-iri data-lt=iris id=dfn-iris class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-iri>IRI</a></dfn>, <dfn data-cite=rdf11-concepts#dfn-blank-node data-lt="bnodes|blank nodes" id=dfn-bnodes class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-blank-node>blank node</a></dfn>, <dfn data-cite=rdf11-concepts#dfn-literal data-lt="literal|literals|RDF Literal|RDF Literals" data-plurals="rdf literals|rdf literal" id=dfn-literal class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-literal>Literal</a></dfn></li>
 <li><dfn data-cite=rdf11-concepts#dfn-rdf-graph data-lt="RDF Graph|RDF Graphs" data-plurals="rdf graphs|rdf graph" id=dfn-rdf-graph class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-rdf-graph>Graph</a></dfn>: a set of <dfn data-cite=rdf11-concepts#dfn-rdf-triple data-lt="triple|rdf triple|rdf triples" id=dfn-triple class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-rdf-triple>Triples</a></dfn> of (<dfn data-cite=rdf11-concepts#dfn-subject id=dfn-subject class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-subject data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-subject>subject</a></dfn>, <dfn data-cite=rdf11-concepts#dfn-predicate id=dfn-predicate class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-predicate>predicate</a></dfn>, <dfn data-cite=rdf11-concepts#dfn-object id=dfn-object class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-object data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-object>object</a></dfn>)</li>
 </ul>
 <p>
 The following functions access the elements of an <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>RDF graph</a> <span class=math>G</span> containing a node
 <span class=math>n</span>:
 </p>
 <ul>
 <li>
 <span class=math><dfn id=dfn-arcsout tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>arcsOut</dfn>(G, n)</span> is the set of <a data-cite=rdf11-concepts#dfn-rdf-triple data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple>triples</a> in a <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>graph</a> <span class=math>G</span> with <a data-cite=rdf11-concepts#dfn-subject data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-subject>subject</a> <span class=math>n</span>.
 </li>
 <li>
 <span class=math><dfn id=dfn-predicatesout tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>predicatesOut</dfn>(G, n)</span> is the set of <a data-lt=predicate data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicates</a>
 in <span class=math><a href=#dfn-arcsout class=internalDFN data-link-type=dfn id=ref-for-dfn-arcsout-1>arcsOut</a>(G, n)</span>.
 </li>
 <li>
 <span class=math><dfn id=dfn-arcsin tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>arcsIn</dfn>(G, n)</span> is the set of <a data-cite=rdf11-concepts#dfn-rdf-triple data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple>triples</a> in a <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>graph</a> <span class=math>G</span> with <a data-cite=rdf11-concepts#dfn-object data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-object>object</a> <span class=math>n</span>.
 </li>
 <li>
 <span class=math><dfn id=dfn-predicatesin tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>predicatesIn</dfn>(G, n)</span> is the set of <a data-lt=predicate data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicates</a> in
 <span class=math><a href=#dfn-arcsin class=internalDFN data-link-type=dfn id=ref-for-dfn-arcsin-1>arcsIn</a>(G, n)</span>.
 </li>
 <li>
 <span class=math><dfn id=dfn-neigh tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>neigh</dfn>(G, n)</span> is the neighbourhood of the <a data-cite=rdf11-concepts#dfn-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-node>node</a> <span class=math>n</span> in the <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>graph</a> <span class=math>G</span>.<br><span class=math><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-1>neigh</a>(G, n) = <a href=#dfn-arcsout class=internalDFN data-link-type=dfn id=ref-for-dfn-arcsout-2>arcsOut</a>(G, n) ∪ <a href=#dfn-arcsin class=internalDFN data-link-type=dfn id=ref-for-dfn-arcsin-2>arcsIn</a>(G, n)</span>.
 </li>
 <li>
 <span class=math><dfn id=dfn-predicates tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>predicates</dfn>(G, n)</span> is the set of <a data-lt=predicate data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicates</a> in
 <span class=math><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-2>neigh</a>(G, n)</span>.<br><span class=math><a href=#dfn-predicates class=internalDFN data-link-type=dfn id=ref-for-dfn-predicates-1>predicates</a>(G, n) =
 <a href=#dfn-predicatesout class=internalDFN data-link-type=dfn id=ref-for-dfn-predicatesout-1>predicatesOut</a>(G, n) ∪ <a href=#dfn-predicatesin class=internalDFN data-link-type=dfn id=ref-for-dfn-predicatesin-1>predicatesIn</a>(G, n)</span>.
 </li>
 <li>
 <span class=math><dfn id=dfn-def tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>def</dfn>(Sch, label)</span> is the <span class=math>decl</span>.<span class=param>shapeExpr</span> where <span class=math>decl</span>.<span class=param>label</span> =
 <code>label</code>. <code>Sch</code> must have exactly one <code>def(Sch, label)</code>.
 </li>
 </ul>
 <div class=example>
 <p>
 Consider the <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>RDF graph</a> <span class=math>G</span> represented in Turtle:
 </p>
 <pre class=data aria-busy=false><code class=hljs>PREFIX ex: http://schema.example/#
PREFIX inst: http://inst.example/#
PREFIX foaf: http://xmlns.com/foaf/
PREFIX xsd: http://www.w3.org/2001/XMLSchema#

inst:Issue1
    ex:state      ex:unassigned ;
    ex:reportedBy _:User2 .

_:User2
    foaf:name     "Bob Smith" ;
    foaf:mbox     &lt;mailto:bob@example.org&gt; .</code></pre>
 <p>
 There are two arcs out of <span class=pre>_:User2</span>; <span class=math><a href=#dfn-arcsout class=internalDFN data-link-type=dfn id=ref-for-dfn-arcsout-3>arcsOut</a>(G, <span class=pre>_:User2</span>)</span>:
 </p>
 <pre class=data aria-busy=false><code class=hljs>_:User2  foaf:name  "Bob Smith" .
_:User2  foaf:mbox  &lt;mailto:bob@example.org&gt; .</code></pre>
 <p>
 There is one arc into <span class=pre>_:User2</span>; <span class=math><a href=#dfn-arcsin class=internalDFN data-link-type=dfn id=ref-for-dfn-arcsin-3>arcsIn</a>(G, <span class=pre>_:User2</span>)</span>:
 </p>
 <pre class=data aria-busy=false><code class=hljs>inst:Issue1 ex:reportedBy  _:User2 .</code></pre>
 <p>
 There are three arcs in the neighbourhood of <span class=pre>_:User2</span> set, <span class=math><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-3>neigh</a>(G, <span class=pre>_:User2</span>)</span>:
 </p>
 <pre class=data aria-busy=false><code class=hljs>_:User2  foaf:name  "Bob Smith" .
_:User2  foaf:mbox  &lt;mailto:bob@example.org&gt; .
inst:Issue1 ex:reportedBy  _:User2 .</code></pre>
 </div>
 </section>
 <section id="Acronyms and abbreviations"><div class=header-wrapper><h3 id=acronyms-and-abbreviations>Acronyms And Abbreviations</h3><a class="self-link sf-hidden" href=#Acronyms%20and%20abbreviations aria-label="Permalink for this Section"></a></div>
 
 <table id=acronyms class=bare>
 <tbody>
 <tr>
 <td>BNF</td>
 <td>Backus Naur Form</td>
 </tr>
 <tr>
 <td>CSS</td>
 <td>Cascading Stylesheets</td>
 </tr>
 <tr>
 <td>IANA</td>
 <td>Internet Assigned Numbers Authority</td>
 </tr>
 <tr>
 <td>IRI</td>
 <td>Internationalized Resource Identifier</td>
 </tr>
 <tr>
 <td>RDF</td>
 <td>Resource Description Framework</td>
 </tr>
 <tr>
 <td>ShEx</td>
 <td>Shape Expressions RDF schema language</td>
 </tr>
 <tr>
 <td>ShExC</td>
 <td>ShEx Compact syntax</td>
 </tr>
 <tr>
 <td>ShExJ</td>
 <td>ShEx JSON (or JSON-LD) syntax</td>
 </tr>
 <tr>
 <td>ShExR</td>
 <td>ShEx RDF syntax</td>
 </tr>
 <tr>
 <td>SPARQL</td>
 <td>RDF Query Language</td>
 </tr>
 <tr>
 <td>URL</td>
 <td>Uniform Resource Locator</td>
 </tr>
 <tr>
 <td>UTF-8</td>
 <td>Unicode Transformation Format</td>
 </tr>
 <tr>
 <td>XML</td>
 <td>Extensible Markup Language</td>
 </tr>
 <tr>
 <td>XPath</td>
 <td>Path Language for XML</td>
 </tr>
 </tbody>
 </table>
 </section>
 </section>
 <section id=notation><div class=header-wrapper><h2 id=notation-0>Notation</h2><a class="self-link sf-hidden" href=#notation aria-label="Permalink for this Section"></a></div>
 
 <p>
 The JSON [<cite><a class=bibref data-link-type=biblio href=#bib-rfc7159 title="The JavaScript Object Notation (JSON) Data Interchange Format">rfc7159</a></cite>] Syntax serves as a serializable proxy for an abstract syntax.
 </p>
 <p>
 <a data-cite=rdf11-concepts/#dfn-rdf-term href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-term>RDF terms</a> are represented as <a data-cite=json-ld#dfn-node href=https://www.w3.org/TR/json-ld/#dfn-node>JSON-LD nodes</a>.
 <ul>
 <li><a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRIs</a> are represented as a <a data-cite=rfc7159#section-7 href=https://www.rfc-editor.org/rfc/rfc7159#section-7>JSON string</a> consisting of the IRI
 string, e.g. <br><code class=json>"http://example.org/resource"</code></li>
 <li><a data-cite=rdf11-concepts#dfn-blank-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node>Blank nodes</a> are represented as a JSON string composed of the concatenation of "<code>_:</code>" and a
 <dfn data-cite=rdf11-concepts#dfn-blank-node-identifier data-lt="blank node identifiers|labeled blank nodes" id=dfn-blank-node-identifiers class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-blank-node-identifier>blank node identifier</a></dfn>, e.g. <br><code class=json>"_:blank3"</code>
 </li>
 <li><a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal>Literals</a> are represented as a <a data-cite=rfc7159#section-4 data-link-type=dfn href=https://www.rfc-editor.org/rfc/rfc7159#section-4>JSON object</a>s following the composition rules for <a data-cite=json-ld/#dfn-json-ld-value href=https://www.w3.org/TR/json-ld/#dfn-json-ld-value>JSON-LD values</a>, i.e.
 <ul>
 <li>literals with the datatype <code>http://www.w3.org/2001/XMLSchema#string</code> are represented with the
 <span class=param>value</span> property, e.g. <br><code class=json>{ "value": "abc" }</code>.
 </li>
 <li><a data-cite=rdf11-concepts#dfn-language-tagged-string data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string>language-tagged strings</a> are represented with an additional <span class=param>language</span>
 property, e.g. <br><code class=json>{ "value": "hello world", "langague": "en-US" }</code></li>
 <li>datatyped literals are represented with an additional <span class=param>datatype</span> property, e.g.
 <br><code class=json>{ "value": "123", "datatype": "http://www.w3.org/2001/XMLSchema#integer" }</code>
 </li>
 </ul>
 </li>
 </ul>
 <p></p>
 <section id=json-grammar><div class=header-wrapper><h3 id=json-grammar-0>JSON Grammar</h3><a class="self-link sf-hidden" href=#json-grammar aria-label="Permalink for this Section"></a></div>
 
 <p>
 This specification uses a <dfn id=dfn-json-grammar tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>JSON grammar</dfn> to describe the set of JSON documents that can be interpreted
 as a ShEx schema.
 ShEx data structures are represented as <dfn data-cite=rfc7159#section-4 data-lt="json object" id=dfn-json-object class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.rfc-editor.org/rfc/rfc7159#section-4 data-cite=rfc7159 data-cite-path data-cite-frag=#section-4>JSON
 objects</a></dfn> with a member with the name "<code>type</code>" (i.e. an object with a <span class=param>type</span> attribute):
 </p>
 <div class=json>
 <pre class="json nohighlight">{ "type": "typeName", member<sub>0…n</sub> }</pre>
 </div>
 <p>
 These are expressed in JSON grammar as <span class=shexj>typeName { member* }</span>.
 <a data-cite=rfc7159#section-2 href=https://www.rfc-editor.org/rfc/rfc7159#section-2>RFC7159 Section 2</a> provides syntactic constraints for JSON — the grammar
 constraining those to valid <a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-4>ShExJ</a> constructs is composed of:
 </p>
 <ul>
 <li><code>typeName</code> is the name of the typed data structure.
 Types are referenced in the definitions of object members and in the definitions of the semantics for those
 data structures.</li>
 <li><code>member*</code> is a list of zero or more terminals or references to other typeExpressions.</li>
 <li>A <code>typeExpression</code> is one of:
 <ul>
 <li><code>typeName</code> — an object of corresponding type</li>
 <li><code>array</code>: <span class=shexj>[ typeExpression+ ]</span>— an array of one or more JSON values
 matching the typeExpression.</li>
 <li><code>choice</code>: <span class=shexj>typeExpression1 | typeExpression2 | …</span>— a choice between
 two or more typeExressions.</li>
 </ul>
 </li>
 <li>Cardinalities are represented as by the strings <code>?</code>, <code>+</code>, <code>*</code> following the
 <a data-cite=XML#sec-notation href=https://www.w3.org/TR/xml/#sec-notation>notation in the XML specification</a>[<cite><a class=bibref data-link-type=biblio href=#bib-xml title="Extensible Markup Language (XML) 1.0 (Fifth Edition)">XML</a></cite>] or <code>{m,}</code> to indicate
 a that at least <code>m</code> elements are required.
 </li>
 </ul>
 <p>
 The following examples are excerpts from the definitions below.
 In the JSON notation,
 </p>
 <div class="shexj simupre"><a class="obj internalDFN" href=#dfn-shapes-schema data-link-type=dfn id=ref-for-dfn-shapes-schema-1>Schema</a> { <a class="param internalDFN" href=#dfn-startacts data-link-type=dfn id=ref-for-dfn-startacts-1>startActs</a>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-1>SemAct</a>+]? <a class="param internalDFN" href=#dfn-start data-link-type=dfn id=ref-for-dfn-start-1>start</a>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-1>shapeExpr</a>? <a class="param internalDFN" href=#dfn-imports data-link-type=dfn id=ref-for-dfn-imports-1>imports</a>:[<a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a>+]? <a class="param internalDFN" href=#dfn-shapes data-link-type=dfn id=ref-for-dfn-shapes-1>shapes</a>:[<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-2>shapeExpr</a>+]? }
      </div>
 <p>
 signifies that a <code>Schema</code> has four optional components called <a class="param internalDFN" href=#dfn-startacts data-link-type=dfn id=ref-for-dfn-startacts-2>startActs</a>, <a class="param internalDFN" href=#dfn-start data-link-type=dfn id=ref-for-dfn-start-2>start</a>, <a class="param internalDFN" href=#dfn-imports data-link-type=dfn id=ref-for-dfn-imports-2>imports</a> and <a class="param internalDFN" href=#dfn-shapes data-link-type=dfn id=ref-for-dfn-shapes-2>shapes</a>:
 </p>
 <ul>
 <li><span class=param>startActs</span> is a list of one or more <a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-2>SemAct</a>.</li>
 <li><span class=param>start</span> is a <a class="objref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-3>shapeExpr</a>.</li>
 <li><span class=param>imports</span> is a list of one or more <a class=objref data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a>.</li>
 <li><span class=param>shapes</span> is an array of <a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-4>shapeExpr</a>.</li>
 </ul>
 <div class="shexj simupre"><a class="nob internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-5>shapeExpr</a> = <a class="objref internalDFN" href=#dfn-shapeor data-link-type=dfn id=ref-for-dfn-shapeor-1>ShapeOr</a> | <a class="objref internalDFN" href=#dfn-shapeand data-link-type=dfn id=ref-for-dfn-shapeand-1>ShapeAnd</a> | <a class="objref internalDFN" href=#dfn-shapenot data-link-type=dfn id=ref-for-dfn-shapenot-1>ShapeNot</a>
        | <a class="objref internalDFN" href=#dfn-nodeconstraint data-link-type=dfn id=ref-for-dfn-nodeconstraint-1>NodeConstraint</a> | <a class="objref internalDFN" href=#dfn-shape data-link-type=dfn id=ref-for-dfn-shape-2>Shape</a> | <a class="objref internalDFN" href=#dfn-shapeexternal data-link-type=dfn id=ref-for-dfn-shapeexternal-1>ShapeExternal</a> ;
      </div>
 <p>
 signifies that a <a href=#dfn-shapeexpr class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexpr-6>shapeExpr</a> is one of seven object types: <a class="objref .shexj internalDFN" href=#dfn-shapeor data-link-type=dfn id=ref-for-dfn-shapeor-2>ShapeOr</a> | <a class="objref internalDFN" href=#dfn-shapeand data-link-type=dfn id=ref-for-dfn-shapeand-2>ShapeAnd</a> | ….
 </p>
 <div class="shexj simupre"><a class="obj internalDFN" href=#dfn-nodeconstraint data-link-type=dfn id=ref-for-dfn-nodeconstraint-2>NodeConstraint</a> { <span class=param>nodeKind</span>:(<span class=literal>"iri"</span> | <span class=literal>"bnode"</span> | <span class=literal>"nonliteral"</span> | <span class=literal>"literal"</span>)? <a class="nobref internalDFN" href=#dfn-xsfacet data-link-type=dfn id=ref-for-dfn-xsfacet-1>xsFacet</a>*
        }
        <a class="nob internalDFN" href=#dfn-xsfacet data-link-type=dfn id=ref-for-dfn-xsfacet-2>xsFacet</a> = <a class="nobref internalDFN" href=#dfn-stringfacet data-link-type=dfn id=ref-for-dfn-stringfacet-1>stringFacet</a> | <a class="nobref internalDFN" href=#dfn-numericfacet data-link-type=dfn id=ref-for-dfn-numericfacet-1>numericFacet</a> ;
      </div>
 <p>
 signifies that a <code>NodeConstraint</code> has a <code class=param>nodeKind</code> of one of the four
 literals followed by any number of <a class="objref .shexj internalDFN" href=#dfn-xsfacet data-link-type=dfn id=ref-for-dfn-xsfacet-3>xsFacet</a> and an <a class="objref .shexj internalDFN" href=#dfn-xsfacet data-link-type=dfn id=ref-for-dfn-xsfacet-4>xsFacet</a> is either a <a class="objref .shexj internalDFN" href=#dfn-stringfacet data-link-type=dfn id=ref-for-dfn-stringfacet-2>stringFacet</a> or a <a class="objref .shexj internalDFN" href=#dfn-numericfacet data-link-type=dfn id=ref-for-dfn-numericfacet-2>numericFacet</a>.
 </p>
 <div class=note role=note id=issue-container-generatedID><div role=heading class="note-title marker" id=h-note aria-level=4><span>Note</span></div><p>
 The <a href=https://github.com/shexSpec/shexTest/blob/main/doc/ShExJ.jsg#L11>executable JSON grammar for
 ShExJ</a> specifically disables the requirement for a matching <code>"type"</code> attribute in
 <code>ObjectLiteral</code> as <code>"type"</code> is instead used for the datatype of a <a href=https://www.w3.org/TR/json-ld11/#dfn-typed-value>JSON-LD typed value</a>.
 </p></div>
 </section>
 <section id=shex-references><div class=header-wrapper><h3 id=references>References</h3><a class="self-link sf-hidden" href=#shex-references aria-label="Permalink for this Section"></a></div>
 
 <p>
 <a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-5>ShExJ</a> is a dialect of JSON-LD [<cite><a class=bibref data-link-type=biblio href=#bib-json-ld title="JSON-LD 1.0">JSON-LD</a></cite>] and the member <dfn class=param id=dfn-id tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>id</dfn> is used as a <a data-cite=JSON-LD#node-identifiers href=https://www.w3.org/TR/json-ld/#node-identifiers>node identifier</a>.
 An ShapeDecl or tripleExpr may be represented inline or referenced by its <span class=param>id</span> which
 may be either a <a data-cite=rdf11-concepts#dfn-blank-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node>blank node</a> or an <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a>.
 </p>
 <div class="shexj simupre"><a class="obj internalDFN" href=#dfn-shapeor data-link-type=dfn id=ref-for-dfn-shapeor-3>ShapeOr</a> { <a class="param internalDFN" href=#dfn-id data-link-type=dfn id=ref-for-dfn-id-1>id</a>:<a class="nobjref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-1>shapeExprLabel</a>? <a class="param internalDFN" href=#dfn-shapeexprs data-link-type=dfn id=ref-for-dfn-shapeexprs-1>shapeExprs</a>:[<a class="nobjref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-7>shapeExpr</a>{2,}] }
        <a class="nob internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-2>shapeExprLabel</a> = <a class="nobref internalDFN" href=#dfn-iriref data-link-type=dfn id=ref-for-dfn-iriref-1>IRIREF</a> | <a class="objref internalDFN" href=#dfn-bnode data-link-type=dfn id=ref-for-dfn-bnode-1>BNODE</a> ;
        <a class="obj internalDFN" href=#dfn-eachof data-link-type=dfn id=ref-for-dfn-eachof-1>EachOf</a> { <a class="param internalDFN" href=#dfn-id data-link-type=dfn id=ref-for-dfn-id-2>id</a>:<a class="nobjref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-1>tripleExprLabel</a>? <a class="param internalDFN" href=#dfn-expressions data-link-type=dfn id=ref-for-dfn-expressions-1>expressions</a>:[<a class="nobjref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-1>tripleExpr</a>{2,}] ... }
        <a class="nob internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-2>tripleExprLabel</a> = <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a> | <a href=#dfn-bnode class=internalDFN data-link-type=dfn id=ref-for-dfn-bnode-2>BNODE</a> ;
      </div>
 <p>
 The JSON structure may include references to <a data-lt=shape href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-3>shape expressions</a> and <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-1>triple
 expressions</a>:
 </p>
 <div class="shexj simupre"><a class="obj internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-8>shapeExpr</a> = <a class="objref internalDFN" href=#dfn-shapeor data-link-type=dfn id=ref-for-dfn-shapeor-4>ShapeOr</a> | ... | <a class="nobjref internalDFN" href=#dfn-shapeexprref data-link-type=dfn id=ref-for-dfn-shapeexprref-1>shapeExprRef</a> ;
        <a class="nob internalDFN" href=#dfn-shapeexprref data-link-type=dfn id=ref-for-dfn-shapeexprref-2>shapeExprRef</a> = <a class="nobjref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-3>shapeExprLabel</a> ;
        <a class="nobjref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-2>tripleExpr</a> = <a class="objref internalDFN" href=#dfn-eachof data-link-type=dfn id=ref-for-dfn-eachof-2>EachOf</a> | ... | <a class="nobjref internalDFN" href=#dfn-tripleexprref data-link-type=dfn id=ref-for-dfn-tripleexprref-1>tripleExprRef</a> ;
        <a class="nob internalDFN" href=#dfn-tripleexprref data-link-type=dfn id=ref-for-dfn-tripleexprref-2>tripleExprRef</a> = <a class="objref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-3>tripleExprLabel</a> ;
      </div>
 <p>
 An object with a circular reference must be referenced by an <span class=param>id</span>.
 This example uses a nested shape reference on a value expression (<a data-lt=TripleConstraint href=#dfn-tripleconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleconstraint-1>defined
 below</a>).
 </p>
 <div class=json>
 <pre class="json nohighlight">{ "type": "Schema", "shapes": [
    { "id": "<span class=lookit>http://schema.example/#IssueShape</span>",
      "type": "Shape", "expression": {
        "type": "TripleConstraint", "predicate": "http://schema.example/#related",
        "valueExpr": "<span class=lookit>http://schema.example/#IssueShape</span>", "min": 0 } } ] }</pre>
 </div>
 <p>
 Not captured in this JSON syntax definition is the rule that every <a class="nobjref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-9>shapeExpr</a> nested in a
 schema's <a class="param internalDFN" href=#dfn-shapes data-link-type=dfn id=ref-for-dfn-shapes-3>shapes</a> must have an <span class=param>id</span> and no other <a class="nobjref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-10>shapeExpr</a> may have an <span class=param>id</span>.
 The JSON syntax definitition simplifies this by adding <span style="border:thin solid #888888;background-color:#F8F8F0"><a class="param internalDFN" href=#dfn-id data-link-type=dfn id=ref-for-dfn-id-3>id</a>:<a class="nobjref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-4>shapeExprLabel</a>?</span> to every <a class="nobjref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-11>shapeExpr</a>.
 This example includes a nested shape. Nested shapes are not permitted to have <span class=param>ids</span>.
 </p>
 <div class=json>
 <pre class="json nohighlight">{ "type": "Schema", "shapes": [
    { "id": "http://schema.example/#IssueShape",
      "type": "Shape", "expression": {
        "type": "TripleConstraint", "predicate": "http://schema.example/#submittedBy",
        "valueExpr": {
          "type": "Shape", "expression": {
            "type": "TripleConstraint", "predicate": "http://schema.example/#name",
            "valueExpr": {
              "type": "NodeConstraint", "nodeKind": "literal"
            } } } } } ] }</pre>
 </div>
 </section>
 <section id=style><div class=header-wrapper><h3 id=document-style>Document style</h3><a class="self-link sf-hidden" href=#style aria-label="Permalink for this Section"></a></div>
 
 <p>
 JSON examples are rendered in a <span class=json>.json</span> CSS style.
 Partial examples include ranges in a <span class=comment>.comment</span> CSS style to indicate text which
 would be substituted in a complete example.
 For example <span class=json>{ "type": "ShapeAnd", "shapeExprs": [ <span class=comment>SE<sub>1</sub></span>, <span class=comment>…</span> ] }</span> indicates that both <span class=comment>SE<sub>1</sub></span> and <span class=comment>…</span> would be substituted in a complete
 example.
 </p>
 <p>
 In javascript-enabled browsers, schemas with a <button class=show-repchoice>json</button> button can be
 converted between the JSON representation and the compact syntax by clicking the button.
 The button text indicates the currently shown representation.
 Selecting the example and pressing "j" or "c" converts the example to the JSON (ShExJ) or compact form (ShExC).
 Pressing "shift J" or "shift C" converts all such examples to ShExJ or ShExC.
 </p>
 
 </section>
 <section id=graphAccess><div class=header-wrapper><h3 id=graph-access>Graph access</h3><a class="self-link sf-hidden" href=#graphAccess aria-label="Permalink for this Section"></a></div>
 
 <p>
 The validation process defined in this document relies on matching <a data-cite=sparql11-query#defn_TriplePattern data-link-type=dfn href=https://www.w3.org/TR/sparql11-query/#defn_TriplePattern>triple patterns</a> in the form
 <code>(subject, predicate, object)</code> where each position may be supplied by a constant, a previously
 defined term, or the underscore "<code>_</code>", which represents a previously undefined element or wildcard.
 This corresponds to a <dfn data-cite=sparql11-query#defn_TriplePattern data-lt="triple pattern|triple patterns" id=dfn-triple-pattern class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/sparql11-query/#defn_TriplePattern data-cite=sparql11-query data-cite-path data-cite-frag=#defn_TriplePattern>SPARQL Triple Pattern</a></dfn> where each "_" is replaced by a unique
 <a data-cite=rdf11-concepts#dfn-blank-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node>blank node</a>.
 Matching such a <a data-cite=sparql11-query#defn_TriplePattern data-link-type=dfn href=https://www.w3.org/TR/sparql11-query/#defn_TriplePattern>triple pattern</a> against a <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>graph</a> is defined by <a data-cite=sparql11-query#BGPsparql href=https://www.w3.org/TR/sparql11-query/#BGPsparql>SPARQL Basic Graph Pattern Matching</a> (BGP) with a BGP containing only
 that <a data-cite=sparql11-query#defn_TriplePattern data-link-type=dfn href=https://www.w3.org/TR/sparql11-query/#defn_TriplePattern>triple pattern</a>.
 </p>
 </section>
 
 <section id=namespaces><div class=header-wrapper><h3 id=namespaces-0>Namespaces</h3><a class="self-link sf-hidden" href=#namespaces aria-label="Permalink for this Section"></a></div>
 
 <p>This specification makes use of the following namespaces:</p>
 <dl>
 <dt><code>foaf</code>:</dt>
 <dd><code>http://xmlns.com/foaf/0.1/</code></dd>
 <dt><code>rdf</code>:</dt>
 <dd><code>http://www.w3.org/1999/02/22-rdf-syntax-ns#</code></dd>
 <dt><code>rdfs</code>:</dt>
 <dd><code>http://www.w3.org/2000/01/rdf-schema#</code></dd>
 <dt><code>shex</code>:</dt>
 <dd><code>http://www.w3.org/ns/shex#</code></dd>
 <dt><code>xsd</code>:</dt>
 <dd><code>http://www.w3.org/2001/XMLSchema#</code></dd>
 </dl>
 </section>
 
 
 
 
 
 
 
 
 </section>
 <section id=shapes-language><div class=header-wrapper><h2 id=the-shape-expressions-language>The Shape Expressions Language</h2><a class="self-link sf-hidden" href=#shapes-language aria-label="Permalink for this Section"></a></div>
 
 <p>
 A Shape Expressions (ShEx) schema is a collection of labeled <a data-lt=shape href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-4>Shapes</a> and <a href=#node-constraints>Node Constraints</a>.
 These can be used to describe or test nodes in <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>RDF graphs</a>.
 ShEx does not prescribe a language for associating <a data-cite=rdf11-concepts#dfn-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-node>nodes</a> with <a data-lt=shape href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-5>shapes</a> but several
 approaches are <a href=file:///C:/src/shexSpec/primer/index.html#associating-nodes-with-shapes>described in the ShEx Primer</a>.
 </p>
 <section id=shapes-schema><div class=header-wrapper><h3 id=shapes-schema-0>Shapes Schema</h3><a class="self-link sf-hidden" href=#shapes-schema aria-label="Permalink for this Section"></a></div>
 
 <p>
 A shapes schema is captured in a <span class=jobjref><dfn data-lt="shapes schema|Schema" id=dfn-shapes-schema tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>Schema</dfn></span> object
 with a list of <span class=jobjref><dfn data-lt="ShapeDecl|Shape Declarationss" data-plurals=shapedecls id=dfn-shapedecl tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>Shape Declarationss</dfn></span>:
 </p>
 <div class=shexjTable>
 <table class=shexj>
 <tbody><tr class=obj>
 <th class=obj><a href=#dfn-shapes-schema class=internalDFN data-link-type=dfn id=ref-for-dfn-shapes-schema-2>Schema</a></th>
 <td>{</td>
 <td><dfn class=param id=dfn-imports tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>imports</dfn>:[<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-2>IRIREF</a>+]? <dfn class=param id=dfn-startacts tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>startActs</dfn>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-3>SemAct</a>+]? <dfn class=param id=dfn-start tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>start</dfn>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-12>shapeExpr</a>? <dfn class=param id=dfn-shapes tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>shapes</dfn>:[<a class="objref internalDFN" href=#dfn-shapedecl data-link-type=dfn id=ref-for-dfn-shapedecl-1>ShapeDecl</a>+]? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-shapedecl class=internalDFN data-link-type=dfn id=ref-for-dfn-shapedecl-2>ShapeDecl</a></th>
 <td>{</td>
 <td> <span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-5>shapeExprLabel</a> <span class=param>abstract</span>:<a class="nobref internalDFN" href=#dfn-bool data-link-type=dfn id=ref-for-dfn-bool-1>BOOL</a>? <span class=param>shapeExpr</span>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-13>shapeExpr</a> | <a class="objref internalDFN" href=#dfn-shapeexternal data-link-type=dfn id=ref-for-dfn-shapeexternal-2>ShapeExternal</a> }</td>
 </tr>
 </table>
 </div>
 <p>
 where <a class="param internalDFN" href=#dfn-shapes data-link-type=dfn id=ref-for-dfn-shapes-4>shapes</a> is a list of <a href=#dfn-shapedecl class=internalDFN data-link-type=dfn id=ref-for-dfn-shapedecl-3>ShapeDecls</a>.
 </p>
 <div class="repchoice incomplete" tabindex=0 style="border:thick solid red">
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#IssueShape", <span class=comment>…</span> },
  { "id": "_:UserShape", <span class=comment>…</span> },
  { "id": "http://schema.example/#EmployeeShape", <span class=comment>…</span> } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                        &nbsp;
ex:IssueShape { … }
_:UserShape { … }
ex:EmployeeShape { … }</pre>
 <button title="-29, 0">json</button></div>
 </section>
 <section id=validation><div class=header-wrapper><h3 id=validation-definition>Validation Definition</h3><a class="self-link sf-hidden" href=#validation aria-label="Permalink for this Section"></a></div>
 
 <p>
 For a graph <span class=math>G</span>, a schema <span class=math>Sch</span> and a fixed ShapeMap <span class=math>ism</span>, <code class=function><dfn id=dfn-isvalid tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>isValid</dfn>(<span class=math>G</span>, <span class=math>Sch</span>, <span class=math>ism</span>)</code>
 indicates that for every shape association <span class=math>(<span class=param>node</span>: n, <span class=param>shape</span>: sl, <span class=param>exact</span>: exact)</span> in <span class=math>ism</span>, the node <span class=math>n</span> satisfies the shape expression identified by
 <span class=math>sl</span>.
 If <span class=param>exact</span> is true, the result is
 <code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-1>satisfies</a>(<span class=math>n</span>, <a href=#dfn-def class=internalDFN data-link-type=dfn id=ref-for-dfn-def-1>def</a>(<span class=math>s.label</span>), <span class=math>G</span>, <span class=math>Sch</span>, <a href=#dfn-completetyping class=internalDFN data-link-type=dfn id=ref-for-dfn-completetyping-1><code>completeTyping</code></a>(<span class=math>G</span>, <span class=math>Sch</span>), <span class=math>neigh(n)</span>)</code>
 , otherwise, the result is
 <code class=function><a href=#dfn-satisfiesdescendant class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfiesdescendant-1>satisfiesDescendant</a>(<span class=math>n</span>, <a href=#dfn-def class=internalDFN data-link-type=dfn id=ref-for-dfn-def-2>def</a>(<span class=math>s.label</span>), <span class=math>G</span>, <span class=math>Sch</span>, <a href=#dfn-completetyping class=internalDFN data-link-type=dfn id=ref-for-dfn-completetyping-2><code>completeTyping</code></a>(<span class=math>G</span>, <span class=math>Sch</span>)</code>,
 <span class=math>neigh(n)</span>).
 The function <code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-2>satisfies</a></code> is defined for every kind of <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-1>shape
 expression</a>.
 </p>
 <p>
 The validation of an RDF graph <span class=math>G</span> against a ShEx schema <span class=math>Sch</span>
 is based on the existence of <code class=function><a href=#dfn-completetyping class=internalDFN data-link-type=dfn id=ref-for-dfn-completetyping-3><code>completeTyping</code></a>(<span class=math>G</span>, <span class=math>Sch</span>)</code>.
 For an RDF graph <span class=math>G</span> and a shapes schema <span class=math>Sch</span>, a
 <dfn id=dfn-typing tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>typing</dfn> is a set of pairs of the form <span class=math>(n, l)</span> where <span class=math>n</span> is a node in <span class=math>G</span> and <span class=math>l</span> is a shape
 label that appears in the shape declarations of the schema.
 A <dfn label="correct typing" id=dfn-correct-typing tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>correct typing</dfn> is a <span class=math>typing</span> such that for every RDF
 node/shape pair <span class=math>(n,l)</span>, satisfies(n, def(l), G, Sch, typing, neigh(n)) holds or
 satisfiesDescendant(n, def(l), G, Sch, typing, neigh(n)) holds.
 A <code class=function><a href=#dfn-completetyping class=internalDFN data-link-type=dfn id=ref-for-dfn-completetyping-4><code>completeTyping</code></a>(<span class=math>G</span>, <span class=math>Sch</span>)</code> is a
 unique correct typing that exists for every graph and every ShEx schema that satisfies the <a href=#schema-requirements>schema requirements</a>.
 </p>
 <p>
 The definition of <code class=function><dfn id=dfn-completetyping tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>completeTyping</dfn>(<span class=math>G</span>, <span class=math>Sch</span>)</code>
 is based on a <a href=#dfn-stratification class=internalDFN data-link-type=dfn id=ref-for-dfn-stratification-1>stratification</a> of <span class=math>Sch</span>.
 The number of <dfn id=dfn-strata tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>strata</dfn> of <span class=math>Sch</span> is the number of maximal strongly connected
 components of the <a href=#dfn-hierarchy-and-dependency-graph class=internalDFN data-link-type=dfn id=ref-for-dfn-hierarchy-and-dependency-graph-1>hierarchy and dependency graph</a> of <span class=math>Sch</span>.
 A <dfn id=dfn-stratification tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>stratification</dfn> of a schema <span class=math>Sch</span> with <span class=math>k</span> strata is
 a function <code class=function>stratum</code> that associates with every shape label from the shape
 declarations of <span class=math>Sch</span> a natural number between <span class=math>1</span> and <span class=math>k</span> such that:
 </p>
 <ul>
 <li>
 If <span class=math>l1</span> and <span class=math>l2</span> belong to the same maximal strongly connected
 component, then <code class=function>stratum(<span class=math>l1</span>)</code> = <code class=function>stratum(<span class=math>l2</span>)</code>.
 </li>
 <li>
 If there is a <a class=respec-offending-element title="Linking error: not matching `<dfn>`" id=respec-offender-linking-error-not-matching-dfn>reference</a> from <span class=math>l1</span> to <span class=math>l2</span> and <span class=math>l1</span> and <span class=math>l2</span> do not belong to the same maximal strongly connected
 component, then <code class=function>stratum(<span class=math>s2</span>)</code> &lt; <code class=function>stratum(<span class=math>s1</span>)</code>.
 </li>
 </ul>
 <p>
 The existence of a stratification for every schema is guaranteed by the <a href=#negation-requirement>negation
 requirement</a>.
 </p>
 <p>
 Given a <a href=#dfn-stratification class=internalDFN data-link-type=dfn id=ref-for-dfn-stratification-2>stratification</a> <code class=function>stratum</code> of <span class=math>Sch</span> with <span class=math>k</span> strata, define inductively the series of <span class=math>k</span> typings <code class=function>completeTypingOn(<span class=math>1</span>, <span class=math>G</span>, <span class=math>Sch</span>)</code>
 … <code class=function>completeTypingOn(<span class=math>k</span>, <span class=math>G</span>, <span class=math>Sch</span>)</code>.
 </p>
 <ul>
 <li>
 <code class=function>completeTypingOn(<span class=math>1</span>, <span class=math>G</span>, <span class=math>Sch</span>)</code>
 is the union of all correct typings that contain only RDF node/shape pairs <span class=math>(n,s)</span>
 with <code class=function>stratum(<span class=math>s</span>)</code> = <span class=math>1</span>;
 </li>
 <li>
 for every <span class=math>i</span> between <span class=math>2</span> and <span class=math>k</span>,
 <code class=function>completeTypingOn(<span class=math>i</span>, <span class=math>G</span>, <span class=math>Sch</span>)</code>
 is the union of all correct typings that:
 <ul>
 <li> contain only RDF node/shape pairs <span class=math>(n,s)</span> with <code class=function>stratum(<span class=math>s</span>)</code> ≤ <span class=math>i</span>
 </li>
 <li> are equal to <code class=function>completeTypingOn(<span class=math>i</span>-1, <span class=math>G</span>, <span class=math>Sch</span>)</code>
 when restricted to their RDF node/shape pairs <span class=math>(n1,s1)</span> for which <code class=function>stratum(<span class=math>s1</span>)</code> &lt; i.
 </li>
 </ul>
 </li>
 </ul>
 <p>
 Then <code class=function>completeTyping(<span class=math>G</span>, <span class=math>Sch</span>)</code> =
 <code class=function>completeTypingOn(<span class=math>k</span>, <span class=math>G</span>, <span class=math>Sch</span>)</code>.
 </p>
 <div class=note role=note id=issue-container-generatedID-0><div role=heading class="note-title marker" id=h-note-0 aria-level=4><span>Note</span></div><div>
 The definition of strongly connected component and maximal strongly connected component of a graph can be found
 at Wikipedia: <a href=https://en.wikipedia.org/wiki/Strongly_connected_component>https://en.wikipedia.org/wiki/Strongly_connected_component</a>.
 </div></div>
 <div class=note role=note id=issue-container-generatedID-1><div role=heading class="note-title marker" id=h-note-1 aria-level=4><span>Note</span></div><div>
 <p>
 The schema <span class=math>Sch</span> might have several different stratifications but <code class=function>completeTyping(<span class=math>G</span>, <span class=math>Sch</span>)</code> is the
 same for all these stratifications.
 This property is reminiscent of the use of stratified negation in Datalog.
 </p>
 <p>
 In order to decide <code class=function><a href=#dfn-isvalid class=internalDFN data-link-type=dfn id=ref-for-dfn-isvalid-1><code>isValid</code></a>(<span class=math>Sch</span>, <span class=math>G</span>, <span class=math>m</span>)</code>,
 it is sufficient to compute only a portion of the complete typing using an appropriate algorithm.
 </p>
 </div></div>
 <div class=note role=note id=issue-container-generatedID-2><div role=heading class="note-title marker" id=h-note-2 aria-level=4><span>Note</span></div><div>
 <p>
 Popular methods for constructing the input fixed ShapeMaps can be found at <a href=https://www.w3.org/2001/sw/wiki/ShEx/ShapeMap>https://www.w3.org/2001/sw/wiki/ShEx/ShapeMap</a>.
 </p>
 </div></div>
 
 </section>
 <section id=shape-expressions><div class=header-wrapper><h3 id=shape-expressions-0>Shape Expressions</h3><a class="self-link sf-hidden" href=#shape-expressions aria-label="Permalink for this Section"></a></div>
 
 <p>
 A <dfn data-lt="shape expressions|shape expression" id=dfn-shape-expressions tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>shape expression</dfn> is composed of four kinds of objects combined with the
 algebraic operators <code>And</code>, <code>Or</code> and <code>Not</code>:
 </p>
 <ul>
 <li>
 A node constraint (<span class=jobjref><a href=#dfn-nodeconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-nodeconstraint-3>NodeConstraint</a></span>) defines the set of allowed values of a
 node.
 These include specification of RDF node kind, literal datatype, XML string and numeric facets and enumeration
 of value sets.
 </li>
 <li>
 A shape constraint (<span class=jobjref><a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-6>Shape</a></span>) defines a constraint on the allowed
 neighbourhood of a node, that is, the allowed triples that contain this node as subject or object.
 </li>
 <li>
 An external shape (<span class=jobjref><a href=#dfn-shapeexternal class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexternal-3>ShapeExternal</a></span>) is an extension mechanism allowing a
 <span class=jobjref><a href=#dfn-shapedecl class=internalDFN data-link-type=dfn id=ref-for-dfn-shapedecl-4>ShapeDecl</a></span> to denote an externally defined <span class=jobjref><a href=#dfn-shapeexpr class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexpr-14>shapeExpr</a></span>. <span class=note>It can be used to reference e.g. functional
 shapes or prohibitively large value sets.</span>
 </li>
 <li>
 A shape reference (<span class=jobjref><a href=#dfn-shapeexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprlabel-6>shapeExprLabel</a></span>) identifies another shape in the schema
 or an <a href=#import>imported schema</a>.
 </li>
 </ul>
 <section id=shape-expressions-shexj><div class=header-wrapper><h4 id=json-syntax>JSON Syntax</h4><a class="self-link sf-hidden" href=#shape-expressions-shexj aria-label="Permalink for this Section"></a></div>
 
 <div class=shexjTable>
 <table class=shexj>
 <tbody><tr class=nob>
 <th class=nob><dfn id=dfn-shapeexpr tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>shapeExpr</dfn></th>
 <td>=</td>
 <td><a class="objref internalDFN" href=#dfn-shapeor data-link-type=dfn id=ref-for-dfn-shapeor-5>ShapeOr</a> | <a class="objref internalDFN" href=#dfn-shapeand data-link-type=dfn id=ref-for-dfn-shapeand-3>ShapeAnd</a> | <a class="objref internalDFN" href=#dfn-shapenot data-link-type=dfn id=ref-for-dfn-shapenot-2>ShapeNot</a> | <a class="objref internalDFN" href=#dfn-nodeconstraint data-link-type=dfn id=ref-for-dfn-nodeconstraint-4>NodeConstraint</a> | <a class="objref internalDFN" href=#dfn-shape data-link-type=dfn id=ref-for-dfn-shape-7>Shape</a> | <a class="objref internalDFN" href=#dfn-shapeexprref data-link-type=dfn id=ref-for-dfn-shapeexprref-3>shapeExprRef</a> ;
 </td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-shapeor tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>ShapeOr</dfn></th>
 <td>{</td>
 <td><dfn class=param id=dfn-shapeexprs tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>shapeExprs</dfn>:[<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-15>shapeExpr</a>{2,}] }</td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-shapeand tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>ShapeAnd</dfn></th>
 <td>{</td>
 <td><span class=param>shapeExprs</span>:[<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-16>shapeExpr</a>{2,}] }</td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-shapenot tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>ShapeNot</dfn></th>
 <td>{</td>
 <td><span class=param>shapeExpr</span>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-17>shapeExpr</a> }</td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-shapeexternal tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>ShapeExternal</dfn></th>
 <td>{</td>
 <td>}</td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn data-plurals=shapeexprrefs id=dfn-shapeexprref tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>ShapeExprRef</dfn></th>
 <td>{</td>
 <td><span class=param>label</span>:<span class=nobref>shapeExprLabel <span class=param>exact</span>:<a href=#dfn-bool class=internalDFN data-link-type=dfn id=ref-for-dfn-bool-2>BOOL</a>? }</span></td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn data-plurals=shapeexprlabels id=dfn-shapeexprlabel tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>shapeExprLabel</dfn></th>
 <td>=</td>
 <td><a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-3>IRIREF</a> | <a href=#dfn-bnode class=internalDFN data-link-type=dfn id=ref-for-dfn-bnode-3>BNODE</a> ;</td>
 </tr>
 </table>
 </div>
 <div class=example>
 <p>
 Examples of shape expressions:
 </p>
 <div class="repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Shape", <span class=comment>…</span> }   &nbsp;</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">{  }                    &nbsp;</pre>
 <button>json</button></div>
 <div style=clear:both>&nbsp;</div>
 <div class="repchoice incomplete" tabindex=0 style="border:thick solid red">
 <pre class="json nohighlight repchosen">{ "type": "ShapeAnd", "shapeExprs": [
  { "type": "NodeConstraint", "nodeKind": "iri" },
  { "type": "ShapeOr", "shapeExprs": [
    "http://schema.example/#IssueShape",
    { "type": "ShapeNot", "shapeExpr": { "type": "Shape", <span class=comment>…</span> } }
    ] } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                              &nbsp;
 AND
(
  @&lt;http://schema.example/#IssueShape&gt;
  OR NOT {  }
)</pre>
 <button title="-15, 0">json</button></div>
 <p>
 In this ShapeOr's <span class=param>shapeExprs</span>, "http://schema.example/#IssueShape" is a reference
 to the <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-2>shape expression</a> with the id "http://schema.example/#IssueShape".
 </p>
 </div>
 </section>
 <section id=shape-expression-semantics><div class=header-wrapper><h4 id=semantics>Semantics</h4><a class="self-link sf-hidden" href=#shape-expression-semantics aria-label="Permalink for this Section"></a></div>
 
 <p>
 For a node n of the graph G, we define <dfn class=respec-offending-element title="This is defined more than once in the document." id=respec-offender-this-is-defined-more-than-once-in-the-document tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>neigh</dfn>(n) as the set of triples adjacent to n in the graph;
 these are the triples that have n either as subject or as object.
 </p>
 <p>
 For a shape expression <span class=var>se</span> we define its set of shapes <dfn id=dfn-nestedshapes tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>nestedShapes</dfn><span class=math>(<span class=param>se</span>)</span> recursively on the structure of <span class=var>se</span>:
 </p>
 <ul>
 <li>if <span class=var>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-nodeconstraint data-link-type=dfn id=ref-for-dfn-nodeconstraint-5>NodeConstraint</a></span>, then
 <span class=math><a href=#dfn-nestedshapes class=internalDFN data-link-type=dfn id=ref-for-dfn-nestedshapes-1>nestedShapes</a>(<span class=var>se</span>) = emptyset</span>
 </li>
 <li>if <span class=var>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-shape data-link-type=dfn id=ref-for-dfn-shape-8>Shape</a></span>, then <span class=math><a href=#dfn-nestedshapes class=internalDFN data-link-type=dfn id=ref-for-dfn-nestedshapes-2>nestedShapes</a>(<span class=var>se</span>) = {se}</span></li>
 <li>if <span class=var>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-shapenot data-link-type=dfn id=ref-for-dfn-shapenot-3>ShapeNot</a></span>, then <span class=math><a href=#dfn-nestedshapes class=internalDFN data-link-type=dfn id=ref-for-dfn-nestedshapes-3>nestedShapes</a>(<span class=var>se</span>) = shapes(se.shapeExpr)</span></li>
 <li>if <span class=var>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-shapeand data-link-type=dfn id=ref-for-dfn-shapeand-4>ShapeAnd</a></span> or <span class=jobjref><a class="obj internalDFN" href=#dfn-shapeor data-link-type=dfn id=ref-for-dfn-shapeor-6>ShapeOr</a></span>, then <span class=math><a href=#dfn-nestedshapes class=internalDFN data-link-type=dfn id=ref-for-dfn-nestedshapes-4>nestedShapes</a>(<span class=var>se</span>)</span> is the union of the sets <span class=math><a href=#dfn-nestedshapes class=internalDFN data-link-type=dfn id=ref-for-dfn-nestedshapes-5>nestedShapes</a>(<span class=var>se2</span>)</span> for all <span class=var>se2</span> in <span class=param>se.shapeExprs</span></li>
 <li>if <span class=var>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-shapeexprref data-link-type=dfn id=ref-for-dfn-shapeexprref-4>shapeExprRef</a></span> with
 label <span class=var>lab</span>, then <span class=math><a href=#dfn-nestedshapes class=internalDFN data-link-type=dfn id=ref-for-dfn-nestedshapes-6>nestedShapes</a>(<span class=var>se</span>)
 = <a href=#dfn-nestedshapes class=internalDFN data-link-type=dfn id=ref-for-dfn-nestedshapes-7>nestedShapes</a>(<a href=#dfn-def class=internalDFN data-link-type=dfn id=ref-for-dfn-def-3>def</a>(<span class=var>L</span>))</span></li>
 <li>if <span class=var>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-shapeexternal data-link-type=dfn id=ref-for-dfn-shapeexternal-4>ShapeExternal</a></span>, then
 <span class=math><a href=#dfn-nestedshapes class=internalDFN data-link-type=dfn id=ref-for-dfn-nestedshapes-8>nestedShapes</a>(<span class=var>se</span>)</span> is the set of shapes denoted by
 <span class=var>se</span>.
 </li>
 </ul>
 <p>
 For shape expression labels <span class=var>label1</span>, <span class=var>label2</span>, we say that
 <span class=var>label2</span> <dfn id=dfn-directly-extends tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>directly extends</dfn> <span class=var>label1</span> if <span class=math><a href=#dfn-nestedshapes class=internalDFN data-link-type=dfn id=ref-for-dfn-nestedshapes-9>nestedShapes</a>(<a href=#dfn-def class=internalDFN data-link-type=dfn id=ref-for-dfn-def-4>def</a>(<span class=var>label2</span>))<span class=math> contains a
 Shape <span class=var>s</span> such that <span class=param>s.extends</span> contains <span class=var>label2</span>.
 The <dfn id=dfn-extension-hierarchy-graph tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>extension hierarchy graph</dfn> of a shapes schema is a directed graph whose nodes are the shape
 expression labels of the schema and that has an edge from <span class=var>label2</span> to <span class=var>label1</span> whenever <span class=var>label2</span> <a href=#dfn-directly-extends class=internalDFN data-link-type=dfn id=ref-for-dfn-directly-extends-1>directly extends</a> <span class=var>label1</span>.
 </span></span></p>
 <p>
 <dfn id=dfn-satisfies tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>satisfies</dfn>: The expression <code class=function>satisfies(<span class=math>n</span>, <span class=math>se</span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>t</span>, <span class=math>R</span>)</code>
 indicates that a node <span class=math>n</span>, a subset <span class=math>R</span> of <span class=math>neigh(n)</span>, and a <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>graph</a> <span class=math>G</span> satisfy a <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-3>shape
 expression</a> <span class=math>se</span> with <a href=#dfn-typing class=internalDFN data-link-type=dfn id=ref-for-dfn-typing-1>typing</a> <span class=math>t</span> for schema <span class=math>Sch</span>.<br>
 <dfn id=dfn-satisfiesdescendant tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>satisfiesDescendant</dfn>: The expression <code class=function>satisfiesDescendant(<span class=math>n</span>, <span class=var>shapeExprLabel</span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>t</span>, <span class=math>R</span>)</code>
 indicates that <span class=math>n</span>, a subset <span class=math>R</span> of <span class=math>neigh(n)</span>, and <span class=math>G</span> and some non-abstract <span class=var>child</span> of <span class=var>shapeExprLabel</span> in the <a href=#dfn-extension-hierarchy-graph class=internalDFN data-link-type=dfn id=ref-for-dfn-extension-hierarchy-graph-1>extension hierarchy graph</a>
 <code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-3>satisfies</a>(<span class=math>n</span>, <span class=var>child</span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>t</span>, <span class=math>R</span>)</code>,
 with the given <a href=#dfn-typing class=internalDFN data-link-type=dfn id=ref-for-dfn-typing-2>typing</a> <span class=math>t</span>.
 </p>
 <p>
 <code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-4>satisfies</a>(<span class=math>n</span>, <span class=math>se</span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>t</span>, <span class=math>R</span>)</code>
 is true if and only if:
 </p>
 <ul>
 <li id=satisfies-NodeConstraint><span class=math>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-nodeconstraint data-link-type=dfn id=ref-for-dfn-nodeconstraint-6>NodeConstraint</a></span> and <code class=function><a href=#satisfies2-NodeConstraint>satisfies2</a>(<span class=math>n</span>, <span class=math>se</span>)</code>
 as described below in <a href=#node-constraints>Node Constraints</a>.
 Note that testing if a node satisfies a node constraint does not require a <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>graph</a> or <a href=#dfn-typing class=internalDFN data-link-type=dfn id=ref-for-dfn-typing-3>typing</a>.
 </li>
 <li id=satisfies-Shape-proxy><span class=math>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-shape data-link-type=dfn id=ref-for-dfn-shape-9>Shape</a></span> and <code class=function><a href=#dfn-matchesshape class=internalDFN data-link-type=dfn id=ref-for-dfn-matchesshape-1><code>matchesShape</code></a>(<span class=math>n</span>, <span class=math>S</span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>m</span>, <span class=math>R</span>)</code>
 is true.
 </li>
 <li id=satisfies-ShapeOr><span class=math>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-shapeor data-link-type=dfn id=ref-for-dfn-shapeor-7>ShapeOr</a></span> and there is some <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-4>shape expression</a> <span class=math>se2</span>
 in <span class=math>se</span>.<span class=param>shapeExprs</span> such that <code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-5>satisfies</a>(<span class=math>n</span>, <span class=math>se2</span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>t</span>, <span class=math>R</span>)</code>.
 </li>
 <li id=satisfies-ShapeAnd><span class=math>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-shapeand data-link-type=dfn id=ref-for-dfn-shapeand-5>ShapeAnd</a></span> and for every <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-5>shape expression</a> <span class=math>se2</span> in
 <span class=math>se</span>.<span class=param>shapeExprs</span>, <code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-6>satisfies</a>(<span class=math>n</span>, <span class=math>se2</span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>t</span>, <span class=math>R</span>)</code>.
 </li>
 <li id=satisfies-ShapeNot><span class=math>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-shapenot data-link-type=dfn id=ref-for-dfn-shapenot-4>ShapeNot</a></span> and for the <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-6>shape expression</a> <span class=math>se2</span> at
 <span class=math>se</span>.<span class=param>shapeExpr</span>, <code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-7>satisfies</a>(<span class=math>n</span>, <span class=math>se2</span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>t</span>, <span class=math>R</span>)</code>
 is false.
 </li>
 <li id=satisfies-ShapeExternal><span class=math>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-shapeexternal data-link-type=dfn id=ref-for-dfn-shapeexternal-5>ShapeExternal</a></span> and implementation-specific mechansims not defined in this
 specification indicate success.</li>
 <li id=satisfies-shapeExprRef><span class=math>se</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-shapeexprref data-link-type=dfn id=ref-for-dfn-shapeexprref-5>ShapeExprRef</a></span>. If <span class=param>ShapeExprRef.exact</span>, <code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-8>satisfies</a>(<span class=math>n</span>, <a href=#dfn-def class=internalDFN data-link-type=dfn id=ref-for-dfn-def-5>def</a>(<span class=math>se.label</span>), <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>t</span>, <span class=math>R</span>)</code>,
 otherwise <code class=function><a href=#dfn-satisfiesdescendant class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfiesdescendant-2>satisfiesDescendant</a>(<span class=math>n</span>, <span class=math>se.label</span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>t</span>, <span class=math>R</span>)</code>.
 </li>
 </ul>
 <div class=example>
 <p>
 Given the three shape expressions <span class=math>SE<sub>1</sub></span>, <span class=math>SE<sub>2</sub></span>, <span class=math>SE<sub>3</sub></span> in a <span class=jobjref><a class="obj internalDFN" href=#dfn-shapes-schema data-link-type=dfn id=ref-for-dfn-shapes-schema-3>Schema</a></span> <span class=math>Sch</span>, such that:
 </p>
 <ul>
 <li><code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-9>satisfies</a>(<span class=math>n</span>, <span class=math>SE<sub>1</sub></span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>m</span>)</code>
 </li>
 <li><code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-10>satisfies</a>(<span class=math>n</span>, <span class=math>SE<sub>2</sub></span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>m</span>)</code>
 </li>
 <li>NOT <code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-11>satisfies</a>(<span class=math>n</span>, <span class=math>SE<sub>3</sub></span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>m</span>)</code>
 </li>
 </ul>
 <p>
 the following hold:
 </p>
 <ul class=codelist>
 <li>
 <div>
 <div style=float:left class="code function">satisfies(</div>
 <div style=float:left class=code><span class=math>n</span>,<br>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs css">{ "type": <span class=hljs-string>"ShapeAnd"</span>, <span class=hljs-string>"shapeExprs"</span>: [ SE1, SE2 ] }</code></pre>
 </div>,<br> <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>m</span>)
 </div>
 <div style=clear:both></div>
 </div>
 </li>
 <li>
 <div>
 <div style=float:left class="code function">satisfies(</div>
 <div style=float:left class=code><span class=math>n</span>,<br>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs css">{ "type": <span class=hljs-string>"ShapeOr"</span>, <span class=hljs-string>"shapeExprs"</span>: [ SE1, SE2, SE3 ] }</code></pre>
 </div>,<br> <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>m</span>)
 </div>
 <div style=clear:both></div>
 </div>
 </li>
 <li>
 <div>NOT &nbsp;<div style=float:left class="code function">satisfies(</div>
 <div style=float:left class=code><span class=math>n</span>,<br>
 <div class="inline json code">
 <pre aria-busy=false><code class="hljs css">{ "type": <span class=hljs-string>"ShapeNot"</span>, <span class=hljs-string>"shapeExpr"</span>: {
    { "type": <span class=hljs-string>"ShapeOr"</span>, <span class=hljs-string>"shapeExprs"</span>: [
        SE1,
        { "type": <span class=hljs-string>"ShapeAnd"</span>, <span class=hljs-string>"shapeExprs"</span>: [ SE2, SE3 ] }
      ] }
  } }</code></pre>
 </div>,<br> <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>m</span>)
 </div>
 <div style=clear:both></div>
 </div>
 </li>
 </ul>
 <p>
 If <span class=math>Sch</span>'s <a class="param internalDFN" href=#dfn-shapes data-link-type=dfn id=ref-for-dfn-shapes-5>shapes</a> maps
 "<code>http://schema.example/#shape1</code>" to <span class=math>SE<sub>1</sub></span> then the following
 holds:
 </p>
 <ul class=codelist>
 <li>
 <div>
 <div style=float:left class="code function">satisfies(</div>
 <div style=float:left class=code><span class=math>n</span>,<br>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs javascript"><span class=hljs-attr>http</span>:<span class=hljs-comment>//schema.example/#shape1"</span></code></pre>
 </div>,<br> <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>m</span>)
 </div>
 <div style=clear:both></div>
 </div>
 </li>
 </ul>
 </div>
 <div class=example>
 <p>
 In this example, EmployeeShape <a href=#dfn-directly-extends class=internalDFN data-link-type=dfn id=ref-for-dfn-directly-extends-2>directly extends</a> PersonShape and transitively extends EntityShape
 </p>
 <div class=repchoice tabindex=0 style="border:thick solid red">
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [ {
    "id" : "http://schema.example/#EntityShape",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#entityId"
    }
  },  {
    "id" : "http://schema.example/#PersonShape",
    "type" : "Shape",
    "extends" : [ "http://schema.example/#EntityShape" ],
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://xmlns.com/foaf/0.1/name"
    }
  }, {
    "id" : "http://schema.example/#EmployeeShape",
    "type" : "Shape",
    "extends" : [ "http://schema.example/#PersonShape" ],
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#employeeNumber"
    }
  } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                           &nbsp;

    ex:EntityShape {



      ex:entityId .
    }

    ex:PersonShape EXTENDS @ex:EntityShape {




      foaf:name .
    }

    ex:EmployeeShape EXTENDS @ex:PersonShape {




      ex:employeeNumber .
    }
&nbsp;</pre>
 <button title="-7, 0">json</button></div>
 </div>
 <div class=example>
 <p>
 In this example, UserShape <a href=#dfn-directly-extends class=internalDFN data-link-type=dfn id=ref-for-dfn-directly-extends-3>directly extends</a> PersonShape, and PersonShape directly references a
 conjunct which <a href=#dfn-directly-extends class=internalDFN data-link-type=dfn id=ref-for-dfn-directly-extends-4>directly extends</a> EntityShape. Through this, UserShape transitively extends
 EntityShape.
 </p>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema",
  "shapes": [
    { "id": "http://schema.example/#EntityShape",
      "type": "Shape",
      "closed": true,
      "expression": {
        "type": "TripleConstraint",
        "predicate": "http://schema.example/#entityId"
    } },
    { "id": "http://schema.example/#PersonShape",
      "type": "ShapeAnd",
      "shapeExprs": [
        { "type": "Shape",
          "extends": [ "http://schema.example/#EntityShape" ],
          "closed": true,
          "expression": {
            "type": "TripleConstraint",
            "predicate": "http://xmlns.com/foaf/0.1/name"
        } },
        { "type": "Shape",
          "expression": {
            "type": "TripleConstraint",
            "predicate": "http://schema.example/#entityId",
            "valueExpr": {
              "type": "NodeConstraint",
              "datatype": "http://www.w3.org/2001/XMLSchema#integer"
        } } }
    ] },
    { "id": "http://schema.example/#UserShape",
      "type": "Shape",
      "extends": [ "http://schema.example/#PersonShape" ],
      "expression": {
        "type": "TripleConstraint",
        "predicate": "http://schema.example/#userId"
    } }
] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                   &nbsp;

    &lt;#EntityShape&gt; CLOSED {




        :entityId .
    }
    &lt;#PersonShape&gt; EXTENDS @&lt;#EntityShape&gt; CLOSED {



          



            foaf:name .
        } AND {



            :entityId


              xsd:integer
        }

    &lt;#UserShape&gt; EXTENDS @&lt;PersonShape&gt;{

      


        :userId .
    }
&nbsp;</pre>
 <button>json</button></div>
 </div>
 </section>
 </section>
 <section id=node-constraints><div class=header-wrapper><h3 id=node-constraints-0>Node Constraints</h3><a class="self-link sf-hidden" href=#node-constraints aria-label="Permalink for this Section"></a></div>
 
 <div class=shexjTable>
 <table class=shexj>
 <tbody><tr class=obj>
 <th class=obj><dfn id=dfn-nodeconstraint tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>NodeConstraint</dfn></th>
 <td>{</td>
 <td><span class=param>nodeKind</span>:(<span class=literal>"iri"</span> | <span class=literal>"bnode"</span> | <span class=literal>"nonliteral"</span> | <span class=literal>"literal"</span>)? <span class=param>datatype</span>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-4>IRIREF</a>? <a class="nobref internalDFN" href=#dfn-xsfacet data-link-type=dfn id=ref-for-dfn-xsfacet-5>xsFacet</a>* <span class=param>values</span>:[<a class="nobref internalDFN" href=#dfn-valuesetvalue data-link-type=dfn id=ref-for-dfn-valuesetvalue-1>valueSetValue</a>+]? }
 </td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn id=dfn-xsfacet tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>xsFacet</dfn></th>
 <td>=</td>
 <td><a class="nobref internalDFN" href=#dfn-stringfacet data-link-type=dfn id=ref-for-dfn-stringfacet-3>stringFacet</a> | <a class="nobref internalDFN" href=#dfn-numericfacet data-link-type=dfn id=ref-for-dfn-numericfacet-3>numericFacet</a> ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn id=dfn-stringfacet tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>stringFacet</dfn></th>
 <td>=</td>
 <td>(<span class=param>length</span>|<span class=param>minlength</span>|<span class=param>maxlength</span>):<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-1>INTEGER</a> | <span class=param>pattern</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-1>STRING</a> <span class=param>flags</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-2>STRING</a>? ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn id=dfn-numericfacet tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>numericFacet</dfn></th>
 <td>=</td>
 <td>(<span class=param>mininclusive</span>|<span class=param>minexclusive</span>|<span class=param>maxinclusive</span>|<span class=param>maxexclusive</span>):<a class="nobref internalDFN" href=#dfn-numericliteral data-link-type=dfn id=ref-for-dfn-numericliteral-1>numericLiteral</a> </td>
 </tr>
 <tr>
 <th></th>
 <td>|</td>
 <td>(<span class=param>totaldigits</span>|<span class=param>fractiondigits</span>):<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-2>INTEGER</a> ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn id=dfn-numericliteral tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>numericLiteral</dfn></th>
 <td>=</td>
 <td><a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-3>INTEGER</a> | <a href=#dfn-decimal class=internalDFN data-link-type=dfn id=ref-for-dfn-decimal-1>DECIMAL</a> | <a href=#dfn-double class=internalDFN data-link-type=dfn id=ref-for-dfn-double-1>DOUBLE</a> ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn id=dfn-valuesetvalue tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>valueSetValue</dfn></th>
 <td>=</td>
 <td><a class="nobref internalDFN" href=#dfn-objectvalue data-link-type=dfn id=ref-for-dfn-objectvalue-1>objectValue</a> | <a class="objref internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-1>IriStem</a> | <a class="objref internalDFN" href=#dfn-iristemrange data-link-type=dfn id=ref-for-dfn-iristemrange-1>IriStemRange</a> |
 <a class="objref internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-1>LiteralStem</a> | <a class="objref internalDFN" href=#dfn-literalstemrange data-link-type=dfn id=ref-for-dfn-literalstemrange-1>LiteralStemRange</a> | <a class="objref internalDFN" href=#dfn-language data-link-type=dfn id=ref-for-dfn-language-1>Language</a> | <a class="objref internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-1>LanguageStem</a> | <a class="objref internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-1>LanguageStemRange</a> ;
 </td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn id=dfn-objectvalue tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>objectValue</dfn></th>
 <td>=</td>
 <td><a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-5>IRIREF</a> | <a class="objref internalDFN" href=#dfn-objectliteral data-link-type=dfn id=ref-for-dfn-objectliteral-1>ObjectLiteral</a> ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn id=dfn-objectliteral tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>ObjectLiteral</dfn></th>
 <td>{</td>
 <td><span class=param>value</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-3>STRING</a> <span class=param>language</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-4>STRING</a>? <span class=param>type</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-5>STRING</a>? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-iristem tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>IriStem</dfn></th>
 <td>{</td>
 <td><span class=param>stem</span>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-6>IRIREF</a> }</td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-iristemrange tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>IriStemRange</dfn></th>
 <td>{</td>
 <td><span class=param>stem</span>:(<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-7>IRIREF</a> | <a class="objref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-1>Wildcard</a>) <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-iriref data-link-type=dfn id=ref-for-dfn-iriref-8>IRIREF</a>|<a class="objref internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-2>IriStem</a>+]? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-literalstem tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>LiteralStem</dfn></th>
 <td>{</td>
 <td><span class=param>stem</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-6>STRING</a> }</td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-literalstemrange tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>LiteralStemRange</dfn></th>
 <td>{</td>
 <td><span class=param>stem</span>:(<a class="nobref internalDFN" href=#dfn-string data-link-type=dfn id=ref-for-dfn-string-7>STRING</a> | <a class="objref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-2>Wildcard</a>) <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-string data-link-type=dfn id=ref-for-dfn-string-8>STRING</a>|<a class="objref internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-2>LiteralStem</a>+]? }
 </td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-language tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>Language</dfn></th>
 <td>{</td>
 <td><span class=param>languageTag</span>:<a href=#dfn-langtag class=internalDFN data-link-type=dfn id=ref-for-dfn-langtag-1>LANGTAG</a> }</td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-languagestem tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>LanguageStem</dfn></th>
 <td>{</td>
 <td><span class=param>stem</span>:<a href=#dfn-langtag class=internalDFN data-link-type=dfn id=ref-for-dfn-langtag-2>LANGTAG</a> }</td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-languagestemrange tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>LanguageStemRange</dfn></th>
 <td>{</td>
 <td><span class=param>stem</span>:(<a href=#dfn-langtag class=internalDFN data-link-type=dfn id=ref-for-dfn-langtag-3>LANGTAG</a> | <a class="objref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-3>Wildcard</a>) <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-langtag data-link-type=dfn id=ref-for-dfn-langtag-4>LANGTAG</a>|<a class="objref internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-2>LanguageStem</a>+]? }
 </td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-wildcard tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>Wildcard</dfn></th>
 <td>{</td>
 <td><span class=comment>/* empty */</span> }</td>
 </tr>
 </table>
 </div>
 <section id=node-constraint-semantics><div class=header-wrapper><h4 id=semantics-0>Semantics</h4><a class="self-link sf-hidden" href=#node-constraint-semantics aria-label="Permalink for this Section"></a></div>
 
 <p id=satisfies2-NodeConstraint>
 For a node <span class=param>n</span> and constraint <span class=param>nc</span>, <code class=function>satisfies2(<span class=math>n</span>, <span class=math>nc</span>)</code> if and only if
 for every <span class=param>nodeKind</span>, <span class=param>datatype</span>, <span class=param>xsFacet</span> and <span class=param>values</span> constraint value <span class=math>v</span> present in <span class=param>nc</span> <code class=function>nodeSatisfies(<span class=math>n</span>, <span class=math>v</span>)</code>.
 The following sections define <code class=function>nodeSatisfies</code> for each of these types of
 constraints:
 </p>
 <ul>
 <li><a href=#nodeKind>Node Kind Constraints</a></li>
 <li><a href=#datatype>Datatype Constraints</a></li>
 <li><a href=#xs-string>XML Schema String Facet Constraints</a></li>
 <li><a href=#xs-numeric>XML Schema Numeric Facet Constraints</a></li>
 <li><a href=#values>Values Constraints</a></li>
 </ul>
 </section>
 <section id=nodeKind><div class=header-wrapper><h4 id=node-kind-constraints>Node Kind Constraints</h4><a class="self-link sf-hidden" href=#nodeKind aria-label="Permalink for this Section"></a></div>
 
 <p id=nodeSatisfies-nodeKind>
 For a node <span class=math>n</span> and constraint value <span class=math>v</span>, <code class=function>nodeSatisfies(<span class=math>n</span>, <span class=math>v</span>)</code> if:
 </p>
 <ul>
 <li><span class=math>v</span> = "iri" and <span class=math>n</span> is an <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a>.</li>
 <li><span class=math>v</span> = "bnode" and <span class=math>n</span> is a <a data-cite=rdf11-concepts#dfn-blank-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node>blank node</a>.</li>
 <li><span class=math>v</span> = "literal" and <span class=math>n</span> is a <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal>Literal</a>.</li>
 <li><span class=math>v</span> = "nonliteral" and <span class=math>n</span> is an <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a> or <a data-cite=rdf11-concepts#dfn-blank-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node>blank
 node</a>.</li>
 </ul>
 <div class=example>
 <div class="example-title marker"><span>Node Kind example 1</span></div>
 <p>
 The following examples use a <span class=jobjref><a href=#dfn-tripleconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleconstraint-2>TripleConstraint</a></span> object described later in
 the document.
 The
 </p>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#IssueShape",
    "type": "Shape", "expression": {
      "type": "TripleConstraint", "predicate": "http://schema.example/#state",
      "valueExpr": { "type": "NodeConstraint", "nodeKind": "iri" } } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                             &nbsp;
    ex:IssueShape {
      ex:state IRI
    }
&nbsp;</pre>
 <button>json</button></div>
 <pre class=data aria-busy=false><code class=hljs>&lt;issue1&gt; ex:state ex:HunkyDory .
&lt;issue2&gt; ex:taste ex:GoodEnough .
&lt;issue3&gt; ex:state "just fine" .</code></pre>
 <table>
 <tbody><tr>
 <th class=data>node</th>
 <th class=schema>shape</th>
 <th>result</th>
 <th>reason</th>
 </tr>
 <tr class=pass>
 <td>&lt;issue1&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=fail>
 <td>&lt;issue2&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>fail</td>
 <td class=fail>expected 1 <code>ex:state</code> property.</td>
 </tr>
 <tr class=fail>
 <td>&lt;issue3&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>ex:state</code> expected to be an IRI, literal found.</td>
 </tr>
 </table>
 <p>
 Note that &lt;issue2&gt; <span class=fail>fails</span> not because of a nodeKind violation but instead
 because of a <a href=#matches-cardinality>Cardinality</a> violation described below.
 </p>
 </div>
 </section>
 <section id=datatype><div class=header-wrapper><h4 id=datatype-constraints>Datatype Constraints</h4><a class="self-link sf-hidden" href=#datatype aria-label="Permalink for this Section"></a></div>
 
 <p id=nodeSatisfies-datatype>
 For a node <span class=math>n</span> and constraint value <span class=math>v</span>, <code class=function>nodeSatisfies(<span class=math>n</span>, <span class=math>v</span>)</code> if <span class=math>n</span> is a Literal with the datatype <span class=math>v</span> and, if <span class=math>v</span> is in the set of <a data-cite=sparql11-query#operandDataTypes href=https://www.w3.org/TR/sparql11-query/#operandDataTypes>SPARQL operand data
 types</a>[<cite><a class=bibref data-link-type=biblio href=#bib-sparql11-query title="SPARQL 1.1 Query Language">sparql11-query</a></cite>], an XML schema string with a value of the lexical form of <span class=math>n</span> can be cast to the target type <span class=math>v</span> per <a data-cite=xpath-functions-31#casting href=https://www.w3.org/TR/xpath-functions-31/#casting>XPath Functions 3.1 section 19 Casting</a>[<cite><a class=bibref data-link-type=biblio href=#bib-xpath-functions title="XQuery 1.0 and XPath 2.0 Functions and Operators (Second Edition)">xpath-functions</a></cite>].
 The lexical form and numeric value (where applicable) of all datatypes required by <a data-cite=sparql11-query#FunctionMapping href=https://www.w3.org/TR/sparql11-query/#FunctionMapping>SPARQL XPath Constructor Functions</a> <em class=rfc2119>MUST</em> be tested for
 conformance with the corresponding XML Schema form.
 ShEx extensions <em class=rfc2119>MAY</em> add support for other datatypes.
 </p>
 <div class=example>
 <div class="example-title marker"><span>Datatype example 1</span></div>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#IssueShape",
    "type": "Shape", "expression": {
      "type": "TripleConstraint", "predicate": "http://schema.example/#submittedOn",
      "valueExpr": {
        "type": "NodeConstraint",
        "datatype": "http://www.w3.org/2001/XMLSchema#date"
      } } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                                   &nbsp;
    ex:IssueShape {                                                          
      ex:submittedOn xsd:date
    }

    
    
&nbsp;</pre>
 <button>json</button></div>
 <pre class=data aria-busy=false><code class=hljs>&lt;issue1&gt; ex:submittedOn "2016-07-08"^^xsd:date .
&lt;issue2&gt; ex:submittedOn "2016-07-08T01:23:45Z"^^xsd:dateTime .
&lt;issue3&gt; ex:submittedOn "2016-07"^^xsd:date .</code></pre>
 <table>
 <tbody><tr>
 <th class=data>node</th>
 <th class=schema>shape</th>
 <th>result</th>
 <th>reason</th>
 </tr>
 <tr class=pass>
 <td>&lt;issue1&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=fail>
 <td>&lt;issue2&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>ex:submittedOn</code> expected to be an <code>xsd:date</code>,
 <code>xsd:dateTime</code> found.
 </td>
 </tr>
 <tr class=fail>
 <td>&lt;issue3&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>2016-07</code> is not a valid <code>xsd:date</code>.</td>
 </tr>
 </table>
 </div>
 <div class=note role=note id=issue-container-generatedID-3><div role=heading class="note-title marker" id=h-note-3 aria-level=5><span>Note</span></div><div>
 <p>
 In RDF 1.1, <dfn data-cite=rdf11-concepts#dfn-language-tagged-string data-lt="language-tagged string" id=dfn-language-tagged-string class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-language-tagged-string>language-tagged strings</a></dfn>[<cite><a class=bibref data-link-type=biblio href=#bib-rdf11-concepts title="RDF 1.1 Concepts and Abstract Syntax">rdf11-concepts</a></cite>] have the datatype
 <code>http://www.w3.org/1999/02/22-rdf-syntax-ns#langString</code>.
 </p>
 <p>
 RDF 1.0 included <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal>RDF literals</a> with no datatype or language tag.
 These are called "<a data-cite=sparql11-query#simple_literal href=https://www.w3.org/TR/sparql11-query/#simple_literal>simple literals</a>" in
 SPARQL11[<cite><a class=bibref data-link-type=biblio href=#bib-sparql11-query title="SPARQL 1.1 Query Language">sparql11-query</a></cite>].
 In RDF 1.1, these literals have the datatype <code>http://www.w3.org/2001/XMLSchema#string</code>.
 </p>
 </div></div>
 <div class=example>
 <div class="example-title marker"><span>Datatype example 2</span></div>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#IssueShape",
    "type": "Shape", "expression": {
      "type": "TripleConstraint",
      "predicate": "http://www.w3.org/2000/01/rdf-schema#label",
      "valueExpr": {
        "type": "NodeConstraint",
        "datatype": "http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"
      } } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                          &nbsp;
  ex:IssueShape {
    rdfs:label rdf:langString
  }




&nbsp;</pre>
 <button>json</button></div>
 <pre class=data aria-busy=false><code class=hljs>&lt;issue3&gt; rdfs:label "emits dense black smoke"@en .
&lt;issue4&gt; rdfs:label "unexpected odor" .</code></pre>
 <table>
 <tbody><tr>
 <th class=data>node</th>
 <th class=schema>shape</th>
 <th>result</th>
 <th>reason</th>
 </tr>
 <tr class=pass>
 <td>&lt;issue3&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=fail>
 <td>&lt;issue4&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>rdfs:label</code> expected to be an <code>rdf:langString</code>,
 <code>xsd:string</code> found.
 </td>
 </tr>
 </table>
 </div>
 </section>
 <section id=xs-string><div class=header-wrapper><h4 id=xml-schema-string-facet-constraints>XML Schema String Facet Constraints</h4><a class="self-link sf-hidden" href=#xs-string aria-label="Permalink for this Section"></a></div>
 
 
 <p>
 String facet constraints apply to the lexical form of the <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal>RDF Literals</a> and <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRIs</a> and <a data-cite=rdf11-concepts#dfn-blank-node-identifier data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier>blank
 node identifiers</a> (see <a href=#blank-node-label>note below</a> regarding access to <a data-cite=rdf11-concepts#dfn-blank-node-identifier data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier>blank node
 identifiers</a>).<br>
 Let <span class=math>lex</span> =
 </p>
 <ul>
 <li>if the value <span class=math>n</span> is an <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal>RDF Literal</a>, the <a data-cite=rdf11-concepts#dfn-lexical-form href=https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form>lexical form</a> of the literal (see [<cite><a class=bibref data-link-type=biblio href=#bib-rdf11-concepts title="RDF 1.1 Concepts and Abstract Syntax">rdf11-concepts</a></cite>] <a data-cite=rdf11-concepts#section-Graph-Literal href=https://www.w3.org/TR/rdf11-concepts/#section-Graph-Literal>section 3.3 Literals</a>).</li>
 <li>if the value <span class=math>n</span> is an <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a>, the <a data-cite=rdf11-concepts#dfn-iri href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI
 string</a> (see [<cite><a class=bibref data-link-type=biblio href=#bib-rdf11-concepts title="RDF 1.1 Concepts and Abstract Syntax">rdf11-concepts</a></cite>] <a data-cite=rdf11-concepts#section-iris href=https://www.w3.org/TR/rdf11-concepts/#section-iris>section 3.2 IRIs</a>).</li>
 <li>if the value <span class=math>n</span> is a <a data-cite=rdf11-concepts#dfn-blank-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node>blank node</a>, the <a data-cite=rdf11-concepts#dfn-blank-node-identifier data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier>blank node identifier</a> (see
 [<cite><a class=bibref data-link-type=biblio href=#bib-rdf11-concepts title="RDF 1.1 Concepts and Abstract Syntax">rdf11-concepts</a></cite>] <a data-cite=rdf11-concepts#section-blank-nodes href=https://www.w3.org/TR/rdf11-concepts/#section-blank-nodes>section 3.4 Blank Nodes</a>).</li>
 </ul>
 <p>
 Let <span class=math>len</span> = the number of unicode codepoints in <span class=math>lex</span><br>
 For a node <span class=math>n</span> and constraint value <span class=math>v</span>, <code class=function>nodeSatisfies(<span class=math>n</span>, <span class=math>v</span>)</code>:
 </p>
 <ul>
 <li id=nodeSatisfies-length>for "<code>length</code>" constraints, <span class=math>v = len</span>,</li>
 <li id=nodeSatisfies-minlength>for "<code>minlength</code>" constraints, <span class=math>v &gt;=
 len</span>,</li>
 <li id=nodeSatisfies-maxlength>for "<code>maxlength</code>" constraints, <span class=math>v &lt;=
 len</span>,</li>
 <li id=nodeSatisfies-pattern>
 for "<code>pattern</code>" constraints, <span class=math>v</span> is unescaped into a valid <a data-cite=xpath-functions-31#regex-syntax href=https://www.w3.org/TR/xpath-functions-31/#regex-syntax>XPath 3.1 regular expression</a>[<cite><a class=bibref data-link-type=biblio href=#bib-xpath-functions-31 title="XPath and XQuery Functions and Operators 3.1">xpath-functions-31</a></cite>] <span class=math>re</span> and invoking <code class=function><a data-cite=xpath-functions-31#func-matches href=https://www.w3.org/TR/xpath-functions-31/#func-matches>fn:matches</a>(<span class=math>lex</span>, <span class=math>re</span>)</code>
 returns <code>fn:true</code>.
 If the <span class=param>flags</span> parameter is present, it is passed as a third argument to <code class=function>fn:matches</code>.
 The pattern may have XPath 3.1 regular expression escape sequences per the modified production [10] in <a href=https://www.w3.org/TR/xpath-functions-31/#matching-start-and-end>section 5.6.1.1</a> as well as
 numeric escape sequences of the form 'u' HEX HEX HEX HEX or 'U' HEX HEX HEX HEX HEX HEX HEX HEX.
 Unescaping replaces numeric escape sequences with the corresponding unicode codepoint.
 </li>
 </ul>
 <div class=example>
 <div class="example-title marker"><span>String Facets example 1</span></div>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#IssueShape",
    "type": "Shape", "expression": {
      "type": "TripleConstraint",
      "predicate": "http://schema.example/#submittedBy",
      "valueExpr": { "type": "NodeConstraint", "minlength": 10 } } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                       &nbsp;
  ex:IssueShape {
    ex:submittedBy MINLENGTH 10
  }

&nbsp;</pre>
 <button>json</button></div>
 <pre class=data aria-busy=false><code class=hljs>&lt;issue1&gt; ex:submittedBy &lt;http://a.example/bob&gt; . # 20 characters
&lt;issue2&gt; ex:submittedBy "Bob" . # 3 characters</code></pre>
 <table>
 <tbody><tr>
 <th class=data>node</th>
 <th class=schema>shape</th>
 <th>result</th>
 <th>reason</th>
 </tr>
 <tr class=pass>
 <td>&lt;issue1&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=fail>
 <td>&lt;issue2&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>ex:submittedBy</code> expected to be &gt;= 10 characters,<br> 3 characters found.
 </td>
 </tr>
 </table>
 </div>
 <div class=note role=note id=blank-node-label><div role=heading class="note-title marker" id=h-note-4 aria-level=5><span>Note</span></div><div>
 <p>
 Access to <a data-cite=rdf11-concepts#dfn-blank-node-identifier data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier>blank node identifiers</a> may be impossible or unadvisable for many use cases.
 For instance, the SPARQL Query and SPARQL Update languages treat blank nodes in the query, labeled or
 otherwise, as variables.
 Lexical constraints on <a data-cite=rdf11-concepts#dfn-blank-node-identifier data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier>blank node identifiers</a> can only be implemented in systems which preserve such
 labels on data import.
 </p>
 </div></div>
 <div class=example>
 <div class="example-title marker"><span>String Facets example 2</span></div>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#IssueShape",
    "type": "Shape", "expression": {
      "type": "TripleConstraint",
      "predicate": "http://schema.example/#submittedBy",
      "valueExpr": { "type": "NodeConstraint",
                     "pattern": "genuser[0-9]+", "flags": "i" }
} } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                              &nbsp;
  ex:IssueShape {
    ex:submittedBy /genuser[0-9]+/i
  }



&nbsp;</pre>
 <button>json</button></div>
 <pre class=data aria-busy=false><code class=hljs>&lt;issue6&gt; ex:submittedBy _:genUser218 .
&lt;issue7&gt; ex:submittedBy _:genContact817 .</code></pre>
 <table>
 <tbody><tr>
 <th class=data>node</th>
 <th class=schema>shape</th>
 <th>result</th>
 <th>reason</th>
 </tr>
 <tr class=pass>
 <td>&lt;issue6&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=fail>
 <td>&lt;issue7&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>_:genContact817</code> expected to match <code>genuser[0-9]+</code>.</td>
 </tr>
 </table>
 </div>
 <p>
 When expressed as JSON strings, regular expressions are subject to the JSON string escaping rules.
 </p>
 <div class=example>
 <div class="example-title marker"><span>String Facets example 3</span></div>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#ProductShape",
    "type": "Shape", "expression": {
      "type": "TripleConstraint",
      "predicate": "http://schema.example/#trademark",
      "valueExpr": { "type": "NodeConstraint",
                     "pattern": "^/\\t\\\\\uD835\uDCB8\\?$" }
} } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                            &nbsp;
  ex:ProductShape {
    ex:trademark /^\/\t\\\U0001D4B8\?$/
  }



&nbsp;</pre>
 <button>json</button></div>
 <pre class=data aria-busy=false><code class=hljs>&lt;product6&gt; ex:trademark "	\\𝒸?" .
&lt;product7&gt; ex:trademark "\t\\\U0001D4B8?" . # Turtle literals have escape characters [tbnrf"'\].
&lt;product8&gt; ex:trademark "\t\\\\U0001D4B8?" .</code></pre>
 <table>
 <tbody><tr>
 <th class=data>node</th>
 <th class=schema>shape</th>
 <th>result</th>
 <th>reason</th>
 </tr>
 <tr class=pass>
 <td>&lt;product6&gt;</td>
 <td>&lt;ProductShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=pass>
 <td>&lt;product7&gt;</td>
 <td>&lt;ProductShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=fail>
 <td>&lt;product8&gt;</td>
 <td>&lt;ProductShape&gt;</td>
 <td>fail</td>
 <td class=fail>found "<code>\U0001D4B8</code>" instead of "<code>𝒸</code>" (codepoint U+1D4B8).</td>
 </tr>
 </table>
 </div>
 </section>
 <section id=xs-numeric><div class=header-wrapper><h4 id=xml-schema-numeric-facet-constraints>XML Schema Numeric Facet Constraints</h4><a class="self-link sf-hidden" href=#xs-numeric aria-label="Permalink for this Section"></a></div>
 
 
 <p>
 Numeric facet constraints apply to the numeric value of <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal>RDF Literals</a> with datatypes listed in <a data-cite=sparql11-query#operandDataTypes href=https://www.w3.org/TR/sparql11-query/#operandDataTypes>SPARQL 1.1 Operand Data Types</a>[<cite><a class=bibref data-link-type=biblio href=#bib-sparql11-query title="SPARQL 1.1 Query Language">sparql11-query</a></cite>].
 Numeric constraints on non-numeric values fail.
 <code>totaldigits</code> and <code>fractiondigits</code> constraints on values not derived from
 <code>xsd:decimal</code> fail.
 </p>
 <p>
 Let <span class=math>num</span> be the numeric value of <span class=math>n</span>.<br>
 For a node <span class=math>n</span> and constraint value <span class=math>v</span>, <code class=function>nodeSatisfies(<span class=math>n</span>, <span class=math>v</span>)</code>:
 </p>
 <ul>
 <li id=nodeSatisfies-mininclusive>for "<code>mininclusive</code>" constraints, <span class=math>v &lt;=
 num</span>,</li>
 <li id=nodeSatisfies-minexclusive>for "<code>minexclusive</code>" constraints, <span class=math>v &lt;
 num</span>,</li>
 <li id=nodeSatisfies-maxinclusive>for "<code>maxinclusive</code>" constraints, <span class=math>v &gt;=
 num</span>,</li>
 <li id=nodeSatisfies-maxexclusive>for "<code>maxexclusive</code>" constraints, <span class=math>v &gt;
 num</span>,</li>
 <li id=nodeSatisfies-totaldigits>for "<code>totaldigits</code>" constraints, <span class=math>v</span> is
 less than or equals the number of digits in the <a data-cite=xmlschema-2#dt-canonical-representation href=https://www.w3.org/TR/xmlschema-2/#dt-canonical-representation>XML
 Schema canonical form</a>[<cite><a class=bibref data-link-type=biblio href=#bib-xmlschema-2 title="XML Schema Part 2: Datatypes Second Edition">xmlschema-2</a></cite>] of the value of <span class=math>n</span>,</li>
 <li id=nodeSatisfies-fractiondigits>for "<code>fractiondigits</code>" constraints, <span class=math>v</span> is less than or equals the number of digits to the right of the decimal place in the
 <a data-cite=xmlschema-2#dt-canonical-representation href=https://www.w3.org/TR/xmlschema-2/#dt-canonical-representation>XML Schema canonical form</a>[<cite><a class=bibref data-link-type=biblio href=#bib-xmlschema-2 title="XML Schema Part 2: Datatypes Second Edition">xmlschema-2</a></cite>] of the
 value of <span class=math>n</span>, ignoring trailing zeros.
 </li>
 </ul>
 <p>
 The operators <span class=math>&lt;=</span>, <span class=math>&lt;</span>, <span class=math>&gt;=</span>
 and <span class=math>&gt;</span> are evaluated after performing <a data-cite=xpath20#promotion href=https://www.w3.org/TR/xpath20/#promotion>numeric
 type promotion</a>[<cite><a class=bibref data-link-type=biblio href=#bib-xpath20 title="XML Path Language (XPath) 2.0 (Second Edition)">xpath20</a></cite>].
 </p>
 <div class=example>
 <div class="example-title marker"><span>Numeric Facets example 1</span></div>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#IssueShape",
    "type": "Shape", "expression": {
      "type": "TripleConstraint",
      "predicate": "http://schema.example/#confirmations",
      "valueExpr": { "type": "NodeConstraint", "mininclusive": 1 } } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                         &nbsp;
  ex:IssueShape {
    ex:confirmations MININCLUSIVE 1
  }

&nbsp;</pre>
 <button>json</button></div>
 <pre class=data aria-busy=false><code class=hljs>&lt;issue1&gt; ex:confirmations 1 .
&lt;issue2&gt; ex:confirmations 2^^xsd:byte .
&lt;issue3&gt; ex:confirmations 0 .
&lt;issue4&gt; ex:confirmations "ii"^^ex:romanNumeral .</code></pre>
 <table>
 <tbody><tr>
 <th class=data>node</th>
 <th class=schema>shape</th>
 <th>result</th>
 <th>reason</th>
 </tr>
 <tr class=pass>
 <td>&lt;issue1&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=pass>
 <td>&lt;issue2&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=fail>
 <td>&lt;issue3&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>0</code> is less than <code>1</code>.</td>
 </tr>
 <tr class=fail>
 <td>&lt;issue4&gt;</td>
 <td>&lt;IssueShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>ex:romanNumeral</code> is not a numeric datatype.</td>
 </tr>
 </table>
 </div>
 </section>
 <section id=values><div class=header-wrapper><h4 id=values-constraint>Values Constraint</h4><a class="self-link sf-hidden" href=#values aria-label="Permalink for this Section"></a></div>
 
 <p>
 The <code>nodeSatisfies</code> semantics for <span class=jobjref><a class="obj internalDFN" href=#dfn-nodeconstraint data-link-type=dfn id=ref-for-dfn-nodeconstraint-7>NodeConstraint</a></span>
 <span class=param>values</span> depends on a <code>nodeIn</code> function <a href=#nodeIn>defined
 below</a>.
 </p>
 <p>
 For a node <span class=math>n</span> and constraint value <span class=math>v</span>, <code class=function>nodeSatisfies(<span class=math>n</span>, <span class=math>v</span>)</code> if <span class=math>n</span> matches some <a class="nobref internalDFN" href=#dfn-valuesetvalue data-link-type=dfn id=ref-for-dfn-valuesetvalue-2>valueSetValue</a> <span class=math>vsv</span> in
 <span class=math>v</span>.
 A term matches a valueSetValue if:
 </p>
 <ul>
 <li><span class=math id=nodeSatisfies-objectValue>vsv</span> is an <a class="nobref internalDFN" href=#dfn-objectvalue data-link-type=dfn id=ref-for-dfn-objectvalue-2>objectValue</a> and
 <span class=math>n = vsv</span>.
 </li>
 <li><span class=math>vsv</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-language data-link-type=dfn id=ref-for-dfn-language-2>Language</a></span> with <span class=param>languageTag</span> <span class=math>lt</span> and <span class=math>n</span> is a
 <a data-cite=rdf11-concepts#dfn-language-tagged-string data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string>language-tagged string</a> with a <a data-cite=rdf11-concepts#dfn-language-tag data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag>language tag</a> <span class=math>l</span> and <span class="math function">l = lt</span>.
 </li>
 <li><span class=math id=nodeSatisfies-Stem>vsv</span> is a <span class=jobjref><a class="nobref internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-3>IriStem</a></span>, <span class=jobjref><a class="nobref internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-3>LiteralStem</a></span> or
 <span class=jobjref><a class="nobref internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-3>LanguageStem</a></span> with <span class=param>stem</span> <span class=math>st</span> and <span class=math>nodeIn(n, st)</span>.
 </li>
 <li><span class=math id=nodeSatisfies-StemRange>vsv</span> is a <span class=jobjref><a class="nobref internalDFN" href=#dfn-iristemrange data-link-type=dfn id=ref-for-dfn-iristemrange-2>IriStemRange</a></span>, <span class=jobjref><a class="nobref internalDFN" href=#dfn-literalstemrange data-link-type=dfn id=ref-for-dfn-literalstemrange-2>LiteralStemRange</a></span> or <span class=jobjref><a class="nobref internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-2>LanguageStemRange</a></span> with <span class=param>stem</span> <span class=math>st</span> and <span class=param>exclusions</span> <span class=math>excls</span> and <span class="math function">nodeIn(n, st)</span> and there is no <span class=math>x</span> in <span class=math>excls</span> such that <span class="math function">nodeIn(n, excl)</span>.</li>
 <li><span class=math id=nodeSatisfies-Wildcard>vsv</span> is a <span class=jobjref><a class="nobref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-4>Wildcard</a></span> with <span class=param>exclusions</span> <span class=math>excls</span> and there is no <span class=math>x</span> in <span class=math>excls</span>
 such that <span class="math function">nodeIn(n, excl)</span>.</li>
 </ul>
 <p>
 <span class=label id=nodeIn>nodeIn</span>: asserts that an RDF node <span class=math>n</span> is equal
 to an RDF term <span class=math>s</span> or is in a set defined by a <span class=jobjref><a class="obj internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-4>IriStem</a></span>, <span class=jobjref><a class="obj internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-4>LiteralStem</a></span> or <span class=jobjref><a class="obj internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-4>LanguageStem</a></span>.<br>
 The expression <code class=function>nodeIn(<span class=math>n</span>, <span class=math>s</span>)</code>
 is satisfied if:
 </p>
 <ul>
 <li><span class=math>n = s</span>.</li>
 <li><span class=math>s</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-5>IriStem</a></span>, <span class=jobjref><a class="obj internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-5>LiteralStem</a></span> or <span class=jobjref><a class="obj internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-5>LanguageStem</a></span> with <span class=param>stem</span> <span class=math>st</span>
 and:
 <ul>
 <li><span class=math>s</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-6>IriStem</a></span> and <span class=math>n</span> is an <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a> and <span class="math function"><a data-cite=xpath-functions-31#func-starts-with href=https://www.w3.org/TR/xpath-functions-31/#func-starts-with>fn:starts-with</a>(n, st)</span>.</li>
 <li><span class=math>s</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-6>LiteralStem</a></span> and <span class=math>n</span> is an <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal>RDF Literal</a> with a lexical value <span class=math>l</span> and
 <span class="math function"><a data-cite=xpath-functions-31#func-starts-with href=https://www.w3.org/TR/xpath-functions-31/#func-starts-with>fn:starts-with</a>(l,
 st)</span>.
 </li>
 <li>
 <span class=math>s</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-6>LanguageStem</a></span>, <span class=math>n</span> is a <a data-cite=rdf11-concepts#dfn-language-tagged-string data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string>language-tagged string</a> with a <a data-cite=rdf11-concepts#dfn-language-tag data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag>language tag</a> <span class=math>l</span>, <span class=math>st</span> is a basic language range per <a class=norm href=http://www.ietf.org/rfc/rfc4647.txt>Matching of Language Tags</a> [<cite><a class=bibref data-link-type=biblio href=#bib-rfc4647 title="Matching of Language Tags">rfc4647</a></cite>] section 2.1 and
 <span class=math>l</span> matches <span class=math>st</span> per the basic filtering scheme defined
 in [<cite><a class=bibref data-link-type=biblio href=#bib-rfc4647 title="Matching of Language Tags">rfc4647</a></cite>] section 3.3.1.
 The basic language range wildcard ("*") is represented by an empty <span class=param>stem</span> ("").
 </li>
 </ul>
 </li>
 </ul>
 <div class=example>
 <div class="example-title marker"><span>Values Constraint example 1</span></div>
 <p>NoActionIssueShape requires a state of Resolved or Rejected:</p>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#NoActionIssueShape",
    "type": "Shape", "expression": {
      "type": "TripleConstraint",
      "predicate": "http://schema.example/#state",
      "valueExpr": {
        "type": "NodeConstraint", "values": [
          "http://schema.example/#Resolved",
          "http://schema.example/#Rejected" ] } } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                      &nbsp;
  ex:NoActionIssueShape {
    ex:state [ ex:Resolved ex:Rejected ]
  }




&nbsp;</pre>
 <button>json</button></div>
 <pre class=data aria-busy=false><code class=hljs>&lt;issue1&gt; ex:state ex:Resolved .
&lt;issue2&gt; ex:state ex:Unresolved .</code></pre>
 <table>
 <tbody><tr>
 <th class=data>node</th>
 <th class=schema>shape</th>
 <th>result</th>
 <th>reason</th>
 </tr>
 <tr class=pass>
 <td>&lt;issue1&gt;</td>
 <td>&lt;NoActionIssueShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=fail>
 <td>&lt;issue2&gt;</td>
 <td>&lt;NoActionIssueShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>ex:state</code> expected to be <code>ex:Resolved</code> or
 <code>ex:Rejected</code>, <code>ex:Unresolved</code> found.
 </td>
 </tr>
 </table>
 </div>
 <div class=example>
 <div class="example-title marker"><span>Values Constraint example 2</span></div>
 <p>An employee must have an email address that is the string "N/A" or starts with "engineering-" or "sales-"
 but not "sales-contacts" or "sales-interns":</p>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#EmployeeShape",
    "type": "Shape", "expression": {
      "type": "TripleConstraint",
      "predicate": "http://xmlns.com/foaf/0.1/mbox",
      "valueExpr": {
        "type": "NodeConstraint", "values": [
          {"value": "N/A"},
          { "type": "IriStem", "stem": "mailto:engineering-" },
          { "type": "IriStemRange", "stem": "mailto:sales-", "exclusions": [
              { "type": "IriStem", "stem": "mailto:sales-contacts" },
              { "type": "IriStem", "stem": "mailto:sales-interns" }
            ] }
        ] } } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                           &nbsp;
  ex:EmployeeShape {
    foaf:mbox [ "N/A"
                &lt;mailto:engineering-&gt;~
                &lt;mailto:sales-&gt;~
                    - &lt;mailto:sales-contacts&gt;~
                    - &lt;mailto:sales-interns&gt;~ ]
  }





&nbsp;</pre>
 <button>json</button></div>
 <pre class=data aria-busy=false><code class=hljs>&lt;issue3&gt; foaf:mbox "N/A" .
&lt;issue4&gt; foaf:mbox &lt;mailto:engineering-2112@a.example&gt; .
&lt;issue5&gt; foaf:mbox &lt;mailto:sales-835@a.example&gt; .
&lt;issue6&gt; foaf:mbox "missing" .
&lt;issue7&gt; foaf:mbox &lt;mailto:sales-contacts-999@a.example&gt; .</code></pre>
 <table>
 <tbody><tr>
 <th class=data>node</th>
 <th class=schema>shape</th>
 <th>result</th>
 <th>reason</th>
 </tr>
 <tr class=pass>
 <td>&lt;issue3&gt;</td>
 <td>&lt;EmployeeShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=pass>
 <td>&lt;issue4&gt;</td>
 <td>&lt;EmployeeShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=pass>
 <td>&lt;issue5&gt;</td>
 <td>&lt;EmployeeShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=fail>
 <td>&lt;issue6&gt;</td>
 <td>&lt;EmployeeShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>"missing"</code> is not in value set.</td>
 </tr>
 <tr class=fail>
 <td>&lt;issue7&gt;</td>
 <td>&lt;EmployeeShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>&lt;mailto:sales-contacts-999@a.example&gt;</code> is excluded.</td>
 </tr>
 </table>
 </div>
 <div class=example>
 <div class="example-title marker"><span>Values Constraint example 3</span></div>
 <p>An employee must not have an email address that starts with "engineering-" or "sales-":</p>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#EmployeeShape",
    "type": "Shape", "expression": {
      "type": "TripleConstraint",
      "predicate": "http://xmlns.com/foaf/0.1/mbox",
      "valueExpr": {
        "type": "NodeConstraint", "values": [
          { "type": "IriStemRange", "stem": {"type": "Wildcard"},
            "exclusions": [
              { "type": "IriStem", "stem": "mailto:engineering-" },
              { "type": "IriStem", "stem": "mailto:sales-" }
            ] }
        ] } } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                  &nbsp;
  ex:EmployeeShape {
    foaf:mbox [ . - &lt;mailto:engineering-&gt;~ - &lt;mailto:sales-&gt;~ ]
  }








&nbsp;</pre>
 <button>json</button></div>
 <pre class=data aria-busy=false><code class=hljs>&lt;issue8&gt; foaf:mbox 123 .
&lt;issue9&gt; foaf:mbox &lt;mailto:core-engineering-2112@a.example&gt; .
&lt;issue10&gt; foaf:mbox &lt;mailto:engineering-2112@a.example&gt; .</code></pre>
 <table>
 <tbody><tr>
 <th class=data>node</th>
 <th class=schema>shape</th>
 <th>result</th>
 <th>reason</th>
 </tr>
 <tr class=pass>
 <td>&lt;issue8&gt;</td>
 <td>&lt;EmployeeShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=pass>
 <td>&lt;issue9&gt;</td>
 <td>&lt;EmployeeShape&gt;</td>
 <td>pass</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 <tr class=fail>
 <td>&lt;issue10&gt;</td>
 <td>&lt;EmployeeShape&gt;</td>
 <td>fail</td>
 <td class=fail><code>&lt;mailto:engineering-2112@a.example&gt;</code> is excluded.</td>
 </tr>
 </table>
 </div>
 <p>
 A value set can have a single value in it.
 This is used to indicate that a specific value is required, e.g. that an ex:state must be equal to
 &lt;http://schema.example/#Resolved&gt; or the rdf:type of some node must be foaf:Person.
 </p>
 </section>
 </section>
 <section id=shapes-and-TEs><div class=header-wrapper><h3 id=shapes-and-triple-expressions>Shapes and Triple Expressions</h3><a class="self-link sf-hidden" href=#shapes-and-TEs aria-label="Permalink for this Section"></a></div>
 
 <p>
 Triple expressions are used for defining patterns composed of triple constraints.
 Shapes associate <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-2>triple expressions</a> with flags indicating whether triples match if they do not correspond
 to triple constraints in the <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-3>triple expression</a>.
 A <dfn data-lt="triple expressions|triple expression" id=dfn-triple-expressions tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>triple expression</dfn> is composed of <span class=jobjref><a href=#dfn-tripleconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleconstraint-3>TripleConstraint</a></span> and <span class=jobjref><a href=#dfn-tripleexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprref-3>tripleExprRef</a></span> objects
 composed with grouping and choice operators.
 </p>
 <section id=triple-expressions-abstract-syntax><div class=header-wrapper><h4 id=json-syntax-0>JSON Syntax</h4><a class="self-link sf-hidden" href=#triple-expressions-abstract-syntax aria-label="Permalink for this Section"></a></div>
 
 <div class=shexjTable>
 <table class=shexj>
 <tbody><tr class=obj>
 <th class=obj><dfn id=dfn-shape tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>Shape</dfn></th>
 <td>{</td>
 <td><span class=param>extends</span>:[<a class="objref internalDFN" href=#dfn-shapeexprref data-link-type=dfn id=ref-for-dfn-shapeexprref-6>shapeExprRef</a>]? <span class=param>closed</span>:<a href=#dfn-bool class=internalDFN data-link-type=dfn id=ref-for-dfn-bool-3>BOOL</a>? <span class=param>extra</span>:[<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-9>IRIREF</a>+]? <span class=param>expression</span>:<a class="nobref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-3>tripleExpr</a>?
 <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-4>SemAct</a>+]? <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-1>Annotation</a>+]? }
 </td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn id=dfn-tripleexpr tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>tripleExpr</dfn></th>
 <td>=</td>
 <td><a class="objref internalDFN" href=#dfn-eachof data-link-type=dfn id=ref-for-dfn-eachof-3>EachOf</a> | <a class="objref internalDFN" href=#dfn-oneof data-link-type=dfn id=ref-for-dfn-oneof-1>OneOf</a> | <a class="objref internalDFN" href=#dfn-tripleconstraint data-link-type=dfn id=ref-for-dfn-tripleconstraint-4>TripleConstraint</a> |
 <a class="objref internalDFN" href=#dfn-tripleexprref data-link-type=dfn id=ref-for-dfn-tripleexprref-4>tripleExprRef</a> ;
 </td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-eachof tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>EachOf</dfn></th>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-4>tripleExprLabel</a>? <dfn class=param id=dfn-expressions tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>expressions</dfn>:[<a class="nobref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-4>tripleExpr</a>{2,}] <span class=param>min</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-4>INTEGER</a>? <span class=param>max</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-5>INTEGER</a>? <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-5>SemAct</a>+]? <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-2>Annotation</a>+]? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-oneof tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>OneOf</dfn></th>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-5>tripleExprLabel</a>? <span class=param>expressions</span>:[<a class="nobref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-5>tripleExpr</a>{2,}] <span class=param>min</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-6>INTEGER</a>? <span class=param>max</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-7>INTEGER</a>? <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-6>SemAct</a>+]? <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-3>Annotation</a>+]? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><dfn id=dfn-tripleconstraint tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>TripleConstraint</dfn></th>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-6>tripleExprLabel</a>? <span class=param>inverse</span>:<a href=#dfn-bool class=internalDFN data-link-type=dfn id=ref-for-dfn-bool-4>BOOL</a>? <a class=param data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-10>IRIREF</a> <span class=param>valueExpr</span>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-18>shapeExpr</a>? <span class=param>min</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-8>INTEGER</a>? <span class=param>max</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-9>INTEGER</a>? <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-7>SemAct</a>+]? <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-4>Annotation</a>+]? }</td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn id=dfn-tripleexprref tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>tripleExprRef</dfn></th>
 <td>=</td>
 <td><a class="objref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-7>tripleExprLabel</a> ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><dfn id=dfn-tripleexprlabel tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>tripleExprLabel</dfn></th>
 <td>=</td>
 <td><a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-11>IRIREF</a> | <a href=#dfn-bnode class=internalDFN data-link-type=dfn id=ref-for-dfn-bnode-4>BNODE</a> ;</td>
 </tr>
 </table>
 </div>
 </section>
 <section id=triple-expressions-semantics><div class=header-wrapper><h4 id=semantics-1>Semantics</h4><a class="self-link sf-hidden" href=#triple-expressions-semantics aria-label="Permalink for this Section"></a></div>
 
 <p id=satisfies-Shape>
 The semantics of the <code>matchesShape</code> function are based on the <code>matches</code> function <a href=#matches>defined below</a>.
 A <a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-10>shape</a> may have an <span class=param>expression</span>.
 For the purposes of evaluation, we define an <dfn id=dfn-emptyexpression tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>EmptyExpression</dfn> which has no <span class=jobjref><a class="obj internalDFN" href=#dfn-tripleconstraint data-link-type=dfn id=ref-for-dfn-tripleconstraint-5>TripleConstraint</a>s</span>.
 </p>
 <p>
 <dfn id=dfn-parentshapelabels tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>parentShapeLabels</dfn> is a function from a <a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-11>shape</a> <span class=var>label</span> to the set of
 <a href=#dfn-shapeexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprlabel-7>shapeExprLabels</a> parents of the labels in shape.extends as well as their parents in the <a href=#dfn-extension-hierarchy-graph class=internalDFN data-link-type=dfn id=ref-for-dfn-extension-hierarchy-graph-2>extension
 hierarchy graph</a>.
 </p>
 <p>
 For a <a data-cite=rdf11-concepts#dfn-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-node>node</a> <span class=math>n</span>, <a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-12>shape</a> <span class=math>S</span>, <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>graph</a> <span class=math>G</span>, a ShExSchema <span class=math>Sch</span>, a <a href=#dfn-typing class=internalDFN data-link-type=dfn id=ref-for-dfn-typing-4>typing</a> <span class=math>m</span>, and a subset <span class=math>R</span> of neigh(n), <code class=function><dfn id=dfn-matchesshape tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>matchesShape</dfn>(<span class=math>n</span>, <span class=math>S</span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>m</span>, <span class=math>R</span>)</code>
 if and only if:
 </p>
 <ul>
 <li><dfn id=dfn-parents tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>parents</dfn> is the set parentShapeLabels(S). If s.extends does not exist, then parentShapeLabels(s)
 is the empty set. </li>
 <li><dfn class=math id=dfn-ncard tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>nCard</dfn> is the length of parents.</li>
 <li>
 R can be partitioned into two sets <span class=math>matched</span> and <span class=math>remainder</span>
 </li>
 <li><span class=math>matched</span> is partitioned into <code class=math>nCard+1</code> parts <code class=math>R<sub>0</sub></code>, <code class=math>R<sub>1</sub></code> ... <code class=math>R<sub>nCard</sub></code> such that
 <ul>
 <li><code class=function>matches(<span class=math>R<sub>0</sub></span>, S.tripleExpr, <span class=math>m</span>)</code>
 </li>
 <li>satisfies(n, constraint(L), G, Sch, m, matched)</li>
 <li> for every i in 1..nCard, <code class=function>matches(<span class=math>R<sub>i</sub></span>, mainShape(parents<sub>i</sub>), <span class=math>m</span>)</code>
 </li>
 <li> for every i in 1..nCard, satisfies(n, constraint(parent<sub>i</sub>), G, Sch, m, R<sub>i</sub> ∪ Q)
 where Q is the union of all the R<sub>j</sub> s.t. parent<sub>j</sub> is a parent of parent<sub>i</sub>.
 </li>
 </ul>
 </li>
 <li>
 Let <span class=label>outs</span> be the <span class=math><a href=#dfn-arcsout class=internalDFN data-link-type=dfn id=ref-for-dfn-arcsout-4>arcsOut</a></span> in <span class=math>remainder</span>:
 <code class=function><span class=math>outs</span> = <span class=math>remainder</span> ∩ <a href=#dfn-arcsout class=internalDFN data-link-type=dfn id=ref-for-dfn-arcsout-5>arcsOut</a>(<span class=math>G</span>, <span class=math>n</span>)</code>.
 </li>
 <li>
 Let <span class=label>matchables</span> be the triples in <span class=math>outs</span> whose
 <a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a> appears in a <span class=jobjref><a class="obj internalDFN" href=#dfn-tripleconstraint data-link-type=dfn id=ref-for-dfn-tripleconstraint-6>TripleConstraint</a></span> in one of the
 mainShape(parents<sub>i</sub>) or in S.expression.
 </li>
 <li>
 There is no triple in <span class=label>matchables</span> which matches a <span class=jobjref><a class="obj internalDFN" href=#dfn-tripleconstraint data-link-type=dfn id=ref-for-dfn-tripleconstraint-7>TripleConstraint</a></span> in one of the mainShape(parents<sub>i</sub>) nor one of the
 TripleConstraint in S.expression.<br>
 Let <span class=label>unmatchables</span> be the triples in <span class=math>outs</span> which are not
 in <span class=math>matchables</span>.
 <code class=function><span class=math>matchables</span> ∪ <span class=math>unmatchables</span> = <span class=math>outs</span></code>.
 </li>
 <li>
 There is no triple in <span class=math>matchables</span> whose <a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a> does not appear in <span class=param>extra</span>.
 </li>
 <li><span class=param>closed</span> is false or <span class=math>unmatchables</span> is empty.</li>
 <div class=note role=note id=issue-container-generatedID-4><div role=heading class="note-title marker" id=h-note-5 aria-level=5><span>Note</span></div><p>
 The complexity of partitioning is described briefly in the <a href=file:///C:/src/shexSpec/primer/#partition-complexity>ShEx2
 Primer</a>.
 </p></div>
 </ul>
 <p>
 <span class=label id=matches>matches</span>: asserts that a <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-4>triple expression</a> is matched by a set
 of triples that come from the neighbourhood of a node in an <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>RDF graph</a>.
 The expression
 <code>matches(<span class=math>T</span>, <span class=math>expr</span>, <span class=math>m</span>)</code>
 indicates that a set of triples <span class=math>T</span> can satisfy these rules:
 </p>
 <ul>
 <li>
 <p id=matches-semActs><span class=math>expr</span> has <span class=param>semActs</span> and <code class=function>matches(<span class=math>T</span>, <span class=math>expr</span>, <span class=math>m</span>)</code>
 by the remaining rules in this list and the evaluation of <span class=param>semActs</span> succeeds
 according to the section below on <a href=#semantic-actions>Semantic Actions</a>.</p>
 <div class=example>
 <div class=math>
 <div style=float:left>matches(</div>
 <div style=float:left>T,<br>
 <div class="inline repchoice incomplete" tabindex=0 style="border:thick solid red">
 <pre class="json nohighlight repchosen">{ "type": "OneOf", "shapeExprs": [<span class=comment>te<sub>1</sub></span>, <span class=comment>te<sub>2</sub>, …</span>], "min": 2, "max": 3,     
  "semActs": [<span class=comment>SemAct<sub>1</sub></span>, <span class=comment>SemAct<sub>2</sub>, …</span>] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">( | ) {2,3}                                                    &nbsp;
        %&lt;SemAct&gt;% %&lt;SemAct2&gt;% …</pre>
 <button title="-7, 0">json</button></div>,<br>
 m)
 </div>
 </div>
 <div style=clear:both>evaluates as:</div>
 <div class=math>
 <div style=float:left>matches(</div>
 <div style=float:left>T,<br>
 <div class="inline repchoice incomplete" tabindex=0 style="border:thick solid red">
 <pre class="json nohighlight repchosen">{ "type": "OneOf", "shapeExprs": [<span class=comment>te<sub>1</sub></span>, <span class=comment>te<sub>2</sub>, …</span>], "min": 2, "max": 3 }    &nbsp;</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">( | ) {2,3}                                                     &nbsp;</pre>
 <button title="-8, 0">json</button></div>,<br>
 m)
 </div>
 </div>
 <div style=clear:both></div>
 <span class="math function">and <a href=#semActsSatisfied>semActsSatisfied</a>(<span class="inline json">[<span class=comment>SemAct<sub>1</sub></span>, <span class=comment>SemAct<sub>2</sub>, …</span>]</span>)</span>
 </div>
 </li>
 <li>
 <p id=matches-cardinality><span class=math>expr</span> has a <dfn id=dfn-cardinality tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>cardinality</dfn> of <span class=param>min</span> and/or <span class=param>max</span> not equal to 1, where a <span class=param>max</span> of -1 is treated as unbounded, and <span class=math>T</span> can be
 partitioned into <span class=math>k</span> subsets <span class="math function">T<sub>1</sub></span>,
 <span class=math>T<sub>2</sub></span>,…<span class=math>T<sub>k</sub></span> such that <span class=math>min ≤ k ≤ max</span> and for each <span class=math>T<sub>n</sub></span>, <code class=function>matches(<span class=math>T<sub>n</sub></span>, <span class=math>expr</span>, <span class=math>m</span>)</code>
 by the remaining rules in this list.
 </p>
 <div class=example>
 <div class=math>
 <div style=float:left>matches(</div>
 <div style=float:left>T,<br>
 <div class="inline repchoice incomplete" tabindex=0 style="border:thick solid red">
 <pre class="json nohighlight repchosen">{ "type": "OneOf", "shapeExprs": [<span class=comment>te<sub>1</sub></span>, <span class=comment>te<sub>2</sub>, …</span>], "min": 2, "max": 3 }    &nbsp;</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">( | ) {2,3}                                                     &nbsp;</pre>
 <button title="-8, 0">json</button></div>,<br>
 m)
 </div>
 </div>
 <div style=clear:both>evaluates as:</div>
 <div class=math>
 <div style=float:left>Let e =&nbsp;</div>
 <div style=float:left>
 <div class="inline repchoice incomplete" tabindex=0 style="border:thick solid red">
 <pre class="json nohighlight repchosen">{ "type": "OneOf", "shapeExprs": [<span class=comment>te<sub>1</sub></span>, <span class=comment>te<sub>2</sub>, …</span>] }    &nbsp;</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">( | )                                       &nbsp;</pre>
 <button title="-8, 0">json</button></div>
 </div>
 <div style=clear:both></div>
 (<span class="math function">matches(T<sub>1</sub>, e, m)</span> and
 <span class="math function">matches(T<sub>2</sub>, e, m)</span><br>
 &nbsp;and T = T<sub>1</sub> ∪ T<sub>2</sub>)<br>
 or<br>
 (<span class="math function">matches(T<sub>1</sub>, e, m)</span> and
 <span class="math function">matches(T<sub>2</sub>, e, m)</span> and
 <span class="math function">matches(T<sub>3</sub>, e, m)</span><br>
 &nbsp;and T = T<sub>1</sub> ∪ T<sub>2</sub> ∪ T<sub>3</sub>)
 </div>
 </div>
 
 </li>
 <li>
 <p id=matches-OneOf><span class=math>expr</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-oneof data-link-type=dfn id=ref-for-dfn-oneof-2>OneOf</a></span> and there is some <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-7>shape expression</a> <span class=math>se2</span>
 in <span class=param>shapeExprs</span> such that <code class=function>matches(<span class=math>T</span>, <span class=math>se2</span>, <span class=math>m</span>)</code>.
 </p>
 <div class=example>
 <div class=math>
 <div style=float:left>matches(</div>
 <div style=float:left>T,<br>
 <div class="inline repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "OneOf", "shapeExprs": [
  { "type": "EachOf", "shapeExprs": [<span class=comment>te<sub>3</sub></span>, <span class=comment>te<sub>4</sub>, …</span>] },
  { "type": "TripleExpression", "min": 1, "max": -1,
    "predicate": "http://xmlns.com/foaf/0.1/name" }
] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                   &nbsp;
  ( ; )
  | &lt;http://xmlns.com/foaf/0.1/name&gt; . +

&nbsp;</pre>
 <button>json</button></div>,<br>
 m)
 </div>
 </div>
 <div style=clear:both>evaluates as:</div>
 <div class=math>
 <div style=float:left>matches(</div>
 <div style=float:left>T,<br>
 <div class="inline repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "EachOf", "shapeExprs": [<span class=comment>te<sub>3</sub></span>, <span class=comment>te<sub>4</sub>, …</span>] }    &nbsp;</pre>
 <pre class="shexc nohighlight rephidden sf-hidden"> ;                                         &nbsp;</pre>
 <button>json</button></div>,<br>
 m)
 </div>
 </div>
 <div style=clear:both></div>
 <div class=math>
 <div style=float:left>or matches(</div>
 <div style=float:left>T,<br>
 <div class="inline repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "TripleExpression", "min": 1, "max": -1,     
    "predicate": "http://xmlns.com/foaf/0.1/name" }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">&lt;http://xmlns.com/foaf/0.1/name&gt; . +                  &nbsp;
&nbsp;</pre>
 <button>json</button></div>,<br>
 m)
 </div>
 </div>
 </div>
 </li>
 <li>
 <p id=matches-EachOf><span class=math>expr</span> is an <span class=jobjref><a class="obj internalDFN" href=#dfn-eachof data-link-type=dfn id=ref-for-dfn-eachof-4>EachOf</a></span> and there is some partition of <span class=math>T</span> into <span class=math>T<sub>1</sub></span>, <span class=math>T<sub>2</sub></span>,… such that for every
 expression <span class=function><span class=math>expr<sub>1</sub></span>, <span class=math>expr<sub>2</sub></span>,…</span> in <span class=param>shapeExprs</span>, <code class=function>matches(<span class=math>T<sub>n</sub></span>, <span class=math>expr<sub>n</sub></span>, <span class=math>m</span>)</code>.
 </p>
 <div class=example>
 <div class=math>
 <div style=float:left>matches(</div>
 <div style=float:left>T,<br>
 <div class="inline repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "EachOf", "shapeExprs": [
  { "type": "TripleExpression",
    "predicate": "http://xmlns.com/foaf/0.1/givenName" },
  { "type": "TripleExpression",
    "predicate": "http://xmlns.com/foaf/0.1/familyName" }
] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                        &nbsp;
&lt;http://xmlns.com/foaf/0.1/givenName&gt; . ;

&lt;http://xmlns.com/foaf/0.1/familyName&gt; .

&nbsp;</pre>
 <button>json</button></div>,<br>
 m)
 </div>
 </div>
 <div style=clear:both>evaluates as:</div>
 <div class=math>
 <div style=float:left>matches(</div>
 <div style=float:left>T<sub>1</sub>,<br>
 <div class="inline repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "TripleExpression",
    "predicate": "http://xmlns.com/foaf/0.1/givenName" }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">&lt;http://xmlns.com/foaf/0.1/givenName&gt; .                &nbsp;
&nbsp;</pre>
 <button>json</button></div>,<br>
 m)
 </div>
 </div>
 <div style=clear:both></div>
 <div class=math>
 <div style=float:left>and matches(</div>
 <div style=float:left>T<sub>2</sub>,<br>
 <div class="inline repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "TripleExpression",
    "predicate": "http://xmlns.com/foaf/0.1/familyName" }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">&lt;http://xmlns.com/foaf/0.1/familyName&gt; .                &nbsp;
&nbsp;</pre>
 <button>json</button></div>,<br>
 m)
 </div>
 </div>
 <div style=clear:both></div>
 <span class=math>and T = T<sub>1</sub> ∪ T<sub>2</sub></span>
 </div>
 </li>
 <li>
 <p id=matches-TripleConstraint><span class=math>expr</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-tripleconstraint data-link-type=dfn id=ref-for-dfn-tripleconstraint-8>TripleConstraint</a></span> and:</p>
 <ul>
 <li>
 <span class=math>T</span> is a set of one triple.<br>
 Let <span class=label>t</span> be the sole triple in <span class=math>T</span>.
 </li>
 <li>
 <span class=math>t</span>'s <a class=param data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a> equals <span class=math>expr</span>'s
 <a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a>.<br>
 Let <span class=label>value</span> be <span class=math>t</span>'s subject if <span class=param>inverse</span> is true, else <span class=math>t</span>'s object.
 </li>
 <li>
 if <span class=param>inverse</span> is true, <span class=math>t</span> is in <span class=math><a href=#dfn-arcsin class=internalDFN data-link-type=dfn id=ref-for-dfn-arcsin-4>arcsIn</a></span>, else <span class=math>t</span> is in <span class=math><a href=#dfn-arcsout class=internalDFN data-link-type=dfn id=ref-for-dfn-arcsout-6>arcsOut</a></span>.
 </li>
 <li>either
 <ul>
 <li>
 <p><span class=math>expr</span> has no <span class=param>valueExpr</span></p>
 <div class=example>
 <div class=math>
 <div style=float:left>matches(</div>
 <div style=float:left>T,<br>
 <div class="inline repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "TripleExpression",
  "predicate": "http://xmlns.com/foaf/0.1/givenName" }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">&lt;http://xmlns.com/foaf/0.1/givenName&gt; . ;            &nbsp;
&nbsp;</pre>
 <button>json</button></div>,<br>
 m)
 </div>
 </div>
 <div style=clear:both>holds if
 <ul class=tight>
 <li><span class=math>T</span> has exactly one triple <span class=math>t</span>.</li>
 <li><span class=math>t</span> has the <a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a>
 "<code>http://xmlns.com/foaf/0.1/givenName</code>"</li>
 </ul>
 </div>
 </div>
 </li>
 <li>or expr.valueExpr is a shapeExprRef, then shapeExprRef.label is in m(value)
 </li>
 <li>
 <p>or expr.valueExpr is not a shapeExprRef, then <code class=function>satisfies(<span class=math>value</span>, <span class=param>valueExpr</span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>m</span>, neigh(value))</code>.
 </p>
 <div class=example>
 <div class=math>
 <div style=float:left>matches(</div>
 <div style=float:left>T,<br>
 <div class="inline repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "TripleConstraint", "inverse": true,
  "predicate": "http://purl.org/dc/elements/1.1/author",
  "valueExpr": "http://schema.example/#IssueShape" }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                       &nbsp;
^&lt;http://purl.org/dc/elements/1.1/author&gt;
        @&lt;http://schema.example/#IssueShape&gt;</pre>
 <button>json</button></div>,<br>
 m)
 </div>
 </div>
 <div style=clear:both>holds if
 <ul class=tight>
 <li><span class=math>T</span> has exactly one triple <span class=math>t</span>.</li>
 <li><span class=math>t</span> has the <a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a>
 "<code>http://purl.org/dc/elements/1.1/author</code>"</li>
 <li><span class=math>t</span> has a subject <span class=math>n2</span></li>
 <li>The schema's <a class="param internalDFN" href=#dfn-shapes data-link-type=dfn id=ref-for-dfn-shapes-6>shapes</a> maps
 "<code>http://schema.example/#IssueShape</code>" to <span class=math>se2</span></li>
 <li><span class="math function">satisfies(n2, se2, G, Sch, m)</span></li>
 </ul>
 </div>
 </div>
 
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li>
 <p id=matches-tripleExprRef>
 <span class=math>expr</span> is a <span class=jobjref><a class="obj internalDFN" href=#dfn-tripleexprref data-link-type=dfn id=ref-for-dfn-tripleexprref-5>tripleExprRef</a></span> and
 <code class=function>satisfies(<span class=math>value</span>, tripleExprWithId(<span class=param>tripleExprRef</span>), <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>Sch</span>, <span class=math>m</span>)</code>.<br>
 The <code class=function><a href=#dfn-tripleexprwithid class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprwithid-1><code>tripleExprWithId</code></a></code> function is defined in <a href=#tripleExprRef-requirement>Triple Expression Reference Requirement</a> below.
 </p>
 <div class=example>
 For the schema<br>
 <div class="inline repchoice" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#EmployeeShape",
    "type": "Shape", "expression": {
      "type": "EachOf", "expressions": [
        "http://schema.example/#nameExpr",
        { "type": "TripleConstraint",
          "predicate": "http://schema.example/#empID",
          "valueExpr": { "type": "NodeConstraint",
            "datatype": "http://www.w3.org/2001/XMLSchema#integer" } } ] } },
  { "id": "http://schema.example/#PersonShape",
    "type": "Shape", "expression": {
      "id": "http://schema.example/#nameExpr",
      "type": "TripleConstraint",
      "predicate": "http://xmlns.com/foaf/0.1/name" } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                            &nbsp;
&lt;http://schema.example/#EmployeeShape&gt; {
    &amp; ;
    &lt;http://schema.example/#empID&gt;
          &lt;http://www.w3.org/2001/XMLSchema#integer&gt;



}
&lt;http://schema.example/#PersonShape&gt; {

  
    &lt;http://xmlns.com/foaf/0.1/name&gt; . ;
}</pre>
 <button>json</button></div>
 <div style=clear:both></div>
 <div class=math>
 <div style=float:left>matches(</div>
 <div style=float:left>T,<br>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs abnf"><span class=hljs-string>"http://schema.example/#PersonShape"</span></code></pre>
 </div>,<br>
 m)
 </div>
 </div>
 <div style=clear:both>holds if
 <ul class=tight>
 <li>The schema has a shape <span class=math>se2</span> with the <span class=param>id</span>
 "<code>http://schema.example/#PersonShape</code>"</li>
 <li><span class="math function">satisfies(n, se2, G, Sch, m)</span></li>
 </ul>
 </div>
 </div>
 </li>
 </ul>
 </section>
 </section>
 <section id=import><div class=header-wrapper><h3 id=shex-import>ShEx Import</h3><a class="self-link sf-hidden" href=#import aria-label="Permalink for this Section"></a></div>
 
 <p>
 The presence of <span class=param>imports</span> requires that:
 </p>
 <ul>
 <li>each IRI in <span class=param>imports</span> be resolved and</li>
 <li>the returned representation of that IRI be interpreted as a ShEx <span class=math>S</span> and</li>
 <li>each <a class="jobjref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-19>shapeExpr</a> in <span class=math>S</span>.<span class=param>shapes</span> be in
 scope for resolving shape expression references and</li>
 <li>each <a class="jobjref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-6>tripleExpr</a> with a <a class="jobjref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-8>tripleExprLabel</a> be in scope for
 resolving triple expression references.</li>
 </ul>
 <p>
 If any imported schema imports other schemas, shape and triple expression labels from those schemas are also in
 scope.
 </p>
 <div class=example>
 <div class="example-title marker"><span>Import example 1 - Shape and Triple Expressions</span></div>
 <div class="repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen"><span class=label>schema1:</span>
{ "type": "Schema", "imports": ["http://schema.example/schema2"], "shapes": [
  { "id": "http://schema.example/#EmployeeShape",
    "type": "Shape", "expression": {
      "type": "EachOf", "expressions": [
        "http://schema.example/#nameExpr",
        { "type": "TripleConstraint",
          "predicate": "http://schema.example/#empID",
          "valueExpr": { "type": "NodeConstraint",
            "datatype": "http://www.w3.org/2001/XMLSchema#integer" } } ] } } ] }
<span class=label>schema2:</span>
{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#PersonShape",
    "type": "Shape", "expression": {
      "id": "http://schema.example/#nameExpr",
      "type": "TripleConstraint",
      "predicate": "http://xmlns.com/foaf/0.1/name" } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                       &nbsp;
&lt;http://schema.example/#EmployeeShape&gt; {
    &amp;&lt;http://schema.example/#nameExpr&gt; ;
    &lt;http://schema.example/#empID&gt;
          &lt;http://www.w3.org/2001/XMLSchema#integer&gt;




}

 {

  
    &lt;http://xmlns.com/foaf/0.1/name&gt; ;
}
&nbsp;</pre>
 <button>json</button></div>
 <p>
 Both the shape expression <code>&lt;PersonShape&gt;</code> and the triple expression
 <code>&lt;nameExpr&gt;</code> are in scope.<br>
 <span class=label>schema2</span>'s <code>&lt;nameExpr&gt;</code> is referenced in <span class=label>schema1</span>'s <code>&lt;EmployeeShape&gt;</code>
 </p>
 </div>
 <p>
 Redundant imports are treated as a single import.
 This includes circular imports:
 </p>
 <div class=example>
 <div class="example-title marker"><span>Import example 2 - Circular Import</span></div>
 <div class="repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen"><span class=label>schema1:</span>
{ "type": "Schema",
  "imports": ["http://schema.example/schema2", "http://schema.example/schema3"],
  "shapes": [
  { "id": "http://schema.example/schema1#S1",
    "type": "Shape", "expression": {
      "type": "TripleConstraint", "predicate": "http://schema.example/#p1",
      "valueExpr": "http://schema.example/schema1#S2"
    } } ] }
<span class=label>schema2:</span>
{ "type": "Schema",
  "imports": ["http://schema.example/schema3"],
  "shapes": [
  { "id": "http://schema.example/schema1#S2",
    "type": "Shape", "expression": {
      "type": "TripleConstraint", "predicate": "http://schema.example/#p2",
      "valueExpr": "http://schema.example/schema1#S3"
    } } ] }
<span class=label>schema3:</span>
{ "type": "Schema",
  "imports": ["http://schema.example/schema1"],
  "shapes": [
  { "id": "http://schema.example/schema1#S3",
    "type": "Shape", "expression": {
      "type": "TripleConstraint", "predicate": "http://schema.example/#p3",
      "valueExpr": "http://schema.example/schema1#S1", "min": 0,
    } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                       &nbsp;

IMPORT &lt;http://schema.example/schema2&gt;
IMPORT &lt;http://schema.example/schema3&gt;
&lt;http://schema.example/schema1#S1&gt; {

  &lt;http://schema.example/#p1&gt; @&lt;http://schema.example/schema1#S2&gt;




IMPORT &lt;http://schema.example/schema3&gt;

&lt;http://schema.example/schema1#S2&gt; {

  &lt;http://schema.example/#p2&gt; @&lt;http://schema.example/schema1#S3&gt;




IMPORT &lt;http://schema.example/schema1&gt;

&lt;http://schema.example/schema1#S3&gt; {

  &lt;http://schema.example/#p3&gt; @&lt;http://schema.example/schema1#S1&gt;?

&nbsp;</pre>
 <button>json</button></div>
 </div>
 <p>
 When some schema <span class=math>A</span> imports schema <span class=math>B</span>, <span class=math>B</span>'s <a class="jobjref internalDFN" href=#dfn-start data-link-type=dfn id=ref-for-dfn-start-3>start</a> member is ignored.
 </p>
 <div class=example>
 <div class="example-title marker"><span>Import example 3 - Ignored Start In Import</span></div>
 <div class="repchoice incomplete" tabindex=0>
 <pre class="json nohighlight repchosen"><span class=label>schema1:</span>
{ "type": "Schema",
  "imports": ["http://schema.example/schema2"],
  "shapes": [
  { "id": "http://schema.example/schema1#S1",
    "type": "Shape", "expression": {
      "type": "TripleConstraint", "predicate": "http://schema.example/#p1",
      "valueExpr": "http://schema.example/schema1#S2"
    } } ] }
<span class=label>schema2:</span>
{ "type": "Schema",
  <span class=lookit>"start": "http://schema.example/schema1#S2"</span>,
  "shapes": [
  { "id": "http://schema.example/schema1#S2",
    "type": "Shape", "expression": {
      "type": "TripleConstraint", "predicate": "http://schema.example/#p2"
    } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                  &nbsp;

IMPORT &lt;http://schema.example/schema2&gt;

&lt;http://schema.example/schema1#S1&gt; {

  &lt;http://schema.example/#p1&gt; @&lt;http://schema.example/schema1#S2&gt;

}




&lt;http://schema.example/schema1#S2&gt; {

  &lt;http://schema.example/#p2&gt; .
}</pre>
 <button>json</button></div>
 <p>
 <code>schema1</code> has no <code>start</code> even though it imports a schema with a <code>start</code>.
 </p>
 </div>
 <p>
 It is an error if <code>A</code> and <code>B</code> share any labels for shape expressions or triple expressions
 or if schema <code>B</code> has a <a class="jobjref internalDFN" href=#dfn-startacts data-link-type=dfn id=ref-for-dfn-startacts-3>startActs</a> member.
 </p>
 <div class=example>
 <div class="example-title marker"><span>Import example 4 - Erroneous Import</span></div>
 <div class="repchoice error incomplete" tabindex=0>
 <pre class="json nohighlight repchosen"><span class=label>schema1:</span>
{ "type": "Schema",
  "imports": ["http://schema.example/schema2"],
  "shapes": [
  { "id": "http://schema.example/schema1#S1",
    "type": "Shape", "expression": {
      "type": "TripleConstraint", "predicate": "http://schema.example/#p1",
      "valueExpr": "http://schema.example/schema1#S2"
    } } ] }
<span class=label>schema2:</span>
{ "type": "Schema",
<span class=lookit>"startActs": [ { "type": "semAct",
                 "name": "http://schema.example/schema1#A1" } ]</span>,
  "shapes": [
  { <span class=lookit>"id": "http://schema.example/schema1#S1"</span>,
    "type": "Shape", "expression": {
      "type": "TripleConstraint", "predicate": "http://schema.example/#p1",
      "valueExpr": "http://schema.example/schema1#S2"
    } },
  { "id": "http://schema.example/schema1#S2",
    "type": "Shape", "expression": {
      "type": "TripleConstraint", "predicate": "http://schema.example/#p2",
      "valueExpr": <span class=lookit>"http://schema.example/schema1#S3"</span>
    } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                  &nbsp;

IMPORT &lt;http://schema.example/schema2&gt;

&lt;http://schema.example/schema1#S1&gt; {

  &lt;http://schema.example/#p1&gt; @&lt;http://schema.example/schema1#S2&gt;

}





 {

  &lt;http://schema.example/#p1&gt; @&lt;http://schema.example/schema1#S2&gt;

}
&lt;http://schema.example/schema1#S2&gt; {

  &lt;http://schema.example/#p2&gt; 

}</pre>
 <button>json</button></div>
 <p>
 This import fails because:
 </p>
 <ul>
 <li><code>&lt;http://schema.example/schema1#S1&gt;</code> has conflicting definitions and</li>
 <li>an included schema has a <code>start</code> directive and</li>
 <li>the reference to <code>&lt;http://schema.example/schema1#S3&gt;</code> is not resolvable after imports.
 </li>
 </ul>
 </div>
 </section>
 <section id=schema-requirements><div class=header-wrapper><h3 id=schema-requirements-0>Schema Requirements</h3><a class="self-link sf-hidden" href=#schema-requirements aria-label="Permalink for this Section"></a></div>
 
 <p>
 The semantics defined above assume three structural requirements beyond those imposed by the grammar of the
 abstract syntax.
 These ensure referential integrity and eliminate logical paradoxes such as those that arrise through the use of
 negation.
 These are not constraints expressed by the schema but instead those imposed on the schema.
 </p>
 <section id=validation-requirement><div class=header-wrapper><h4 id=schema-validation-requirement>Schema Validation Requirement</h4><a class="self-link sf-hidden" href=#validation-requirement aria-label="Permalink for this Section"></a></div>
 
 <p>A <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>graph</a> <span class=math>G</span> is said to <dfn data-lt=conforms|conformance|conform id=dfn-conforms tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>conform</dfn> with
 a <a href=#dfn-shapes-schema class=internalDFN data-link-type=dfn id=ref-for-dfn-shapes-schema-4>schema</a> <span class=math>S</span> with a <a class=respec-offending-element title="Linking error: not matching `<dfn>`" id=respec-offender-linking-error-not-matching-dfn-0>ShapeMap</a> <span class=math>m</span> when:</p>
 <ol class=algorithm>
 <li>Every, <a href=#dfn-semact class=internalDFN data-link-type=dfn id=ref-for-dfn-semact-8>SemAct</a> in the <a href=#dfn-startacts class=internalDFN data-link-type=dfn id=ref-for-dfn-startacts-4>startActs</a> of <span class=math>S</span>
 has a successful evaluation of <a href=#semActsSatisfied>semActsSatisfied</a>.</li>
 <li>Every <a data-cite=rdf11-concepts#dfn-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-node>node</a> <span class=math>n</span> in <span class=math>m</span> <a href=#dfn-conforms class=internalDFN data-link-type=dfn id=ref-for-dfn-conforms-1>conforms</a> to its
 associated
 <a href=#dfn-shapeexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprref-7>shapeExprRefs</a> <span class=math>se<sub>n</sub></span> where
 for each <a href=#dfn-shapeexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprref-8>shapeExprRef</a> <span class=math>se<sub>i</sub></span> in <span class=math>se<sub>n</sub></span>:
 <ol class=algorithm>
 <li><span class=math>se<sub>i</sub></span> references a <a href=#dfn-shapeexpr class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexpr-20>ShapeExpr</a> in <a href=#dfn-shapes class=internalDFN data-link-type=dfn id=ref-for-dfn-shapes-7>shapes</a>, and</li>
 <li><code class=function><a href=#dfn-satisfies class=internalDFN data-link-type=dfn id=ref-for-dfn-satisfies-12>satisfies</a>(<span class=math>n</span>, <span class=math>se<sub>i</sub></span>, <span class=math>G</span>, <span class=math>Sch</span>, <span class=math>m</span>)</code>
 for each <a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-13>shape</a> <span class=math>se<sub>i</sub></span> in <span class=math>se<sub>n</sub></span>.</li>
 </ol>
 </li>
 </ol>
 </section>
 <section id=shapeExprRef-requirement><div class=header-wrapper><h4 id=shape-expression-reference-requirement>Shape Expression Reference Requirement</h4><a class="self-link sf-hidden" href=#shapeExprRef-requirement aria-label="Permalink for this Section"></a></div>
 
 <p>A <span class=jobjref><a href=#dfn-shapeexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprref-9>shapeExprRef</a></span> <em class=rfc2119>MUST</em> appear in the schema's <a class="param internalDFN" href=#dfn-shapes data-link-type=dfn id=ref-for-dfn-shapes-8>shapes</a>
 map (or an <a href=#import>imported schema's</a> map) and the corresponding <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-8>shape expression</a> <em class=rfc2119>MUST</em> be
 a <span class=jobjref><a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-14>Shape</a></span> with a <span class=param>shapeExpr</span>.
 The function <code>shapeExprWithId(<span class=math>shapeExprRef</span>)</code> returns the shape expression
 with an <span class=param>id</span> of <span class=math>shapeExprRef</span>.
 </p>
 <p>
 Additionally, a <span class=jobjref><a href=#dfn-shapeexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprlabel-8>shapeExprLabel</a></span> cannot refer to itself through a shape
 reference either directly or recursively.
 The <dfn id=dfn-shapeexprref-closure tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>shapeExprRef closure</dfn> of a <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-9>shape expression</a> <span class=math>se</span> is the set of
 shape expression labels used as references in <span class=math>se</span>.
 The <a href=#dfn-shapeexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprlabel-9>shapeExprLabel</a> <span class=math>sl</span> belongs to <code class=function>shapeExprRefClosure(<span class=math>se</span>)</code> if and only if:
 </p>
 <ul>
 <li>
 <span class=math>sl</span> appears as an atomic <span class=jobjref><a href=#dfn-shapeexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprref-10>shapeExprRef</a></span> in <span class=math>se</span>, or
 </li>
 <li>
 <span class=math>sl</span> belongs to <code class=function>shapeExprRefClosure(shapeExprWithId(<span class=math>sl2</span>))</code> for some
 <a href=#dfn-shapeexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprlabel-10>shapeExprLabel</a> <span class=math>sl2</span> that belongs to <code class=function>shapeExprRefClosure(<span class=math>se</span>)</code>.
 </li>
 </ul>
 <p>
 A shapes schema <em class=rfc2119>MUST NOT</em> define a shape label <span class=math>sl</span> that belongs to the shapeExprRef
 closure of its definition <code class=function>shapeExprWithId(<span class=math>sl</span>)</code>.
 </p>
 <div class=example>
 <p>
 Following are two valid shapeExprRefs:
 </p>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [ {
    "id" : "http://schema.example/#PersonShape",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://xmlns.com/foaf/0.1/name"
    }
  }, {
    "id" : "http://schema.example/#EmployeeShape",
    "type" : "ShapeAnd",
    "shapeExprs" : [ "http://schema.example/#PersonShape", {
      "type" : "Shape",
      "expression" : {
        "type" : "TripleConstraint",
        "predicate" : "http://schema.example/#employeeNumber"
      }
    } ]
  } ]
}</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                            &nbsp;

    ex:PersonShape {



      foaf:name .
    }

    ex:EmployeeShape

      @ex:PersonShape AND {



        ex:employeeNumber .
      }


&nbsp;</pre>
 <button>json</button></div>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [ {
    "id" : "http://schema.example/#PersonShape",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://xmlns.com/foaf/0.1/name"
    }
  }, {
    "id" : "http://schema.example/#EmployeeShape",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#dependent",
      "valueExpr" : "http://schema.example/#PersonShape",
      "min" : 0,
      "max" : -1
    }
  } ]
}</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                        &nbsp;

    ex:PersonShape {



      foaf:name .
    }

    ex:EmployeeShape {



      ex:dependent
        @ex:PersonShape
          *

    }

&nbsp;</pre>
 <button>json</button></div>
 <p>
 This shapeExprRef is invalid because there is no corresponding <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-10>shape expression</a>:
 </p>
 <div class="repchoice error" tabindex=0 style="border:thick solid red">
 <pre class="json nohighlight repchosen">{ "type":"Schema", "shapes": [
    { "id": "http://schema.example/#S1",
      "type":"Shape", "expression":
        "http://schema.example/#MissingShapeExpr"
} ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                &nbsp;
ex:S1 {

  &amp;ex:MissingShapeExpr
}</pre>
 <button title="-29, 0">json</button></div>
 <p>This shapeExprRef is invalid because the referenced object is a <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-5>triple expression</a> instead of a
 <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-11>shape expression</a>:
 </p>
 <div class="repchoice error" tabindex=0>
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [ {
    "id" : "http://schema.example/#CustomerShape",
    "type" : "Shape",
    "expression" : {
      "id" : "http://schema.example/#discountExpr",
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#discount"
    }
  }, {
    "id" : "http://schema.example/#EmployeeShape",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#contactFor",
      "valueExpr" : "http://schema.example/#discountExpr"
    }
  } ]
}</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                        &nbsp;

    ex:CustomerShape {


      $ex:discountExpr

        ex:discount .
    }

    ex:EmployeeShape {



      ex:contactFor
        @ex:discountExpr
    }

&nbsp;</pre>
 <button>json</button></div>
 <p>These shapeExprRefs are invalid because they recursively refer to each other.</p>
 <div class="repchoice error" tabindex=0>
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [ {
    "id" : "http://schema.example/#PersonShape",
    "type" : "ShapeAnd",
    "shapeExprs" : [ "http://schema.example/#EmployeeShape", {
      "type" : "Shape",
      "expression" : {
        "type" : "TripleConstraint",
        "predicate" : "http://xmlns.com/foaf/0.1/name"
      }
    } ]
  }, {
    "id" : "http://schema.example/#EmployeeShape",
    "type" : "ShapeAnd",
    "shapeExprs" : [ "http://schema.example/#PersonShape", {
      "type" : "Shape",
      "expression" : {
        "type" : "TripleConstraint",
        "predicate" : "http://schema.example/#employeeNumber"
      }
    } ]
  } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                             &nbsp;

    ex:PersonShape

      @ex:EmployeeShape AND {



        foaf:name .
      }


    ex:EmployeeShape

      @ex:PersonShape AND {



        ex:employeeNumber .
    }

&nbsp;</pre>
 <button>json</button></div>
 </div>
 </section>
 <section id=tripleExprRef-requirement><div class=header-wrapper><h4 id=triple-expression-reference-requirement>Triple Expression Reference Requirement</h4><a class="self-link sf-hidden" href=#tripleExprRef-requirement aria-label="Permalink for this Section"></a></div>
 
 <p>An <span class=jobjref><a href=#dfn-tripleexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprref-6>tripleExprRef</a></span> <em class=rfc2119>MUST</em> identify a <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-6>triple expression</a> in the schema.
 The function <code><dfn id=dfn-tripleexprwithid tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>tripleExprWithId</dfn>(<span class=math>tripleExprRef</span>)</code> returns the
 <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-7>triple expression</a> with the id <span class=math>tripleExprRef</span>.
 </p>
 <p>
 Additionally, a <span class=jobjref><a href=#dfn-tripleexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprlabel-9>tripleExprLabel</a></span> cannot refer to itself through a triple
 expression reference either directly or recursively.
 The <dfn id=dfn-tripleexprref-closure tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>tripleExprRef closure</dfn> of a <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-8>triple expression</a> <span class=math>te</span> is the set of
 triple expression labels used as references in <span class=math>te</span>.
 The <a href=#dfn-tripleexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprlabel-10>tripleExprLabel</a> <span class=math>tl</span> belongs to <code class=function>tripleExprRefClosure(<span class=math>te</span>)</code> if and only if:
 </p>
 <ul>
 <li>
 <span class=math>tl</span> appears as an atomic <span class=jobjref><a href=#dfn-tripleexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprref-7>tripleExprRef</a></span> in <span class=math>te</span>, or
 </li>
 <li>
 <span class=math>tl</span> belongs to <code class=function>tripleExprRefClosure(tripleExprWithId(<span class=math>tl2</span>))</code> for some
 <a href=#dfn-tripleexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprlabel-11>tripleExprLabel</a> <span class=math>tl2</span> that belongs to <code class=function>tripleExprRefClosure(<span class=math>te</span>)</code>.
 </li>
 </ul>
 <p>
 A shapes schema <em class=rfc2119>MUST NOT</em> define a triple expression label <span class=math>tl</span> that belongs to the
 tripleExprRef closure of its definition <code class=function>tripleExprWithId(<span class=math>tl</span>)</code>.
 </p>
 <div class=example>
 <p>
 Following is a valid <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-9>triple expression</a> reference:
 </p>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type":"Schema", "shapes": [
    { "id": "http://schema.example/#PersonShape",
      "type":"Shape", "expression": {
        "id": "http://schema.example/#nameExpr",
        "type": "TripleConstraint",
        "predicate": "http://xmlns.com/foaf/0.1/name"
      } },
    { "id": "http://schema.example/#EmployeeShape",
      "type":"Shape", "expression": { "type":"EachOf", "expressions": [
        "http://schema.example/#nameExpr",
        { "type": "TripleConstraint",
          "predicate": "http://schema.example/#employeeNumber" }
] } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                      &nbsp;
    ex:PersonShape {
      $ex:nameExpr foaf:name .
    }



    ex:EmployeeShape {
      &amp;ex:nameExpr ;
      ex:employeeNumber .
    }

&nbsp;</pre>
 <button>json</button></div>
 <p>
 This <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-10>triple expression</a> reference is invalid because there is no corresponding triple expression:
 </p>
 <div class="repchoice error" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type":"Schema", "shapes": [
    { "id": "http://schema.example/#S1",
      "type":"Shape", "expression":
        "http://schema.example/#missingTripleExpr"
} ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                 &nbsp;
    ex:S1 {
      &amp;ex:missingTripleExpr
    }
&nbsp;</pre>
 <button>json</button></div>
 <p>This triple expression reference is invalid because the referenced object is a <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-12>shape expression</a>
 instead of a triple expression:</p>
 <div class="repchoice error incomplete" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type":"Schema", "shapes": [
    { "id": "http://schema.example/#CustomerShape",
      "type":"ShapeAnd", "shapeExprs": [ <span class=comment>…</span> ]
    },
    { "id": "http://schema.example/#PreferredCustomerShape",
      "type":"Shape", "expression": { "type":"EachOf", "expressions": [
        "http://schema.example/#CustomerShape",
        { "type": "TripleConstraint",
          "predicate": "http://schema.example/#discount" }
] } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                      &nbsp;
    ex:CustomerShape {
      ; 
    }
    ex:PreferredCustomerShape {
      &amp;ex:CustomerShape ;
      ex:discount .
    }

&nbsp;</pre>
 <button>json</button></div>
 </div>
 </section>
 <section id=shapeExprRef-non-abstract-shape-requirement><div class=header-wrapper><h4 id=shapeexprref-non-abstract-shape-requirement>shapeExprRef non-abstract shape requirement</h4><a class="self-link sf-hidden" href=#shapeExprRef-non-abstract-shape-requirement aria-label="Permalink for this Section"></a></div>
 
 <p>
 Every <a href=#dfn-shapeexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprref-11>shapeExprRef</a> <var>referer</var> <em class=rfc2119>MUST</em> identify at least one non-abstract shape.
 </p>
 <div class=example>
 <p>
 Following is a valid example with a shape with a <a href=#dfn-shapeexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprref-12>shapeExprRef</a> that references an abstract shape with
 two non-abstract descendants:
 </p>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [ {
    "id": "http://schema.example/#IssueShape",
    "type": "Shape",
    "expression": {
      "type": "TripleConstraint",
      "predicate": "http://schema.example/#approvedBy",
      "valueExpr": "http://schema.example/#EngineerShape"
    }
  },  {
    "id" : "http://schema.example/#EntityShape",
    "type" : "Shape", "abstract": true,
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#entityId"
    }
  },  {
    "id" : "http://schema.example/#PersonShape",
    "type" : "Shape",
    "extends" : [ "http://schema.example/#EntityShape" ],
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://xmlns.com/foaf/0.1/name"
    }
  }, {
    "id" : "http://schema.example/#EmployeeShape",
    "type" : "Shape",
    "extends" : [ "http://schema.example/#PersonShape" ],
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#employeeNumber"
    }
} ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                          &nbsp;

    ex:IssueShape {



      ex:approvedBy
          @ex:EntityShape
    }

    ABSTRACT ex:EntityShape {



      ex:entityId .
    }

    ex:PersonShape EXTENDS @ex:EntityShape {




      foaf:name .
    }

    ex:EmployeeShape EXTENDS @ex:EntityShape {




      ex:employeeNumber .
    }
&nbsp;</pre>
 <button>json</button></div>
 <p>
 This <a href=#dfn-shapeexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprref-13>shapeExprRef</a> is invalid because it references only abstract descendants:
 </p>
 <div class="repchoice error" tabindex=0>
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [ {
    "id": "http://schema.example/#IssueShape",
    "type": "Shape",
    "expression": {
      "type": "TripleConstraint",
      "predicate": "http://schema.example/#approvedBy",
      "valueExpr": "http://schema.example/#EngineerShape"
    }
  },  {
    "id" : "http://schema.example/#EntityShape",
    "type" : "Shape", "abstract": true,
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#entityId"
    }
  },  {
    "id" : "http://schema.example/#PersonShape",
    "type" : "Shape", "abstract": true,
    "extends" : [ "http://schema.example/#EntityShape" ],
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://xmlns.com/foaf/0.1/name"
    }
  }, {
    "id" : "http://schema.example/#EmployeeShape",
    "type" : "Shape", "abstract": true,
    "extends" : [ "http://schema.example/#PersonShape" ],
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#employeeNumber"
    }
} ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                          &nbsp;

    ex:IssueShape {



      ex:approvedBy
          @ex:EntityShape
    }

    ABSTRACT ex:EntityShape {



      ex:entityId .
    }

    ABSTRACT ex:PersonShape EXTENDS @ex:EntityShape {




      foaf:name .
    }

    ABSTRACT ex:EmployeeShape EXTENDS @ex:EntityShape {




      ex:employeeNumber .
    }
&nbsp;</pre>
 <button>json</button></div>
 </div>
 </section>
 <section id=negation-requirement><div class=header-wrapper><h4 id=negation-requirement-0>Negation Requirement</h4><a class="self-link sf-hidden" href=#negation-requirement aria-label="Permalink for this Section"></a></div>
 
 <p>
 A schema <em class=rfc2119>MUST NOT</em> contain any <a href=#dfn-shapeexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprlabel-11>shapeExprLabel</a> that has a <a href=#dfn-negated-reference class=internalDFN data-link-type=dfn id=ref-for-dfn-negated-reference-1>negated reference</a> to itself, either
 directly or transitively.
 This is formalized by the requirement that the <a href=#dfn-hierarchy-and-dependency-graph class=internalDFN data-link-type=dfn id=ref-for-dfn-hierarchy-and-dependency-graph-2>hierarchy and dependency graph</a> of a schema <em class=rfc2119>MUST NOT</em> have
 a cycle that traverses some <a href=#dfn-negated-reference class=internalDFN data-link-type=dfn id=ref-for-dfn-negated-reference-2>negated reference</a>.
 </p>
 <p class=leadup>
 The set of <dfn id=dfn-atomic-shapes tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>atomic shapes</dfn> of a <a href=#dfn-shapeexpr class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexpr-21>shapeExpr</a> <span class=math>se</span> contains a <a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-15>Shape</a>
 <span class=math>s</span> if <span class=math>s</span> or its <span class=path>id</span> appears either
 directly or by <a href=#dfn-shapeexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprref-14>shapeExprRef</a> in <span class=math>se</span>.
 That is, <span class=math>s</span> belongs to <code class=function>atomicShapes(<span class=math>se</span>)</code> if and only if
 </p>
 <ul class="followup leadup">
 <li>
 <span class=math>s</span> appears as an atomic shape in <span class=math>se</span>, or
 </li>
 <li>
 <span class=math>sid</span> is the <span class=param>id</span> of <span class=math>s</span> and <span class=math>sid</span> appears as an atomic shapeExprRef in <span class=math>se</span>, or
 </li>
 <li>
 <span class=math>s</span> belongs to <code>atomicShapes(se2)</code> for some shape expression <span class=math>se2</span> such that the <span class=param>id</span> of <span class=math>se2</span>
 belongs to the shapeExprRefClosure of <span class=math>se</span>.
 </li>
 
 </ul>
 
 <p class=leadup>The set of <dfn id=dfn-atomictripleconstraints tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>atomicTripleConstraints</dfn> of a <a href=#dfn-tripleexpr class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexpr-7>tripleExpr</a> <span class=math>te</span> includes every <a href=#dfn-tripleconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleconstraint-9>TripleConstraint</a> <span class=math>tc</span> that appears
 directly or by <a href=#dfn-tripleexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprref-8>tripleExprRef</a> in <span class=math>te</span>.
 That is, <span class=math>tc</span> belongs to <code class=function><a href=#dfn-atomictripleconstraints class=internalDFN data-link-type=dfn id=ref-for-dfn-atomictripleconstraints-1>atomicTripleConstraints</a>(<span class=math>te</span>)</code> if and only if:
 </p>
 <ul>
 <li>
 <span class=math>tc</span> is an atomic <a href=#dfn-tripleconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleconstraint-10>TripleConstraint</a> in <span class=math>te</span>, or
 </li>
 <li>
 <span class=math>te</span> is an atomic <a href=#dfn-tripleconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleconstraint-11>TripleConstraint</a> in <code class=function>tripleExprWithId(<span class=math>tl</span>)</code> for some <a href=#dfn-tripleexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprlabel-12>tripleExprLabel</a>
 <span class=math>tl</span> that belongs to <code class=function>tripleExprRefClosure(<span class=math>te</span>)</code>.
 </li>
 
 </ul>
 
 <p>
 The shape expression s1 has a reference to the shape label l2 if
 </p>
 <ul>
 <li>there is a shape sh in atomicShapes(s1) and</li>
 <li>there is a triple constraint tc in atomicTripleConstraints(sh) and </li>
 <li>tc.valueExpr is present and </li>
 <li>tc.valueExpr contains a shape reference to l2.</li>
 </ul>
 
 
 <p class=leadup>
 The reference from <span class=math>s1</span> to <span class=math>l2</span> is a <dfn id=dfn-negated-reference tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>negated
 reference</dfn> if the reference to l2 appears under an odd number of ShapeNot in tc.valueExpr.</p>
 
 
 <p>
 The <dfn id=dfn-hierarchy-and-dependency-graph tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>hierarchy and dependency graph</dfn> of a schema is the graph whose nodes are the shape labels that
 appear in the shape declarations of the schema, and that has an edge from l1 to l2 if:
 <ul>
 <li>the definition of l1 has a reference to l2, or</li>
 <li>there is an edge from l1 to l2 in the hieararchy graph, or</li>
 <li>there is an edge from l2 to l1 in the hieararchy graph.</li>
 </ul>
 The edge from l1 to l2 is negative if the definition of l1 has a negative reference to l2, otherwise the edge is
 positive.
 <p></p>
 
 <div class=example>
 <div class=header-wrapper><h4 class=followup id=examples-with-shapenot>Examples with <span class=jobjref><a href=#dfn-shapenot class=internalDFN data-link-type=dfn id=ref-for-dfn-shapenot-5>ShapeNot</a></span></h4><a class="self-link sf-hidden" href=#examples-with-shapenot aria-label="Permalink for this Section"></a></div>
 <p>
 This negated self-reference violates the negation requirement.
 </p>
 <div class="repchoice error" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
    { "id": "http://schema.example/#S",
      "type": "Shape",
      "expression": { "type": "TripleConstraint",
        "predicate": "http://schema.example/#p",
        "valueExpr": { "type": <span class=lookit>"ShapeNot"</span>,
          "shapeExpr": "http://schema.example/#S" } } }
  ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                      &nbsp;
ex:S {ex:p  @ex:S}





&nbsp;</pre>
 <button>json</button></div>
 <p>
 This indirect self-reference does not violate the negation requirement.
 </p>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema",
  "shapes": [
    { "id": "http://schema.example/#US",
      "type": "Shape",
      "expression": { "type": "TripleConstraint",
        "predicate": "http://schema.example/#Up",
        "valueExpr": { "type": "ShapeNot",
          "shapeExpr": "http://schema.example/#UT" } } },
    { "id": "http://schema.example/#UT",
      "type": "Shape",
      "expression": { "type": "TripleConstraint",
        "predicate": "http://schema.example/#Uq",
        "valueExpr": "http://schema.example/#US" } }
  ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                        &nbsp;
ex:US {ex:Up NOT @ex:UT} 






ex:UT { ex:Uq @ex:US} 




&nbsp;</pre>
 <button>json</button></div>
 <p>
 This negated, indirect self-reference violates the negation requirement.
 </p>
 <div class="repchoice error" tabindex=0>
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [ {
    "id" : "http://schema.example/#S",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#p",
      "valueExpr" : {
        "type" : "ShapeNot",
        "shapeExpr" : "http://schema.example/#T"
      }
    }
  } , {
    "id" : "http://schema.example/#T",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#q",
      "valueExpr" : "http://schema.example/#S"
    }
  } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                               &nbsp;

    ex:S {



      ex:p 

        NOT
          @ex:T
    } 


    ex:T {



      ex:q
        @ex:S
    } 
&nbsp;</pre>
 <button>json</button></div>
 <p>
 This is a direct, negated self-reference of the shape with id ex:T and violates the negation requirement.
 </p>
 <div class="repchoice error" tabindex=0>
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [ {
    "id" : "http://schema.example/#T",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#p",
      "valueExpr" : "http://schema.example/#S"
    }
  } , {
    "id" : "http://schema.example/#S",
    "type" : "ShapeAnd",
    "shapeExprs" : [ {
      "type" : "ShapeNot",
      "shapeExpr" : "http://schema.example/#T"
    }, "http://schema.example/#U" ]
  }, {
    "id" : "http://schema.example/#U",
    "type" : "Shape"
  } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                              &nbsp;

    ex:T {



      ex:p
        @ex:S
    }

    ex:S


     (NOT
        @ex:T)
     AND @ex:U

     ex:U .

&nbsp;</pre>
 <button>json</button></div>
 <p>
 This doubly-negated self-reference of ex:T does not violate the negation requirement.
 </p>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [{
    "id" : "http://schema.example/#T",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#p",
      "valueExpr" : "http://schema.example/#S"
    }
  } , {
    "id" : "http://schema.example/#S",
    "type" : "ShapeNot",
    "shapeExpr" : {
      "type" : "ShapeAnd",
      "shapeExprs" : [ {
        "type" : "ShapeNot",
        "shapeExpr" : "http://schema.example/#T"
      }, "http://schema.example/#U" ]
    }
  }, {
    "id" : "http://schema.example/#U",
    "type" : "Shape"
  } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                               &nbsp;

    ex:T {



      ex:p
        @ex:S
    }

    ex:S
      NOT


                     (
                       (NOT
                          @ex:T)
                       AND @ex:U )


    ex:U .

&nbsp;</pre>
 <button>json</button></div>
 <p>
 There is a cycle of negated references between the shape that defines ex:T and the shape that defines ex:U,
 so the negation requirement is violated.
 </p>
 <div class="repchoice error" tabindex=0>
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [{
    "id" : "http://schema.example/#T",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#p",
      "valueExpr" : {
        "type" : "ShapeNot",
        "shapeExpr" : "http://schema.example/#S"
      }
    }
  } , {
    "id" : "http://schema.example/#U",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#q",
      "valueExpr" : "http://schema.example/#S"
    }
  }, {
    "id" : "http://schema.example/#S",
    "type" : "ShapeAnd",
    "shapeExprs" : [ {
      "type" : "ShapeNot",
      "shapeExpr" : "http://schema.example/#T"
    }, "http://schema.example/#U" ]
  } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                               &nbsp;

    ex:T {



      ex:p

        NOT
          @ex:S
    }


    ex:U {



      ex:q
        @ex:S
    }

    ex:S


      (NOT
         @ex:T)
      AND @ex:U
&nbsp;</pre>
 <button>json</button></div>
 <p>
 This satisfies the negation requirement, as ex:U does not refer to ex:T (compared to the previous example).
 </p>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{"type" : "Schema",
  "shapes" : [{
    "id" : "http://schema.example/#T",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#p",
      "valueExpr" : {
        "type" : "ShapeNot",
        "shapeExpr" : "http://schema.example/#S"
      }
    }
  } , {
    "id" : "http://schema.example/#U",
    "type" : "Shape",
    "expression" : {
      "type" : "TripleConstraint",
      "predicate" : "http://schema.example/#q"
    }
  }, {
    "id" : "http://schema.example/#S",
    "type" : "ShapeAnd",
    "shapeExprs" : [ {
      "type" : "ShapeNot",
      "shapeExpr" : "http://schema.example/#T"
    }, "http://schema.example/#U" ]
  } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                               &nbsp;

    ex:T {



      ex:p
        NOT

          @ex:S
    }


    ex:U {



      ex:q .
    }

    ex:S


      (NOT
         @ex:T)
    AND @ex:U
&nbsp;</pre>
 <button>json</button></div>
 </div>
 <div class=example>
 <div class=header-wrapper><h4 class=followup id=examples-with-shape-extra-predicate>Examples with <span class=jobjref><a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-16>Shape</a></span><span class=param>.extra</span>
 predicate</h4><a class="self-link sf-hidden" href=#examples-with-shape-extra-predicate aria-label="Permalink for this Section"></a></div>
 <p>
 This self-reference on a <a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a> designated as <span class=param>extra</span> violates the
 negation requirement:
 </p>
 <div class="repchoice error" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
    { "id": "http://schema.example/#S",
      "type": "Shape",
      "extra": [ <span class=lookit>"http://schema.example/#p"</span> ], "expression":
      { "type": "TripleConstraint",
        "predicate": <span class=lookit>"http://schema.example/#p"</span>,
        "valueExpr": "http://schema.example/#S"
} } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                           &nbsp;
  ex:S EXTRA ex:p {
    ex:p @ex:S
  }



&nbsp;</pre>
 <button>json</button></div>
 <p>
 The same shape with a negated self-reference still violates the negation requirement because the reference
 occurs with a <span class=jobjref><a href=#dfn-shapenot class=internalDFN data-link-type=dfn id=ref-for-dfn-shapenot-6>ShapeNot</a></span>:
 </p>
 <div class="repchoice error" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
    { "id": "http://schema.example/#S",
      "type": "Shape",
      "extra": [ "http://schema.example/#p" ],
      "expression": {
        "type": "TripleConstraint",
        "predicate": "http://schema.example/#p",
        "valueExpr": {
          "type": <span class=lookit>"ShapeNot"</span>, "shapeExpr": "http://schema.example/#S"
} } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                    &nbsp;
    ex:S EXTRA ex:p {
      ex:p NOT @ex:S
    }





&nbsp;</pre>
 <button>json</button></div>
 </div>
 </section>
 <section id=acyclic-extension-requirement><div class=header-wrapper><h4 id=acyclic-extension-requirement-0>Acyclic Extension Requirement</h4><a class="self-link sf-hidden" href=#acyclic-extension-requirement aria-label="Permalink for this Section"></a></div>
 
 <p>The <a href=#dfn-extension-hierarchy-graph class=internalDFN data-link-type=dfn id=ref-for-dfn-extension-hierarchy-graph-3>extension hierarchy graph</a> must be acyclic.</p>
 </section>
 <section id=extension-coherence-requirement><div class=header-wrapper><h4 id=extension-coherence>Extension Coherence</h4><a class="self-link sf-hidden" href=#extension-coherence-requirement aria-label="Permalink for this Section"></a></div>
 
 <p>
 A <a href=#dfn-shapedecl class=internalDFN data-link-type=dfn id=ref-for-dfn-shapedecl-5>shapeDecl</a> <span class=var>D</span> with label <span class=var>L</span> and <span class=math>D.shapeExpr</span> <span class=var>se</span> is called <dfn id=dfn-extendable tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>extendable</dfn> if it satisfies
 all of:
 </p>
 <ul>
 <li>it is of the form either <code>s</code> or <span class=math>ShapeAnd(s, se)</span>, where <code>s</code> is a Shape and <span class=math>se</span> is a shapeExpr. In this case we denote <code>s</code> as `<dfn id=dfn-mainshape tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>mainShape</dfn>(L)` and <span class=math>se</span> as <code>constraint(L)</code>:</li>
 <li><code>def(L')</code> is an extendable shape expression for every <code>L'</code> in <code>s.extends</code> (note that this condition is
 trivially met when <code>s.extends</code> is empty),</li>
 <li>the set `predicates(<span class=var>se</span>)<code> is included the union of the sets
 </code>predicates(<a href=#dfn-mainshape class=internalDFN data-link-type=dfn id=ref-for-dfn-mainshape-1>mainShape</a>(L'))<code> for all shape expression names </code>L'<code> that belong to
 </code><a href=#dfn-parentshapelabels class=internalDFN data-link-type=dfn id=ref-for-dfn-parentshapelabels-1>parentShapeLabels</a>(L)`. </li>
 </ul>
 <p>
 <b>Schema requirement</b> EXTENDS appears only in extendable shape expressions. That is, for every Shape <code>s</code>
 that appears in the schema, if <code>s.extends</code> is non empty and for every shapeExpr <span class=math>se</span>
 in the schema, if <span class=var>s</span> belongs to <span class=math><a href=#dfn-nestedshapes class=internalDFN data-link-type=dfn id=ref-for-dfn-nestedshapes-10>nestedShapes</a>(<span class=var>se</span>)</span>, then <span class=math>se</span> is an extendable shape expression.
 </p>
 </section>
 </section>
 <section id=semantic-actions><div class=header-wrapper><h3 id=semantic-actions-0>Semantic Actions</h3><a class="self-link sf-hidden" href=#semantic-actions aria-label="Permalink for this Section"></a></div>
 
 <p>
 Semantic actions serve as an extension point for Shape Expressions.
 They appear in lists in <span class=jobjref><a href=#dfn-shapes-schema class=internalDFN data-link-type=dfn id=ref-for-dfn-shapes-schema-5>Schema</a></span>'s <span class=param>startActs</span> and
 <span class=jobjref><a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-17>Shape</a></span>, <span class=jobjref><a href=#dfn-oneof class=internalDFN data-link-type=dfn id=ref-for-dfn-oneof-3>OneOf</a></span>, <span class=jobjref><a href=#dfn-eachof class=internalDFN data-link-type=dfn id=ref-for-dfn-eachof-5>EachOf</a></span> and <span class=jobjref><a href=#dfn-tripleconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleconstraint-12>TripleConstraint</a></span>'s <span class=param>semActs</span>.
 </p>
 <p>
 A semantic action is a tuple of an identifier and some optional code:
 </p>
 <div class=shexjTable>
 <table class=shexj>
 <tbody><tr class=obj>
 <th class=obj><dfn id=dfn-semact tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>SemAct</dfn></th>
 <td>{</td>
 <td><span class=param>name</span>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-12>IRIREF</a> <span class=param>code</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-9>STRING</a>? }</td>
 </tr>
 </table>
 </div>
 <section id=semantic-actions-semantics><div class=header-wrapper><h4 id=semantics-2>Semantics</h4><a class="self-link sf-hidden" href=#semantic-actions-semantics aria-label="Permalink for this Section"></a></div>
 
 <p>
 The evaluation <span id=semActsSatisfied class=label>semActsSatisfied</span> on a list of <span class=jobjref><a href=#dfn-semact class=internalDFN data-link-type=dfn id=ref-for-dfn-semact-9>SemAct</a></span>s returns success or failure.
 The evaluation of an individual <span class=jobjref><a href=#dfn-semact class=internalDFN data-link-type=dfn id=ref-for-dfn-semact-10>SemAct</a></span> is implementation-dependent.
 </p>
 </section>
 <section id=semantic-actions-uses><div class=header-wrapper><h4 id=use-informative>Use - informative</h4><a class="self-link sf-hidden" href=#semantic-actions-uses aria-label="Permalink for this Section"></a></div>
 
 <p>
 A practical evaluation of a <span class=jobjref><a href=#dfn-semact class=internalDFN data-link-type=dfn id=ref-for-dfn-semact-11>SemAct</a></span> will provide access to some context.
 For instance, the <a href=http://shex.io/extensions/Test/#def>http://shex.io/extensions/Test/</a> extension
 requires access to the subject, <a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a> and object of a triple matching a <span class=jobjref><a href=#dfn-tripleconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleconstraint-13>TripleConstraint</a></span>.
 These are used in a <code>print</code> function.
 </p>
 <div class=example>
 <div class="example-title marker"><span>Semantic Actions example 1</span></div>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
    { "id": "http://schema.example/#S1",
      "type": "Shape", "expression": {
        "type": "TripleConstraint", "predicate": "http://schema.example/#p1",
        "min": 1, "max": -1,
        "semActs": [
          { "type": "SemAct", "code": " print(s) ",
            "name": "http://shex.io/extensions/Test/" },
          { "type": "SemAct", "code": " print(o) ",
            "name": "http://shex.io/extensions/Test/" } ] } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                            &nbsp;
    ex:S1 {
      ex:p1 .+ %Test:{ print(s) %} %Test:{ print(o) %}
    }





&nbsp;</pre>
 <button>json</button></div>
 <pre class=data aria-busy=false><code class=hljs>&lt;http://a.example/n1&gt; &lt;http://a.example/p1&gt; &lt;http://a.example/o1&gt; .
&lt;http://a.example/n2&gt; &lt;http://a.example/p1&gt; "a", "b" .
&lt;http://a.example/n3&gt; &lt;http://a.example/p2&gt; &lt;http://a.example/o2&gt; .</code></pre>
 <table>
 <tbody><tr>
 <th class=data>node</th>
 <th class=schema>shape</th>
 <th>result</th>
 <th>print arguments</th>
 </tr>
 <tr class=pass>
 <td>&lt;n1&gt;</td>
 <td>&lt;S1&gt;</td>
 <td>pass</td>
 <td>http://a.example/s1<br>http://a.example/o1</td>
 </tr>
 <tr class=pass>
 <td>&lt;n2&gt;</td>
 <td>&lt;S1&gt;</td>
 <td>pass</td>
 <td>http://a.example/s1<br>"a"<br>http://a.example/s1<br>"b"</td>
 </tr>
 <tr class=fail>
 <td>&lt;n3&gt;</td>
 <td>&lt;S1&gt;</td>
 <td>fail</td>
 <td class="noreason sf-hidden"></td>
 </tr>
 </table>
 </div>
 </section>
 </section>
 <section id=annotations><div class=header-wrapper><h3 id=annotations-0>Annotations</h3><a class="self-link sf-hidden" href=#annotations aria-label="Permalink for this Section"></a></div>
 
 <p>
 Annotations provide a format-independent way to provide additional information about elements in a schema.
 They appear in lists in <span class=jobjref><a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-18>Shape</a></span>, <span class=jobjref><a href=#dfn-oneof class=internalDFN data-link-type=dfn id=ref-for-dfn-oneof-4>OneOf</a></span>,
 <span class=jobjref><a href=#dfn-eachof class=internalDFN data-link-type=dfn id=ref-for-dfn-eachof-6>EachOf</a></span> and <span class=jobjref><a href=#dfn-tripleconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleconstraint-14>TripleConstraint</a></span>'s <span class=param>annotations</span>.
 </p>
 <div class=shexjTable>
 <table class=shexj>
 <tbody><tr class=obj>
 <th class=obj><dfn id=dfn-annotation tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>Annotation</dfn></th>
 <td>{</td>
 <td><span class=param><a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a></span>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-13>IRIREF</a> <span class=param>object</span>:<a class="nobref internalDFN" href=#dfn-objectvalue data-link-type=dfn id=ref-for-dfn-objectvalue-3>objectValue</a> }</td>
 </tr>
 </table>
 </div>
 <section id=annotations-semantics><div class=header-wrapper><h4 id=semantics-informative>Semantics - informative</h4><a class="self-link sf-hidden" href=#annotations-semantics aria-label="Permalink for this Section"></a></div>
 
 <p>
 Annotations do not affect whether a node conforms to some shape.
 Because they are part of the structure of the schema, they can be parsed in one ShEx format and emitted in
 that format or another.
 </p>
 <div class=example>
 <div class="example-title marker"><span>Annotations example 1</span></div>
 <div class=repchoice tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
    { "id": "http://schema.example/#IssueShape",
      "type": "Shape", "expression": {
        "type": "TripleConstraint",
        "predicate": "http://schema.example/#status",
        "annotations": [
           { "type": "Annotation",
             "predicate": "http://www.w3.org/2000/01/rdf-schema#comment",
             "object": {"value": "Represents reported software issues."} },
           { "type": "Annotation",
             "predicate": "http://www.w3.org/2000/01/rdf-schema#label",
             "object": {"value": "software issue"} } ] } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                          &nbsp;
    ex:IssueShape {
      ex:status .
          // rdfs:comment "Represents reported software issues."
          // rdfs:label "software issue"
    }





&nbsp;</pre>
 <button>json</button></div>
 </div>
 </section>
 </section>
 <section id=validation-examples><div class=header-wrapper><h3 id=validation-examples-0>Validation Examples</h3><a class="self-link sf-hidden" href=#validation-examples aria-label="Permalink for this Section"></a></div>
 
 <p>
 The following examples demonstrate proofs for validations in the form of a nested list of invocations of the
 evaluation functions defined above.
 </p>
 <section id=example-simple><div class=header-wrapper><h4 id=simple-examples>Simple Examples</h4><a class="self-link sf-hidden" href=#example-simple aria-label="Permalink for this Section"></a></div>
 
 
 <div class=example>
 <span class=exsec>Schema:</span><br>
 <pre class=line-labels aria-busy=false><code class=hljs>S1

nc1</code></pre>
 <div class="inline repchoice" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
    { "id": "http://schema.example/#IntConstraint",
      "type": "NodeConstraint",
      "datatype": "http://www.w3.org/2001/XMLSchema#integer"
    } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                           &nbsp;
ex:IntConstraint

      xsd:integer
&nbsp;</pre>
 <button>json</button></div>
 <div style=clear:both></div>
 
 <p>
 Here the shape identified by <code>http://schema.example/#IntConstraint</code> is a <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-13>shape expression</a>
 consisting of a single <span class=jobjref><a class="obj internalDFN" href=#dfn-nodeconstraint data-link-type=dfn id=ref-for-dfn-nodeconstraint-8>NodeConstraint</a></span>.
 Per <a href=#shape-expression-semantics>Shape Expression Semantics</a>,
 "30"^^&lt;http://www.w3.org/2001/XMLSchema#integer&gt; satisfies <span class="lineno schema">IntConstraint</span>.
 </p>
 <p>
 This document uses this nested tree convention to indicate that the dependency of an evaluation on those
 nested inside it.
 Nesting is expressed as indentation.
 Here, the evaluation of <span class="math function">satisfies NodeConstraint ("30"^^xsd:integer, S1, G,
 m)</span> depends on <span class="math function">satisfies2 NodeConstraint ("30"^^xsd:integer, S1)</span>.
 </p>
 <div class=validation><span>Validate</span>
 <span>"30"^^&lt;http://www.w3.org/2001/XMLSchema#integer&gt;</span> as <span class=hljs-string>IntConstraint</span>:
 </div>
 <ul class="trace followup">
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("30"^^xsd:integer, <span class="lineno schema">S1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("30"^^xsd:integer, <span class="lineno schema">S1</span>)</li>
 </ul>
 </li>
 </ul>
 </div>
 <p class=leadup>
 Validating a shape requires evaluating it's <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-11>triple expression</a> as well as the variables and functions
 <span class=math><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-4>neigh</a>(G, n)</span>, <span class=math>matched</span>, <span class=math>remainder</span>, <span class=math>outs</span>, <span class=math>matchables</span> and
 <span class=math>unmatchables</span>:<br>
 </p>
 <div class=example>
 
 <span class=exsec>Schema:</span><br>
 <pre class=line-labels aria-busy=false><code class=hljs>S1
tc1</code></pre>
 <div class="inline repchoice" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#UserShape",
    "type": "Shape", "expression":
    { "type": "TripleConstraint",
      "predicate": "http://schema.example/#shoeSize"
      } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                   &nbsp;

  ex:UserShape {
    ex:shoeSize .
  }
&nbsp;</pre>
 <button>json</button></div>
 <div style=clear:both class=exsec>Data:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>t1</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs css">BASE &lt;http://a.example/&gt;
PREFIX xsd: &lt;http://www.w3.org/<span class=hljs-number>2001</span>/XMLSchema#&gt;
&lt;Alice&gt; ex:shoeSize <span class=hljs-string>"30"</span>^^xsd:integer .</code></pre>
 </div>
 <div style=clear:both class=validation><span>Validate</span> <span class=hljs-name>&lt;Alice&gt;</span>
 as <span class=hljs-string>http://schema.example/#UserShape</span>:</div>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t1</span>] <span class=comment>The <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>graph</a> G consists of one
 <a data-cite=rdf11-concepts#dfn-rdf-triple data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple>triple</a>.</span></li>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G,
 m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-5>neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t1</span>] <span class=comment>/* The
 neighborhood around &lt;Alice&gt; consists of one triple. */</span></li>
 <li>matched = [<span class="lineno data">t1</span>] <span class=comment>/* That triple is matched in
 the nested evaluation. */</span></li>
 <li>remainder = Ø <span class=comment>/* The remainder is the empty set. */</span></li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)</li>
 <li>outs = [<span class="lineno data">t1</span>] <span class=comment>/* There is one arc out.
 */</span></li>
 <li>matchables = Ø <span class=comment>/* There are no remaining arcs out of &lt;Alice&gt; with <a data-lt=predicate data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicates</a> appearing in tc1. */</span></li>
 <li>unmatchables = Ø <span class=comment>/* There are no other arcs out of &lt;Alice&gt;. */</span>
 </li>
 <li><span class=parameter>closed</span> is false <span class=comment>/* The <span class=jobjref><a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-19>Shape</a></span>'s closed paramater has a value of false. */</span></li>
 </ul>
 </li>
 </ul>
 </div>
 <p class=leadup>
 It is quite common that Shapes will constrain their nested TripleConstraints with NodeConstraints.
 Here is an example including that, extra triples and a closed shape:
 </p>
 <div class=example>
 
 <span class=exsec>Schema:</span><br>
 <pre class=line-labels aria-busy=false><code class=hljs>S1
tc1



nc1</code></pre>
 <div class="inline repchoice" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#UserShape",
    "type": "Shape",
    "extra": ["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"],
    "expression": {
      "type": "TripleConstraint",
      "predicate": "http://www.w3.org/1999/02/22-rdf-syntax-ns#type",
      "valueExpr":
      { "type": "NodeConstraint",
        "values": ["http://schema.example/#Teacher"]
      } } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                    &nbsp;

  ex:UserShape EXTRA a {
    a




      [ex:Teacher]
  }
&nbsp;</pre>
 <button>json</button></div>
 <div style=clear:both class=exsec>Data:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>t1
t2
t3
t4
t5</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs xml">BASE &lt;http://a.example/&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> ex:shoeSize "30"^^xsd:integer .
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> a ex:Teacher .
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> a ex:Person .
<span class=hljs-tag>&lt;<span class=hljs-name>SomeHat</span>&gt;</span> ex:owner <span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> .
<span class=hljs-tag>&lt;<span class=hljs-name>TheMoon</span>&gt;</span> ex:madeOf <span class=hljs-tag>&lt;<span class=hljs-name>GreenCheese</span>&gt;</span> .</code></pre>
 </div>
 <div style=clear:both class=validation><span>Validate</span> <span class=hljs-name>&lt;Alice&gt;</span>
 as <span class=hljs-string>http://schema.example/#UserShape</span>:</div>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t1,t2,t3,t4,t5</span>]</li>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G,
 m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-6>neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t1,t2,t3,t4</span>], matched = [<span class="lineno data">t2</span>], remainder = [<span class="lineno data">t1,t3</span>]</li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> (ex:Teacher, <span class="lineno schema">nc1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> (ex:Teacher, <span class="lineno schema">nc1</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = [<span class="lineno data">t1,t2,t3</span>]</li>
 <li>matchables = [<span class="lineno data">t3</span>], unmatchables = [<span class="lineno data">t1</span>], <span class=parameter>closed</span> is false</li>
 </ul>
 </li>
 </ul>
 <p>
 The non-empty matchables is permitted because the triple <code>t3</code> has a <a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a> which
 appears in the "extra" list: <span class=json>["http://schema.example/#Teacher"]</span>.
 </p>
 </div>
 </section>
 <section id=example-disjunction><div class=header-wrapper><h4 id=disjunction-example>Disjunction Example</h4><a class="self-link sf-hidden" href=#example-disjunction aria-label="Permalink for this Section"></a></div>
 
 
 <div class=example>
 <div class=exsec>Schema:</div><br>
 <pre class=line-labels aria-busy=false><code class=hljs>S1
te1
tc1


nc1
te2
tc2


nc2
tc3


nc3</code></pre>
 <div class="inline repchoice" tabindex=0 style="border:thick solid red">
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#UserShape",
    "type": "Shape", "expression":
     {"type": "OneOf", "expressions": [
        { "type": "TripleConstraint",
          "predicate": "http://xmlns.com/foaf/0.1/name",
          "valueExpr":
            { "type": "NodeConstraint", "nodeKind": "literal" } },
        { "type": "EachOf", "expressions": [
            { "type": "TripleConstraint", "min": 1, "max": -1 ,
              "predicate": "http://xmlns.com/foaf/0.1/givenName",
              "valueExpr":
                { "type": "NodeConstraint", "nodeKind": "literal" } },
            { "type": "TripleConstraint",
              "predicate": "http://xmlns.com/foaf/0.1/familyName",
              "valueExpr":
                { "type": "NodeConstraint", "nodeKind": "literal" } }
        ] }
     ] }
 } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                     &nbsp;
ex:UserShape
  {
   (              
    foaf:name


            LITERAL |
    (             
     foaf:givenName


             LITERAL+ ;
     foaf:familyName


             LITERAL
    )
   )
  }</pre>
 <button title="-15, 0">json</button></div>
 <div style=clear:both class=exsec>Data:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>t1
t2
t3
t4
t5
t6</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs xml">BASE &lt;http://a.example/&gt;
PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> foaf:givenName "Alice" .
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> foaf:givenName "Malsenior" .
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> foaf:familyName "Walker" .
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> foaf:mbox &lt;mailto:alice@example.com&gt; .
<span class=hljs-tag>&lt;<span class=hljs-name>Bob</span>&gt;</span> foaf:knows <span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> .
<span class=hljs-tag>&lt;<span class=hljs-name>Bob</span>&gt;</span> foaf:mbox &lt;mailto:bob@example.com&gt; .</code></pre>
 </div>
 <div style=clear:both></div>
 <p class=leadup>Per <a href=#shape-expression-semantics>Shape Expression Semantics</a>, &lt;Alice&gt;
 satisfies <span class=lineno>S1</span> with the simple <a class=respec-offending-element title="Linking error: not matching `<dfn>`" id=respec-offender-linking-error-not-matching-dfn-1>ShapeMap</a></p>
 <pre class=line-labels aria-busy=false><code class=hljs>m:</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs css">{ "http://a.example/Alice<span class=hljs-string>": "</span>http://a.example/UserShape }</code></pre>
 </div>
 <div style=clear:both></div>
 <p class="leadup followup">as seen in this validation.</p>
 <div class=validation><span>Validate</span> <span class=hljs-name>&lt;Alice&gt;</span> as <span class=hljs-string>http://schema.example/#UserShape</span>:</div>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t1,t2,t3,t4,t5,t6</span>]</li>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (&lt;Alice&gt;, <span class=lineno>S1</span>, G, m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-7>neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t1,t2,t3,t4,t5</span>], matched = [<span class="lineno data">t1,t2,t3</span>], remainder = [<span class="lineno data">t4,t5</span>]</li>
 <li><a href=#matches-OneOf>matches OneOf</a> ([<span class="lineno data">t1,t2,t3</span>], <span class="lineno schema">te1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-EachOf>matches EachOf</a> ([<span class="lineno data">t1,t2,t3</span>], <span class="lineno schema">te2</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-cardinality>matches cardinality</a> ([<span class="lineno data">t1,t2</span>], <span class="lineno schema">tc2</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc2</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("Alice", <span class="lineno schema">nc2</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("Alice",
 <span class="lineno schema">nc2</span>)
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc2</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("Malsenior", <span class="lineno schema">nc2</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("Malsenior",
 <span class="lineno schema">nc2</span>)
 </li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc3</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = [<span class="lineno data">t4</span>] <span class=comment>/* <span class="lineno data">t5</span> is in <span class=math><a href=#dfn-arcsin class=internalDFN data-link-type=dfn id=ref-for-dfn-arcsin-5>ArcsIn</a>(G, &lt;Alice&gt;)&gt;</span>,
 <span class="lineno data">t6</span> is not in <span class=math><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-8>neigh</a>(G,
 &lt;Alice&gt;)&gt;</span>. */</span></li>
 <li>matchables = Ø, unmatchables = [<span class="lineno data">t5</span>], <span class=parameter>closed</span> is false</li>
 </ul>
 </li>
 </ul>
 <p class=leadup>
 Replacing triples 1-3 with a single foaf:name property will also satisfy the schema.
 </p>
 <div class=exsec>Data:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>t4
t5
t6
t7</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs xml">BASE &lt;http://a.example/&gt;
PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> foaf:mbox &lt;mailto:alice@example.com&gt; .
<span class=hljs-tag>&lt;<span class=hljs-name>Bob</span>&gt;</span> foaf:knows <span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> .
<span class=hljs-tag>&lt;<span class=hljs-name>Bob</span>&gt;</span> foaf:mbox &lt;mailto:bob@example.com&gt; .
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> foaf:name "Alice Malsenior Walker" .</code></pre>
 </div>
 <div style=clear:both class=validation><span>Validate</span> <span class=hljs-name>&lt;Alice&gt;</span>
 as <span class=hljs-string>http://schema.example/#UserShape</span>:</div>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t4,t5,t6,t7</span>]</li>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G,
 m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-9>neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t4,t5,t7</span>], matched = [<span class="lineno data">t7</span>], remainder = [<span class="lineno data">t4,t5</span>]</li>
 <li><a href=#matches-OneOf>matches OneOf</a> ([<span class="lineno data">t7</span>], <span class="lineno schema">te1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t7</span>], <span class="lineno schema">tc1</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = [<span class="lineno data">t4</span>]</li>
 <li>matchables = Ø, unmatchables = [<span class="lineno data">t5</span>], <span class=parameter>closed</span> is false</li>
 </ul>
 </li>
 </ul>
 <p class=leadup>
 Any mixure of <code>foaf:name</code> with <code>foaf:givenName</code> or <code>foaf:familyName</code> will
 fail to satisfy the schema as there will be a matchable triple <span class="lineno data">t3</span> that is
 not used in the <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-12>triple expression</a> <span class="lineno schema">te1</span>.
 </p>
 <div class=exsec>Data:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>t3
t4
t5
t6
t7</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs xml">BASE &lt;http://a.example/&gt;
PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> foaf:familyName "Walker" .
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> foaf:mbox &lt;mailto:alice@example.com&gt; .
<span class=hljs-tag>&lt;<span class=hljs-name>Bob</span>&gt;</span> foaf:knows <span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> .
<span class=hljs-tag>&lt;<span class=hljs-name>Bob</span>&gt;</span> foaf:mbox &lt;mailto:bob@example.com&gt; .
<span class=hljs-tag>&lt;<span class=hljs-name>Alice</span>&gt;</span> foaf:name "Alice Malsenior Walker" .</code></pre>
 </div>
 <div style=clear:both class=validation><span>Validate</span> <span class=hljs-name>&lt;Alice&gt;</span>
 as <span class=hljs-string>http://schema.example/#UserShape</span>:</div>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t4,t5,t6,t7</span>]</li>
 <li><span class=fail><a href=#satisfies-Shape>satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G, m)</span>
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-10>neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t4,t5,t7</span>], matched = [<span class="lineno data">t7</span>], remainder = [<span class="lineno data">t4,t5</span>]</li>
 <li><a href=#matches-OneOf>matches OneOf</a> ([<span class="lineno data">t7</span>], <span class="lineno schema">te1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t7</span>], <span class="lineno schema">tc1</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = [<span class="lineno data">t4</span>]</li>
 <li><span class=fail>matchables = [<span class="lineno data">t3</span>]</span>, unmatchables = [<span class="lineno data">t5</span>], <span class=parameter>closed</span> is false</li>
 </ul>
 </li>
 </ul>
 <p class=leadup>
 Adding a <code>foaf:familyName</code> to <span class=math><span class="lineno schema">S1</span></span>'s
 <span class=param>extra</span> would allow this <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>graph</a> to satisfy the schema.
 </p>
 <pre class=line-labels aria-busy=false><code class=hljs>S1</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs css">{ "type": <span class=hljs-string>"Schema"</span>, <span class=hljs-string>"shapes"</span>: [
  { "id": <span class=hljs-string>"http://schema.example/#UserShape"</span>,
    <span class=hljs-string>"type"</span>: <span class=hljs-string>"Shape"</span>, <span class=hljs-string>"extra"</span>: [<span class=hljs-string>"http://xmlns.com/foaf/0.1/familyName"</span>] …
   } ] }</code></pre>
 </div>
 <div style=clear:both></div>
 <p class=leadup>
 Closing <span class=math><span class="lineno schema">S1</span></span> would also cause a validation
 failure if <span class=math>unmatchables</span> were not empty:
 </p>
 <pre class=line-labels aria-busy=false><code class=hljs>S1</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs javascript">{ <span class=hljs-string>"type"</span>: <span class=hljs-string>"Schema"</span>, <span class=hljs-string>"shapes"</span>: [
  { <span class=hljs-string>"id"</span>: <span class=hljs-string>"http://schema.example/#UserShape"</span>,
    <span class=hljs-string>"type"</span>: <span class=hljs-string>"Shape"</span>, <span class=hljs-string>"closed"</span>: <span class=hljs-literal>true</span> …
   } ] }</code></pre>
 </div>
 <div style=clear:both></div>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t4,t5,t6,t7</span>]</li>
 <li><span class=fail><a href=#satisfies-Shape>satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G, m)</span>
 <ul>
 <li>…</li>
 <li><span class=fail>unmatchables = [<span class="lineno data">t5</span>], <span class=parameter>closed</span> is true</span></li>
 </ul>
 </li>
 </ul>
 </div>
 </section>
 <section id=example-dependent-shape><div class=header-wrapper><h4 id=dependent-shape-example>Dependent Shape Example</h4><a class="self-link sf-hidden" href=#example-dependent-shape aria-label="Permalink for this Section"></a></div>
 
 
 <div class=example>
 <div class=exsec>Schema:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>S1
tc1


nc1

S2
tc2



nc2</code></pre>
 <div class="inline repchoice" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#IssueShape",
    "type": "Shape", "expression":
    { "type": "TripleConstraint",
      "predicate": "http://schema.example/#reproducedBy",
      "valueExpr":
      "http://schema.example/#TesterShape" } },
  { "id": "http://schema.example/#TesterShape",
    "type": "Shape", "expression":
    { "type": "TripleConstraint",
      "predicate": "http://schema.example/#role",
      "valueExpr":
      { "type": "NodeConstraint",
        "values": [ "http://schema.example/#testingRole" ] } } }
  ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                               &nbsp;
ex:IssueShape
  {

    ex:reproducedBy

     @ex:TesterShape }
ex:TesterShape
 {

    ex:role

     [ex:testingRole] }

&nbsp;</pre>
 <button>json</button></div>
 <div style=clear:both class=exsec>Data:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>t1
t2</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class=hljs>PREFIX ex: &lt;http://schema.example/#&gt;
PREFIX inst: &lt;http://inst.example/&gt;
inst:Issue1 ex:reproducedBy inst:Tester2 .
inst:Tester2 ex:role ex:testingRole .</code></pre>
 </div>
 <div style=clear:both></div>
 <p class=leadup>inst:Issue1 satisfies <span class="lineno schema">S1</span> with the <a class=respec-offending-element title="Linking error: not matching `<dfn>`" id=respec-offender-linking-error-not-matching-dfn-2>ShapeMap</a></p>
 <pre class=line-labels aria-busy=false><code class=hljs>m:</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs json"><span class=hljs-punctuation>{</span> <span class=hljs-attr>"http://inst.example/Issue1"</span><span class=hljs-punctuation>:</span> <span class=hljs-string>"http://schema.example/#IssueShape"</span><span class=hljs-punctuation>,</span>
  <span class=hljs-attr>"http://inst.example/Tester2"</span><span class=hljs-punctuation>:</span> <span class=hljs-string>"http://schema.example/#TesterShape"</span><span class=hljs-punctuation>,</span>
  <span class=hljs-attr>"http://inst.example/Testgrammer23"</span><span class=hljs-punctuation>:</span> <span class=hljs-string>"http://schema.example/#ProgrammerShape"</span> <span class=hljs-punctuation>}</span></code></pre>
 </div>
 <div style=clear:both class=validation><span>Validate</span> <span>inst:Issue1</span> as <span class=hljs-string>http://schema.example/#IssueShape</span>:</div>
 <p class="leadup followup">as seen in this evaluation:</p>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t1</span>]</li>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (inst:Issue1, <span class="lineno schema">S1</span>, G,
 m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-11>neigh</a>(G, inst:Issue1) = [<span class="lineno data">t1,t2</span>], matched = [<span class="lineno data">t1,t2</span>], remainder = Ø</li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> (inst:Tester2, <span class="lineno schema">nc1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> (inst:Tester2, <span class="lineno schema">nc1</span>)
 <ul>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (inst:Tester2. <span class="lineno schema">S2</span>, G, m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-12>neigh</a>(G, inst:Tester2) = [<span class="lineno data">t2</span>], matched =
 [<span class="lineno data">t2</span>], remainder = Ø</li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc2</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a>
 (ex:testingRole, <span class="lineno schema">nc2</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a>
 (ex:testingRole, <span class="lineno schema">nc2</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, closed is false</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, closed is false</li>
 </ul>
 </li>
 </ul>
 <div style=clear:both></div>
 </div>
 </section>
 <section id=example-recursion><div class=header-wrapper><h4 id=recursion-example>Recursion Example</h4><a class="self-link sf-hidden" href=#example-recursion aria-label="Permalink for this Section"></a></div>
 
 
 <div class=example>
 <div class=exsec>Schema:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>S1
tc1


nc1</code></pre>
 <div class="inline repchoice" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#IssueShape",
    "type": "Shape", "expression":
    { "type": "TripleConstraint", "min": 0, "max": -1,
      "predicate": "http://schema.example/#related",
      "valueExpr":
      "http://schema.example/#IssueShape"
    } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                     &nbsp;
  ex:IssueShape {


    ex:related

      @ex:IssueShape*
}</pre>
 <button>json</button></div>
 <div style=clear:both class=exsec>Data:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>t1
t2
t3</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class=hljs>PREFIX ex: &lt;http://schema.example/#&gt;
PREFIX inst: &lt;http://inst.example/&gt;
inst:Issue1 ex:related inst:Issue2 .
inst:Issue2 ex:related inst:Issue3 .
inst:Issue3 ex:related inst:Issue1 .</code></pre>
 </div>
 <div style=clear:both></div>
 <p class=leadup>inst:Issue1 satisfies <span class="lineno schema">S1</span> with the <a class=respec-offending-element title="Linking error: not matching `<dfn>`" id=respec-offender-linking-error-not-matching-dfn-3>ShapeMap</a></p>
 <pre class=line-labels aria-busy=false><code class=hljs>m:</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs json"><span class=hljs-punctuation>{</span> <span class=hljs-attr>"http://inst.example/Issue1"</span><span class=hljs-punctuation>:</span> <span class=hljs-string>"http://schema.example/#IssueShape"</span><span class=hljs-punctuation>,</span>
  <span class=hljs-attr>"http://inst.example/Issue2"</span><span class=hljs-punctuation>:</span> <span class=hljs-string>"http://schema.example/#IssueShape"</span><span class=hljs-punctuation>,</span>
  <span class=hljs-attr>"http://inst.example/Issue3"</span><span class=hljs-punctuation>:</span> <span class=hljs-string>"http://schema.example/#IssueShape"</span> <span class=hljs-punctuation>}</span></code></pre>
 </div>
 <div style=clear:both class=validation><span>Validate</span> <span>inst:Issue1</span> as <span class=hljs-string>http://schema.example/#IssueShape</span>:</div>
 <p class="leadup followup">as seen in this evaluation:</p>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t1,t2,t3</span>]</li>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (inst:Issue1, <span class="lineno schema">S1</span>, G,
 m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-13>neigh</a>(G, inst:Issue1) = [<span class="lineno data">t1</span>], matched = [<span class="lineno data">t1</span>], remainder = Ø</li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> (inst:Issue2, <span class="lineno schema">nc1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> (inst:Issue2, <span class="lineno schema">nc1</span>)
 <ul>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (inst:Issue2. <span class="lineno schema">S2</span>, G, m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-14>neigh</a>(G, inst:Issue2) = [<span class="lineno data">t3</span>], matched =
 [<span class="lineno data">t3</span>], remainder = Ø</li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc3</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> (inst:Issue3,
 <span class="lineno schema">nc3</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a>
 (inst:Issue3, <span class="lineno schema">nc3</span>)
 <ul>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (inst:Issue3. <span class="lineno schema">S2</span>, G, m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-15>neigh</a>(G, inst:Issue3) = [<span class="lineno data">t3</span>], matched = [<span class="lineno data">t3</span>], remainder = Ø</li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a>
 ([<span class="lineno data">t3</span>], <span class="lineno schema">tc3</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a>
 (inst:Issue1, <span class="lineno schema">nc3</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2
 NodeConstraint</a> (inst:Issue1, <span class="lineno schema">nc3</span>)<br>
 This is known to be true or the initial typing would not be
 satisfied.</li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, closed is false</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, closed is false</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, closed is false</li>
 </ul>
 </li>
 </ul>
 <div style=clear:both></div>
 </div>
 </section>
 <section id=example-simple-repeated-property><div class=header-wrapper><h4 id=simple-repeated-property-examples>Simple Repeated Property Examples</h4><a class="self-link sf-hidden" href=#example-simple-repeated-property aria-label="Permalink for this Section"></a></div>
 
 
 <div class=example>
 <div class=exsec>Schema:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>S1
te1
tc1


nc1

tc2


nc2</code></pre>
 <div class="inline repchoice" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
    { "id": "http://schema.example/#TestResultsShape",
      "type": "Shape", "expression": {
        "type": "EachOf", "expressions": [
          { "type": "TripleConstraint", "min": 1, "max": -1,
            "predicate": "http://schema.example/#val",
            "valueExpr":
            { "type": "NodeConstraint",
              "values": [ {"value": "a"}, {"value": "b"}, {"value": "c"} ] } },
          { "type": "TripleConstraint", "min": 1, "max": -1,
            "predicate": "http://schema.example/#val",
            "valueExpr":
            { "type": "NodeConstraint",
              "values": [ {"value": "b"}, {"value": "c"}, {"value": "d"} ] } }
        ] } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                              &nbsp;
            &lt;http://schema.example/#TestResultsShape&gt;
{


                         &lt;http://schema.example/#val&gt;


                         ["a" "b" "c"]+ ;

                         &lt;http://schema.example/#val&gt;


                         ["b" "c" "d"]+
}</pre>
 <button>json</button></div>
 <div style=clear:both class=exsec>Data:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>t1
t2
t3
t4</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs css">BASE &lt;http://a.example/&gt;
PREFIX ex: &lt;http://schema.example/#&gt;
&lt;s&gt; ex:val <span class=hljs-string>"a"</span> .
&lt;s&gt; ex:val <span class=hljs-string>"b"</span> .
&lt;s&gt; ex:val <span class=hljs-string>"c"</span> .
&lt;s&gt; ex:val <span class=hljs-string>"d"</span> .</code></pre>
 </div>
 <div style=clear:both></div>
 <p class=leadup>&lt;s&gt; satisfies <span class="lineno schema">S1</span> with:</p>
 <pre class=line-labels aria-busy=false><code class=hljs>m:</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs json"><span class=hljs-punctuation>{</span> <span class=hljs-attr>"http://a.example/s"</span><span class=hljs-punctuation>:</span> <span class=hljs-string>"http://a.example/S1"</span> <span class=hljs-punctuation>}</span></code></pre>
 </div>
 <div style=clear:both class=validation><span>Validate</span> <span class=hljs-name>&lt;s&gt;</span> as
 <span class=hljs-string>http://schema.example/#TestResultShape</span>:
 </div>
 <p class="leadup followup">If <span class=math><span class="lineno schema">tc1</span></span> consumes as
 many triples as it can, it consumes three and <span class=math><span class="lineno schema">tc2</span></span> consumes one:</p>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t1,t2,t3,t4</span>]</li>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (&lt;s&gt;, <span class="lineno schema">S1</span>, G, m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-16>neigh</a>(G, &lt;s&gt;) = [<span class="lineno data">t1,t2,t3,t4</span>], matched = [<span class="lineno data">t1,t2,t3,t4</span>], remainder = Ø</li>
 <li><a href=#matches-EachOf>matches EachOf</a> ([<span class="lineno data">t1,t2,t3,t4</span>], <span class="lineno schema">te1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-cardinality>matches cardinality</a> ([<span class="lineno data">t1,t2,t3</span>], <span class="lineno schema">tc1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc1</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("b", <span class="lineno schema">nc1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("b", <span class="lineno schema">nc1</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc1</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("c", <span class="lineno schema">nc1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("c", <span class="lineno schema">nc1</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li><a href=#matches-cardinality>matches cardinality</a> ([<span class="lineno data">t4</span>],
 <span class="lineno schema">tc2</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t4</span>], <span class="lineno schema">tc2</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("d", <span class="lineno schema">nc2</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("d", <span class="lineno schema">nc2</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, <span class=parameter>closed</span> is false</li>
 </ul>
 </li>
 </ul>
 <div style=clear:both></div>
 <p class=leadup>If we eliminate <span class=math><span class="lineno data">t4</span></span>, either <span class=math><span class="lineno data">t2</span></span> or <span class=math><span class="lineno data">t3</span></span> must be allocated to <span class=math><span class="lineno schema">tc2</span></span>:</p>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t1,t2,t3</span>]</li>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G,
 m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-17>neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t1,t2,t3</span>], matched = [<span class="lineno data">t1,t2,t3</span>], remainder = Ø</li>
 <li><a href=#matches-EachOf>matches EachOf</a> ([<span class="lineno data">t1,t2,t3</span>], <span class="lineno schema">te1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-cardinality>matches cardinality</a> ([<span class="lineno data">t1,t2</span>], <span class="lineno schema">tc1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc1</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("b", <span class="lineno schema">nc1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("b", <span class="lineno schema">nc1</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li><a href=#matches-cardinality>matches cardinality</a> ([<span class="lineno data">t3</span>],
 <span class="lineno schema">tc2</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc2</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("d", <span class="lineno schema">nc2</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("d", <span class="lineno schema">nc2</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, <span class=parameter>closed</span> is false</li>
 </ul>
 </li>
 </ul>
 <div style=clear:both></div>
 </div>
 </section>
 <section id=example-repeated-property-with-dependent-shapes><div class=header-wrapper><h4 id=repeated-property-with-dependent-shapes-example>Repeated Property With Dependent Shapes Example</h4><a class="self-link sf-hidden" href=#example-repeated-property-with-dependent-shapes aria-label="Permalink for this Section"></a></div>
 
 
 <div class=example>
 <div class=exsec>Schema:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>S1
te1

tc1

nc1

tc2

nc2

S2

tc3


nc3

S3

tc4


nc4</code></pre>
 <div class="inline repchoice" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/#IssueShape",
    "type": "Shape", "expression":
    { "type": "EachOf", "expressions": [
        { "type": "TripleConstraint",
          "predicate": "http://schema.example/#reproducedBy",
          "valueExpr":
          "http://schema.example/#TesterShape" },
        { "type": "TripleConstraint",
          "predicate": "http://schema.example/#reproducedBy",
          "valueExpr":
          "http://schema.example/#ProgrammerShape" }
      ] } },
  { "id": "http://schema.example/#TesterShape",
    "type": "Shape", "expression":
    { "type": "TripleConstraint",
      "predicate": "http://schema.example/#role",
      "valueExpr":
      { "type": "NodeConstraint",
        "values": [ "http://schema.example/#testingRole" ] } } },
  { "id": "http://schema.example/#ProgrammerShape",
    "type": "Shape", "expression":
    { "type": "TripleConstraint",
      "predicate": "http://schema.example/#department",
      "valueExpr":
      { "type": "NodeConstraint",
        "values": [ "http://schema.example/#ProgrammingDepartment" ] } } }
  ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                         &nbsp;
ex:IssueShape {



  ex:reproducedBy

    @ex:TesterShape;

  ex:reproducedBy

    @ex:ProgrammerShape
}
ex:TesterShape {


  ex:role

    [ex:testingRole]
}
ex:ProgrammerShape {


  ex:department

    [ex:ProgrammingDepartment]
}
&nbsp;</pre>
 <button>json</button></div>
 <div style=clear:both class=exsec>Data:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>t1
t2


t3


t4
t5</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs css">PREFIX ex: &lt;http://schema.example/#&gt;
PREFIX inst: &lt;http://inst.example/&gt;
inst:Issue1
  ex:reproducedBy inst:Tester2 ;
  ex:reproducedBy inst:Testgrammer23 .

inst:Tester2              
  ex:role ex:testingRole .

inst:Testgrammer23                        
  ex:role ex:testingRole ;                
  ex:department ex:ProgrammingDepartment .</code></pre>
 </div>
 <div style=clear:both></div>
 <p class=leadup>inst:Issue1 satisfies <span class="lineno schema">S1</span> with the <a class=respec-offending-element title="Linking error: not matching `<dfn>`" id=respec-offender-linking-error-not-matching-dfn-4>ShapeMap</a></p>
 <pre class=line-labels aria-busy=false><code class=hljs>m:</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs json"><span class=hljs-punctuation>{</span> <span class=hljs-attr>"http://inst.example/Issue1"</span><span class=hljs-punctuation>:</span> <span class=hljs-string>"http://schema.example/#IssueShape"</span><span class=hljs-punctuation>,</span>
  <span class=hljs-attr>"http://inst.example/Tester2"</span><span class=hljs-punctuation>:</span> <span class=hljs-string>"http://schema.example/#TesterShape"</span><span class=hljs-punctuation>,</span>
  <span class=hljs-attr>"http://inst.example/Testgrammer23"</span><span class=hljs-punctuation>:</span> <span class=hljs-string>"http://schema.example/#ProgrammerShape"</span> <span class=hljs-punctuation>}</span></code></pre>
 </div>
 <div style=clear:both class=validation><span>Validate</span> <span>inst:Issue1</span> as <span class=hljs-string>http://schema.example/#IssueShape</span>:</div>
 <p class="leadup followup">as seen in this evaluation:</p>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t1,t2,t3,t4,t5</span>]</li>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (inst:Issue1, <span class="lineno schema">S1</span>, G,
 m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-18>neigh</a>(G, inst:Issue1) = [<span class="lineno data">t1,t2</span>], matched = [<span class="lineno data">t1,t2</span>], remainder = Ø</li>
 <li><a href=#matches-EachOf>matches EachOf</a> ([<span class="lineno data">t1,t2</span>], <span class="lineno schema">te1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> (inst:Tester2, <span class="lineno schema">nc1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> (inst:Tester2, <span class="lineno schema">nc1</span>)
 <ul>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (inst:Tester2. <span class="lineno schema">S2</span>, G, m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-19>neigh</a>(G, inst:Tester2) = [<span class="lineno data">t3</span>], matched =
 [<span class="lineno data">t3</span>], remainder = Ø</li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc3</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a>
 (ex:testingRole, <span class="lineno schema">nc3</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a>
 (ex:testingRole, <span class="lineno schema">nc3</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, closed is false</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc1</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> (inst:Testgrammer23, <span class="lineno schema">nc2</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> (inst:Testgrammer23,
 <span class="lineno schema">nc2</span>)
 <ul>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (inst:Testgrammer23. <span class="lineno schema">S3</span>, G, m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-20>neigh</a>(G, inst:Testgrammer23) = [<span class="lineno data">t5</span>],
 matched = [<span class="lineno data">t5</span>], remainder = Ø</li>
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t5</span>], <span class="lineno schema">tc3</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a>
 (ex:testingRole, <span class="lineno schema">nc4</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a>
 (ex:testingRole, <span class="lineno schema">nc4</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, closed is false</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, closed is false</li>
 </ul>
 </li>
 </ul>
 <div style=clear:both></div>
 </div>
 </section>
 <section id=example-negation><div class=header-wrapper><h4 id=negation-example>Negation Example</h4><a class="self-link sf-hidden" href=#example-negation aria-label="Permalink for this Section"></a></div>
 
 <p>
 Setting the maximum <a href=#dfn-cardinality class=internalDFN data-link-type=dfn id=ref-for-dfn-cardinality-1>cardinality</a> of a TripleConstraint with <a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a> <span class=math>p</span>
 to zero (i.e. <span>"max": 0</span> in <a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-8>ShExJ</a> or <code>{0}</code> or <code>{0, 0}</code> in
 <a href=#dfn-shexc class=internalDFN data-link-type=dfn id=ref-for-dfn-shexc-2>ShExC</a>) asserts that matching nodes must have no triples with <a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a> <span class=math>p</span>.
 </p>
 
 <div class=example>
 <div class=exsec>Schema:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>S1
te1
tc1


nc1

tc2</code></pre>
 <div class="inline repchoice" tabindex=0>
 <pre class="json nohighlight repchosen">{ "type": "Schema", "shapes": [
    { "id": "http://schema.example/#TestResultsShape",
      "type": "Shape", "expression": {
        "type": "EachOf", "expressions": [
          { "type": "TripleConstraint", "min": 1, "max": -1,
            "predicate": "http://schema.example/#p1",
            "valueExpr":
            { "type": "NodeConstraint",
              "values": [ {"value": "a"}, {"value": "b"} ] } },
          { "type": "TripleConstraint", "min": 1, "max": -1,
            "predicate": "http://schema.example/#p2", "min": 0, "max": 0 }
        ] } } ] }</pre>
 <pre class="shexc nohighlight rephidden sf-hidden">                                                                         &nbsp;
            &lt;http://schema.example/#TestResultsShape&gt;
{


                         &lt;http://schema.example/#p1&gt;


                         ["a" "b"] + ;

                         &lt;http://schema.example/#p2&gt; . {0}
}</pre>
 <button>json</button></div>
 <div style=clear:both class=exsec>Data:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>t1</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs css">BASE &lt;http://a.example/&gt;
PREFIX ex: &lt;http://schema.example/#&gt;
&lt;s&gt; ex:p1 <span class=hljs-string>"a"</span> .</code></pre>
 </div>
 <div style=clear:both></div>
 <p class=leadup>&lt;s&gt; satisfies <span class="lineno schema">S1</span> with:</p>
 <pre class=line-labels aria-busy=false><code class=hljs>m:</code></pre>
 <div class="inline json">
 <pre aria-busy=false><code class="hljs json"><span class=hljs-punctuation>{</span> <span class=hljs-attr>"http://a.example/s"</span><span class=hljs-punctuation>:</span> <span class=hljs-string>"http://a.example/S1"</span> <span class=hljs-punctuation>}</span></code></pre>
 </div>
 <div style=clear:both class=validation><span>Validate</span> <span class=hljs-name>&lt;s&gt;</span> as
 <span class=hljs-string>http://schema.example/#TestResultShape</span>:
 </div>
 <p class="leadup followup">This is trivially satisfied by <span class=math><span class="lineno schema">tc1</span></span> consuming one triple and <span class=math><span class="lineno schema">tc2</span></span> consuming none:</p>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t1</span>]</li>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (&lt;s&gt;, <span class="lineno schema">S1</span>, G, m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-21>neigh</a>(G, &lt;s&gt;) = [<span class="lineno data">t1</span>], matched = [<span class="lineno data">t1</span>], remainder = Ø</li>
 <li><a href=#matches-EachOf>matches EachOf</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">te1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-cardinality>matches cardinality</a> ([<span class="lineno data">t1</span>],
 <span class="lineno schema">tc1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li><a href=#matches-cardinality>matches cardinality</a> ([<span class="lineno data"></span>],
 <span class="lineno schema">tc2</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data"></span>], <span class="lineno schema">tc2</span>, m)</li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, <span class=parameter>closed</span> is false</li>
 </ul>
 </li>
 </ul>
 <div style=clear:both></div>
 <p class=leadup>If we add a <span class=math><span class="lineno data">t2</span></span> which matches
 <span class=math><span class="lineno schema">tc2</span></span>:
 </p>
 <div style=clear:both class=exsec>Data:</div>
 <pre class=line-labels aria-busy=false><code class=hljs>t1
t2</code></pre>
 <div class="inline json error">
 <pre aria-busy=false><code class="hljs xml">BASE &lt;http://a.example/&gt;
PREFIX ex: &lt;http://schema.example/#&gt;
<span class=hljs-tag>&lt;<span class=hljs-name>s</span>&gt;</span> ex:p1 "a" .
<span class=hljs-tag>&lt;<span class=hljs-name>s</span>&gt;</span> ex:p2 5 .</code></pre>
 </div>
 <div style=clear:both></div>
 <p>
 every partition fails, either because matchables is non-empty or because the maximum cardinality on <span class="lineno schema">tc2</span> is exceeded:
 </p>
 <ul class="trace followup">
 <li>G = [<span class="lineno data">t1</span>]</li>
 <li><a href=#satisfies-Shape>satisfies Shape</a> (&lt;s&gt;, <span class="lineno schema">S1</span>, G, m)
 <ul>
 <li><a href=#dfn-neigh class=internalDFN data-link-type=dfn id=ref-for-dfn-neigh-22>neigh</a>(G, &lt;s&gt;) = [<span class="lineno data">t1</span>], matched = [<span class="lineno data">t1</span>], remainder = Ø</li>
 <li><a href=#matches-EachOf>matches EachOf</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">te1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-cardinality>matches cardinality</a> ([<span class="lineno data">t1</span>],
 <span class="lineno schema">tc1</span>, m)
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
 <ul>
 <li><a href=#satisfies-NodeConstraint>satisfies NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>, G, m)
 <ul>
 <li><a href=#satisfies2-NodeConstraint>satisfies2 NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>)</li>
 </ul>
 </li>
 </ul>
 </li>
 </ul>
 </li>
 <li><span class=fail><a href=#matches-cardinality>matches cardinality</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc2</span>, m)</span>
 <ul style="border-left:solid thin brown">
 <li><a href=#matches-TripleConstraint>matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc2</span>, m)</li>
 </ul>
 </li>
 </ul>
 </li>
 <li>outs = Ø</li>
 <li>matchables = Ø, unmatchables = Ø, <span class=parameter>closed</span> is false</li>
 </ul>
 </li>
 </ul>
 <div style=clear:both></div>
 </div>
 </section>
 </section>
 </section>
 <section id=shexc><div class=header-wrapper><h2 id=shex-compact-syntax-shexc>ShEx Compact syntax (ShExC)</h2><a class="self-link sf-hidden" href=#shexc aria-label="Permalink for this Section"></a></div>
 
 <div>
 <p>
 The ShEx Compact Syntax expresses ShEx schemas in a compact, human-friendly form.
 Parsing <dfn id=dfn-shexc tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>ShExC</dfn> transforms a <a href=#dfn-shexc class=internalDFN data-link-type=dfn id=ref-for-dfn-shexc-3>ShExC</a> document into an equivalent <a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-9>ShExJ</a> structure.
 This is defined as a BNF which accepts <a href=#dfn-shexc class=internalDFN data-link-type=dfn id=ref-for-dfn-shexc-4>ShExC</a> followed by instructions for tranlating the rules in the BNF
 production into their corresponding <a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-10>ShExJ</a> objects.
 For example, "<span style=font-family:monospace>shapeExprDecl returns <span class=prod><a class=grammarRef href=#prod-shapeExpression>shapeExpression</a></span></span>" indicates that the
 result of matching the <code>shapeExprDecl</code> production is the object produced by parsing the
 <code>shapeExpression</code> production.
 </p>
 <p>
 Semantic actions before the first <span class=prod><a class=grammarRef href=#prod-shapeExprDecl>shape
 expression declaration</a></span> are <span class=param><a href=#dfn-startacts class=internalDFN data-link-type=dfn id=ref-for-dfn-startacts-5>startActs</a></span>.
 After the first <span class=prod><a class=grammarRef href=#prod-shapeExprDecl>shape expression
 declaration</a></span>, semantic actions are associated with the previous declaration.
 </p>
 <p>
 As with Turtle and SPARQL, ShExC offers URL resolution relative to a <dfn data-lt=prefix|base id=dfn-prefix tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>base</dfn> per
 [<cite><a class=bibref data-link-type=biblio href=#bib-rfc3986 title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] and <dfn id=dfn-prefixes-map tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>prefixes map</dfn> to provide shorthand ways to write IRI identifiers.
 </p>
 <p>
 <button id=toggleGrammar>Display grammar only</button>
 </p>
 <div class=grammarTable>
 <table style="border:0;border-top:thick solid white">
 <tbody class=grammarParagraph>
 <tr style="border-top:thick solid white;border-left:thin solid white;border-right:thin solid white">
 <td colspan=4>Below is the <a href=#dfn-shexc class=internalDFN data-link-type=dfn id=ref-for-dfn-shexc-5>ShExC</a> grammar following the <a data-cite=XML#sec-notation href=https://www.w3.org/TR/xml/#sec-notation>notation
 in the XML specification</a>[<cite><a class=bibref data-link-type=biblio href=#bib-xml title="Extensible Markup Language (XML) 1.0 (Fifth Edition)">XML</a></cite>]:</td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-shexDoc>[<span class=prodNo>1</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shexDoc</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-directive>directive</a></span>* ((<span class=prod><a class=grammarRef href=#prod-notStartAction>notStartAction</a></span> | <span class=prod><a class=grammarRef href=#prod-startActions>startActions</a></span>) <span class=prod><a class=grammarRef href=#prod-statement>statement</a></span>*)?</code>
 </td>
 </tr>
 </tbody>
 <tbody class=grammarParagraph>
 <tr>
 <td colspan=4 style=padding-top:2ex>followed by the associated <a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-11>ShExJ</a> object(s):</td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr class=obj>
 <td style="border-top:thick solid white;border-bottom:thick solid white"></td>
 <td><a class="obj internalDFN" href=#dfn-shapes-schema data-link-type=dfn id=ref-for-dfn-shapes-schema-6>Schema</a></td>
 <td>{</td>
 <td>
 <a class="param internalDFN" href=#dfn-startacts data-link-type=dfn id=ref-for-dfn-startacts-6>startActs</a>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-12>SemAct</a>+]?
 <a class="param internalDFN" href=#dfn-start data-link-type=dfn id=ref-for-dfn-start-4>start</a>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-22>shapeExpr</a>?
 <a class="param internalDFN" href=#dfn-imports data-link-type=dfn id=ref-for-dfn-imports-3>imports</a>:[<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-14>IRIREF</a>+]?
 <a class="param internalDFN" href=#dfn-shapes data-link-type=dfn id=ref-for-dfn-shapes-9>shapes</a>:[<a class="nobref internalDFN" href=#dfn-shapedecl data-link-type=dfn id=ref-for-dfn-shapedecl-6>ShapeDecl</a>+]? }
 </td>
 </tr>
 </tbody>
 <tbody class=grammarParagraph>
 <tr class=borderHack>
 <td></td>
 <td colspan=3></td>
 </tr>
 <tr>
 <td colspan=4 style=padding-top:2ex>and a description of the mapping of rules in the production to
 elements of the <a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-12>ShExJ</a> object:</td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr class=params>
 <td style="border-top:thick solid white;border-bottom:thick solid white"></td>
 <td colspan=3>
 <ul>
 <li><a class="param internalDFN" href=#dfn-startacts data-link-type=dfn id=ref-for-dfn-startacts-7>startActs</a> comes from <span class=prod><a class=grammarRef href=#prod-startActions>startActions</a></span> production.</li>
 <li><a class="param internalDFN" href=#dfn-start data-link-type=dfn id=ref-for-dfn-start-5>start</a> comes from the <span class=prod><a class=grammarRef href=#prod-start>start</a></span> production.</li>
 <li><a class="param internalDFN" href=#dfn-shapes data-link-type=dfn id=ref-for-dfn-shapes-10>shapes</a> come from the <span class=prod><a class=grammarRef href=#prod-shapeExprDecl>shapeExprDecl</a></span> production.</li>
 </ul>
 </td>
 </tr>
 </tbody>
 <tbody>
 <tr style=vertical-align:baseline>
 <td id=prod-directive>[<span class=prodNo>2</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">directive</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-baseDecl>baseDecl</a></span> | <span class=prod><a class=grammarRef href=#prod-prefixDecl>prefixDecl</a></span> | <span class=prod><a class=grammarRef href=#prod-importDecl>importDecl</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-baseDecl>[<span class=prodNo>3</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">baseDecl</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"BASE" <span class=prod><a class=grammarRef href=#term-IRIREF>IRIREF</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-prefixDecl>[<span class=prodNo>4</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">prefixDecl</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"PREFIX" <span class=prod><a class=grammarRef href=#term-PNAME_NS>PNAME_NS</a></span> <span class=prod><a class=grammarRef href=#term-IRIREF>IRIREF</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-importDecl>[<span class=prodNo>4½</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">importDecl</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"IMPORT" <span class=prod><a class=grammarRef href=#term-IRIREF>IRIREF</a></span></code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>"<code>IMPORT</code>" is described in <a href=#import>ShEx Import</a>.</td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-notStartAction>[<span class=prodNo>5</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">notStartAction</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-start>start</a></span> | <span class=prod><a class=grammarRef href=#prod-shapeExprDecl>shapeExprDecl</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-start>[<span class=prodNo>6</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">start</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"start" '=' <span class=prod><a class=grammarRef href=#prod-inlineShapeExpression>inlineShapeExpression</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-startActions>[<span class=prodNo>7</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">startActions</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-codeDecl>codeDecl</a></span>+</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-statement>[<span class=prodNo>8</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">statement</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-directive>directive</a></span> | <span class=prod><a class=grammarRef href=#prod-notStartAction>notStartAction</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-shapeExprDecl>[<span class=prodNo>9</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shapeExprDecl</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-shapeExprLabel>shapeExprLabel</a></span> (<span class=prod><a class=grammarRef href=#prod-shapeExpression>shapeExpression</a></span> | "EXTERNAL")</code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If the "<code>EXTERNAL</code>" keyword is present, <span class=prod><a class=grammarRef href=#prod-shapeExprDecl>shapeExprDecl</a></span> returns a <a class="obj internalDFN" href=#dfn-shapedecl data-link-type=dfn id=ref-for-dfn-shapedecl-7>ShapeDecl</a> object whose <span class=param>shapeExpr</span> is a <a class="obj internalDFN" href=#dfn-shapeexternal data-link-type=dfn id=ref-for-dfn-shapeexternal-6>ShapeExternal</a>:</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-shapedecl data-link-type=dfn id=ref-for-dfn-shapedecl-8>ShapeDecl</a></td>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-12>shapeExprLabel</a> <span class=param>abstract</span>:<a class="nobref internalDFN" href=#dfn-bool data-link-type=dfn id=ref-for-dfn-bool-5>BOOL</a>? <span class=param>shapeExpr</span>: {
 <span class=param>type</span>: "ShapeExternal" } }
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 <ul>
 <li><span class=param>abstract</span> is true if "<code>ABSTRACT</code>" was matched.</li>
 </ul>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>otherwise <span class=prod><a class=grammarRef href=#prod-shapeExprDecl>shapeExprDecl</a></span> returns a <span class=obj>ShapeDecl</span>
 object whose <span class=param>shapeExpr</span> is a <span class=prod><a class=grammarRef href=#prod-shapeExpression>shapeExpression</a></span>.</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-shapedecl data-link-type=dfn id=ref-for-dfn-shapedecl-9>ShapeDecl</a></td>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-13>shapeExprLabel</a> <span class=param>abstract</span>:<a class="nobref internalDFN" href=#dfn-bool data-link-type=dfn id=ref-for-dfn-bool-6>BOOL</a>? <span class=param>shapeExpr</span>: <a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-23>shapeExpr</a> }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 <ul>
 <li><span class=param>abstract</span> is true if "<code>ABSTRACT</code>" was matched.</li>
 </ul>
 </td>
 </tr>
 
 
 
 </tbody>
 <tbody class=grammarParagraph>
 <tr class=borderHack>
 <td></td>
 <td colspan=3></td>
 </tr>
 <tr>
 <td colspan=4>
 <p>
 Shape expressions are logical combinations of shape atoms.
 Inline variants of <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-14>shape expressions</a> are used in <span class=prod><a class=grammarRef href=#prod-tripleConstraint>tripleConstraint</a></span>s and are not permitted to have
 annotations or semantic actions.
 </p>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-shapeExpression>[<span class=prodNo>10</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shapeExpression</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-shapeOr>shapeOr</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-inlineShapeExpression>[<span class=prodNo>11</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">inlineShapeExpression</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-inlineShapeOr>inlineShapeOr</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-shapeOr>[<span class=prodNo>12</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shapeOr</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-shapeAnd>shapeAnd</a></span> ("OR" <span class=prod><a class=grammarRef href=#prod-shapeAnd>shapeAnd</a></span>)*</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-inlineShapeOr>[<span class=prodNo>13</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">inlineShapeOr</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-inlineShapeAnd>inlineShapeAnd</a></span> ("OR" <span class=prod><a class=grammarRef href=#prod-inlineShapeAnd>inlineShapeAnd</a></span>)*</code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 If the right <a class=grammarRef href=#prod-shapeAnd>shapeAnd</a> matches one or more times, the
 result is a <a class="obj internalDFN" href=#dfn-shapeor data-link-type=dfn id=ref-for-dfn-shapeor-8>ShapeOr</a> object with <span class=param>shapeExprs</span> containing the
 first <a class=grammarRef href=#prod-shapeAnd>shapeAnd</a> followed by the ordered list from the
 second <a class=grammarRef href=#prod-shapeAnd>shapeAnd</a>:
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-shapeor data-link-type=dfn id=ref-for-dfn-shapeor-9>ShapeOr</a></td>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-14>shapeExprLabel</a>? <span class=param>shapeExprs</span>:[<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-24>shapeExpr</a>{2,}] }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 otherwise the result is the left <a class=grammarRef href=#prod-shapeAnd>shapeAnd</a>.
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-shapeAnd>[<span class=prodNo>14</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shapeAnd</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-shapeNot>shapeNot</a></span> ("AND" <span class=prod><a class=grammarRef href=#prod-shapeNot>shapeNot</a></span>)*</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-inlineShapeAnd>[<span class=prodNo>15</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">inlineShapeAnd</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-inlineShapeNot>inlineShapeNot</a></span> ("AND" <span class=prod><a class=grammarRef href=#prod-inlineShapeNot>inlineShapeNot</a></span>)*</code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 If the right <a class=grammarRef href=#prod-shapeNot>shapeNot</a> matches one or more times, the
 result is a <a class="obj internalDFN" href=#dfn-shapeand data-link-type=dfn id=ref-for-dfn-shapeand-6>ShapeAnd</a> object with <span class=param>shapeExprs</span> containing the
 first <a class=grammarRef href=#prod-shapeNot>shapeNot</a> followed by the ordered list from the
 second <a class=grammarRef href=#prod-shapeNot>shapeNot</a>:
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-shapeand data-link-type=dfn id=ref-for-dfn-shapeand-7>ShapeAnd</a></td>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-15>shapeExprLabel</a>? <span class=param>shapeExprs</span>:[<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-25>shapeExpr</a>{2,}] }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 otherwise the result is the left <a class=grammarRef href=#prod-shapeNot>shapeNot</a>.
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-shapeNot>[<span class=prodNo>16</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shapeNot</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"NOT"? <span class=prod><a class=grammarRef href=#prod-shapeAtom>shapeAtom</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-inlineShapeNot>[<span class=prodNo>17</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">inlineShapeNot</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"NOT"? <span class=prod><a class=grammarRef href=#prod-inlineShapeAtom>inlineShapeAtom</a></span></code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 If the left "<code>NOT</code>" matches, the result is a <a class="obj internalDFN" href=#dfn-shapenot data-link-type=dfn id=ref-for-dfn-shapenot-7>ShapeNot</a> object with <span class=param>shapeExpr</span> containing the <a class=grammarRef href=#prod-shapeAtom>shapeAtom</a>:</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-shapenot data-link-type=dfn id=ref-for-dfn-shapenot-8>ShapeNot</a></td>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-16>shapeExprLabel</a>? <span class=param>shapeExpr</span>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-26>shapeExpr</a> }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 otherwise the result is the <a class=grammarRef href=#prod-shapeAtom>shapeAtom</a>.
 </td>
 </tr>
 </tbody>
 <tbody class=grammarParagraph>
 <tr class=borderHack>
 <td></td>
 <td colspan=3></td>
 </tr>
 <tr>
 <td colspan=4>
 <p>
 Shape atoms are shape references (indicated by "<code>@</code>"), definitions, or nested expressions.
 </p>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-shapeAtom>[<span class=prodNo>18</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shapeAtom</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#prod-nonLitNodeConstraint>nonLitNodeConstraint</a></span> <span class=prod><a class=grammarRef href=#prod-shapeOrRef>shapeOrRef</a></span>?<br>
 | <span class=prod><a class=grammarRef href=#prod-litNodeConstraint>litNodeConstraint</a></span><br>
 | <span class=prod><a class=grammarRef href=#prod-shapeOrRef>shapeOrRef</a></span> <span class=prod><a class=grammarRef href=#prod-nonLitNodeConstraint>nonLitNodeConstraint</a></span>?<br>
 | '(' <span class=prod><a class=grammarRef href=#prod-shapeExpression>shapeExpression</a></span> ')'<br>
 | '.'</code></td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-shapeAtomNoRef>[<span class=prodNo>19</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shapeAtomNoRef</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#prod-nonLitNodeConstraint>nonLitNodeConstraint</a></span> <span class=prod><a class=grammarRef href=#prod-shapeOrRef>shapeOrRef</a></span>?<br>
 | <span class=prod><a class=grammarRef href=#prod-litNodeConstraint>litNodeConstraint</a></span><br>
 | <span class=prod><a class=grammarRef href=#prod-shapeDefinition>shapeDefinition</a></span> <span class=prod><a class=grammarRef href=#prod-nonLitNodeConstraint>nonLitNodeConstraint</a></span>?<br>
 | '(' <span class=prod><a class=grammarRef href=#prod-shapeExpression>shapeExpression</a></span> ')'<br>
 | '.'</code></td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-inlineShapeAtom>[<span class=prodNo>20</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">inlineShapeAtom</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#prod-nonLitNodeConstraint>nonLitNodeConstraint</a></span> <span class=prod><a class=grammarRef href=#prod-inlineShapeOrRef>inlineShapeOrRef</a></span>?<br>
 | <span class=prod><a class=grammarRef href=#prod-litNodeConstraint>litNodeConstraint</a></span><br>
 | <span class=prod><a class=grammarRef href=#prod-inlineShapeOrRef>inlineShapeOrRef</a></span> <span class=prod><a class=grammarRef href=#prod-nonLitNodeConstraint>nonLitNodeConstraint</a></span>?<br>
 | '(' <span class=prod><a class=grammarRef href=#prod-shapeExpression>shapeExpression</a></span> ')'<br>
 | '.'</code></td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 <ul>
 <li>If the matching production inludes both a node constraint (<span class=prod><a class=grammarRef href=#prod-litNodeConstraint>litNodeConstraint</a></span> OR <span class=prod><a class=grammarRef href=#prod-nonLitNodeConstraint>nonLitNodeConstraint</a></span>) <span class=param>nc</span>
 and a <span class=prod><a class=grammarRef href=#prod-shapeOrRef>shapeOrRef</a></span>, the
 result is a <a class="obj internalDFN" href=#dfn-shapeand data-link-type=dfn id=ref-for-dfn-shapeand-8>ShapeAnd</a> object with <span class=param>shapeExprs</span> containing
 the list of <span class=param>nc</span> and a <span class=prod><a class=grammarRef href=#prod-shapeOrRef>shapeOrRef</a></span>.</li>
 <li>If the "(" <span class=prod><a class=grammarRef href=#prod-shapeExpression>shapeExpression</a></span> ")" production matches, the result is
 the result of <span class=prod><a class=grammarRef href=#prod-shapeExpression>shapeExpression</a></span>.</li>
 <li>If the <code>"."</code> production matches, the result is an empty shape:
 <code>{"type": "Shape"}</code>.
 </li>
 </ul>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-shapeOrRef>[<span class=prodNo>21</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shapeOrRef</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#prod-shapeDefinition>shapeDefinition</a></span> | <span class=prod><a class=grammarRef href=#prod-shapeRef>shapeRef</a></span>
</code></td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-inlineShapeOrRef>[<span class=prodNo>22</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">inlineShapeOrRef</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#prod-inlineShapeDefinition>inlineShapeDefinition</a></span> | <span class=prod><a class=grammarRef href=#prod-shapeRef>shapeRef</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-shapeRef>[<span class=prodNo>23</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shapeRef</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content>( <span class=prod><a class=grammarRef href=#term-ATPNAME_LN>ATPNAME_LN</a></span> | <span class=prod><a class=grammarRef href=#term-ATPNAME_NS>ATPNAME_NS</a></span> | '@' <span class=prod><a class=grammarRef href=#prod-shapeExprLabel>shapeExprLabel</a></span> ) "EXACTLY"</code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 <ul>
 <li>If the <span class=prod><a class=grammarRef href=#prod-shapeDefinition>shapeDefinition</a></span> production matches, the result is <span class=prod><a class=grammarRef href=#prod-shapeDefinition>shapeDefinition</a></span>.</li>
 <li>Otherwise, the result is a <a class="obj internalDFN" href=#dfn-shapeexprref data-link-type=dfn id=ref-for-dfn-shapeexprref-15>ShapeExprRef</a> to <a class="obj internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-17>shapeExprLabel</a>.
 </li>
 </ul>
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="nob internalDFN" href=#dfn-shapeexprref data-link-type=dfn id=ref-for-dfn-shapeexprref-16>ShapeExprRef</a></td>
 <td>{</td>
 <td><span class=param>label</span>: <a class="objref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-18>shapeExprLabel</a> }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 <ul>
 <li><span class=param>exact</span> is true if the "<code>EXACTLY</code>" choice was matched.</li>
 </ul>
 </tbody>
 <tbody class=grammarParagraph>
 <tr class=borderHack>
 <td></td>
 <td colspan=3></td>
 </tr>
 <tr>
 <td colspan=4>
 <p>
 Node constraints identify a (possibly infinite) set of matching RDF nodes.
 </p>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-litNodeConstraint>[<span class=prodNo>24</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">litNodeConstraint</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content>"LITERAL" <span class=prod><a class=grammarRef href=#prod-xsFacet>xsFacet</a></span>*<br>
 | <span class=prod><a class=grammarRef href=#prod-datatype>datatype</a></span> <span class=prod><a class=grammarRef href=#prod-xsFacet>xsFacet</a></span>*<br>
 | <span class=prod><a class=grammarRef href=#prod-valueSet>valueSet</a></span> <span class=prod><a class=grammarRef href=#prod-xsFacet>xsFacet</a></span>*<br>
 | <span class=prod><a class=grammarRef href=#prod-numericFacet>numericFacet</a></span>+</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-nonLitNodeConstraint>[<span class=prodNo>25</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">nonLitNodeConstraint</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#prod-nonLiteralKind>nonLiteralKind</a></span> <span class=prod><a class=grammarRef href=#prod-stringFacet>stringFacet</a></span>*<br>
 | <span class=prod><a class=grammarRef href=#prod-stringFacet>stringFacet</a></span>+</code>
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-nodeconstraint data-link-type=dfn id=ref-for-dfn-nodeconstraint-9>NodeConstraint</a></td>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-19>shapeExprLabel</a>? <span class=param>nodeKind</span>:(<span class=literal>"iri"</span> | <span class=literal>"bnode"</span> | <span class=literal>"nonliteral"</span> | <span class=literal>"literal"</span>)? <span class=param>datatype</span>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-15>IRIREF</a>? <a class="nobref internalDFN" href=#dfn-xsfacet data-link-type=dfn id=ref-for-dfn-xsfacet-6>xsFacet</a>* <span class=param>values</span>:[<a class="nobref internalDFN" href=#dfn-valuesetvalue data-link-type=dfn id=ref-for-dfn-valuesetvalue-3>valueSetValue</a>+]?
 }</td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-nonLiteralKind>[<span class=prodNo>26</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">nonLiteralKind</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"IRI" | "BNODE" | "NONLITERAL"</code></td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-xsFacet>[<span class=prodNo>27</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">xsFacet</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-stringFacet>stringFacet</a></span> | <span class=prod><a class=grammarRef href=#prod-numericFacet>numericFacet</a></span></code>
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="nob internalDFN" href=#dfn-xsfacet data-link-type=dfn id=ref-for-dfn-xsfacet-7>xsFacet</a></td>
 <td>=</td>
 <td><a class="nobref internalDFN" href=#dfn-stringfacet data-link-type=dfn id=ref-for-dfn-stringfacet-4>stringFacet</a> | <a class="nobref internalDFN" href=#dfn-numericfacet data-link-type=dfn id=ref-for-dfn-numericfacet-4>numericFacet</a> ;</td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-stringFacet>[<span class=prodNo>28</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">stringFacet</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#prod-stringLength>stringLength</a></span> <span class=prod><a class=grammarRef href=#term-INTEGER>INTEGER</a></span><br>
| <span class=prod><a class=grammarRef href=#term-REGEXP>REGEXP</a></span></code></td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-stringLength>[<span class=prodNo>29</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">stringLength</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"LENGTH" | "MINLENGTH" | "MAXLENGTH"</code></td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="nob internalDFN" href=#dfn-stringfacet data-link-type=dfn id=ref-for-dfn-stringfacet-5>stringFacet</a></td>
 <td>=</td>
 <td>(<span class=param>length</span>|<span class=param>minlength</span>|<span class=param>maxlength</span>):<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-10>INTEGER</a> | <span class=param>pattern</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-10>STRING</a>
 <span class=param>flags</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-11>STRING</a>? ;
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-numericFacet>[<span class=prodNo>30</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">numericFacet</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#prod-numericRange>numericRange</a></span> <span class=prod><a class=grammarRef href=#prod-numericLiteral>numericLiteral</a></span><br>
| <span class=prod><a class=grammarRef href=#prod-numericLength>numericLength</a></span> <span class=prod><a class=grammarRef href=#term-INTEGER>INTEGER</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-numericRange>[<span class=prodNo>31</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">numericRange</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"MININCLUSIVE" | "MINEXCLUSIVE" | "MAXINCLUSIVE" | "MAXEXCLUSIVE"</code></td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-numericLength>[<span class=prodNo>32</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">numericLength</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"TOTALDIGITS" | "FRACTIONDIGITS"</code></td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-numericfacet data-link-type=dfn id=ref-for-dfn-numericfacet-5>numericFacet</a></td>
 <td>=</td>
 <td>(<span class=param>mininclusive</span>|<span class=param>minexclusive</span>|<span class=param>maxinclusive</span>|<span class=param>maxexclusive</span>):<a class="nobref internalDFN" href=#dfn-numericliteral data-link-type=dfn id=ref-for-dfn-numericliteral-2>numericLiteral</a> | (<span class=param>totaldigits</span>|<span class=param>fractiondigits</span>):<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-11>INTEGER</a> ;</td>
 </tr>
 </tbody>
 <tbody class=grammarParagraph style="border-left:thin solid white;border-right:thin solid white">
 <tr class=borderHack>
 <td></td>
 <td colspan=3></td>
 </tr>
 <tr>
 <td colspan=4>
 <p>
 Shape defintions associate a <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-13>triple expression</a> with a closed flag and a list of partially
 constrained (extra) <a data-lt=predicate data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicates</a>.
 Any <a data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a> appearing in a <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-14>triple expression</a> is fully constrained unless it appears in
 the list of extras.
 </p>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-shapeDefinition>[<span class=prodNo>33</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shapeDefinition</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>(<span class=prod><a class=grammarRef href=#prod-extraPropertySet>extraPropertySet</a></span> | "CLOSED")* '{' <span class=prod><a class=grammarRef href=#prod-tripleExpression>tripleExpression</a></span>? '}' <span class=prod><a class=grammarRef href=#prod-annotation>annotation</a></span>* <span class=prod><a class=grammarRef href=#prod-semanticActions>semanticActions</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-inlineShapeDefinition>[<span class=prodNo>34</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">inlineShapeDefinition</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>(<span class=prod><a class=grammarRef href=#prod-extraPropertySet>extraPropertySet</a></span> | "CLOSED")* '{' <span class=prod><a class=grammarRef href=#prod-tripleExpression>tripleExpression</a></span>? '}'</code>
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-shape data-link-type=dfn id=ref-for-dfn-shape-20>Shape</a></td>
 <td>{</td>
 <td>
 <span class=param>extends</span>:[<a class="objref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-20>shapeExprLabel</a>]?
 <span class=param>closed</span>:<a href=#dfn-bool class=internalDFN data-link-type=dfn id=ref-for-dfn-bool-7>BOOL</a>?
 <span class=param>extra</span>:[<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-16>IRIREF</a>+]?
 <span class=param>expression</span>:<a class="nobref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-8>tripleExpr</a>?
 
 <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-13>SemAct</a>+]?
 <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-5>Annotation</a>+]? }
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 <ul>
 <li><span class=param>closed</span> is true if the "<code>CLOSED</code>" choice was matched one or
 more times.</li>
 <li><span class=param>extra</span> is the set of IRIs matching the <a class=grammarRef href=#prod-extraPropertySet>extraPropertySet</a> production.</li>
 <li><span class=param>expression</span> comes from the <a class=grammarRef href=#prod-tripleExpression>tripleExpression</a> production.</li>
 <li><span class=param>annotations</span> is the set of <a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-6>Annotation</a>s matching
 the <span class=prod><a class=grammarRef href=#prod-annotation>annotation</a></span>
 production.</li>
 <li><span class=param>semActs</span> is the set of semantic actions matching the <span class=prod><a class=grammarRef href=#prod-semanticActions>semanticActions</a></span>
 production.</li>
 </ul>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-extraPropertySet>[<span class=prodNo>35</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">extraPropertySet</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"EXTRA" <span class=prod><a class=grammarRef href=#prod-predicate>predicate</a></span>+</code>
 </td>
 </tr>
 </tbody>
 <tbody class=grammarParagraph>
 <tr>
 <td colspan=4>
 <p>
 Triple expressions are arrangements of triple constraints.
 </p>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-tripleExpression>[<span class=prodNo>36</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">tripleExpression</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-oneOfTripleExpr>oneOfTripleExpr</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-oneOfTripleExpr>[<span class=prodNo>37</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">oneOfTripleExpr</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-groupTripleExpr>groupTripleExpr</a></span> | <span class=prod><a class=grammarRef href=#prod-multiElementOneOf>multiElementOneOf</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-multiElementOneOf>[<span class=prodNo>38</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">multiElementOneOf</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-groupTripleExpr>groupTripleExpr</a></span> ('|' <span class=prod><a class=grammarRef href=#prod-groupTripleExpr>groupTripleExpr</a></span>)+</code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 If the right <a class=grammarRef href=#prod-groupTripleExpr>groupTripleExpr</a> matches one or more
 times, the result is a <a class="obj internalDFN" href=#dfn-oneof data-link-type=dfn id=ref-for-dfn-oneof-5>OneOf</a> object with <span class=param>expressions</span>
 containing the first <a class=grammarRef href=#prod-groupTripleExpr>groupTripleExpr</a> followed by
 the ordered list from the second <a class=grammarRef href=#prod-groupTripleExpr>groupTripleExpr</a>:
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td class=obj><a href=#dfn-oneof class=internalDFN data-link-type=dfn id=ref-for-dfn-oneof-6>OneOf</a></td>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-13>tripleExprLabel</a>? <span class=param>expressions</span>:[<a class="nobref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-9>tripleExpr</a>{2,}] <span class=param>min</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-12>INTEGER</a>? <span class=param>max</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-13>INTEGER</a>? <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-14>SemAct</a>+]? <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-7>Annotation</a>+]? }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 otherwise the result is the left <a class=grammarRef href=#prod-groupTripleExpr>groupTripleExpr</a>.
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-groupTripleExpr>[<span class=prodNo>40</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">groupTripleExpr</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-singleElementGroup>singleElementGroup</a></span> | <span class=prod><a class=grammarRef href=#prod-multiElementGroup>multiElementGroup</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-singleElementGroup>[<span class=prodNo>41</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">singleElementGroup</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-unaryTripleExpr>unaryTripleExpr</a></span> ';'?</code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-multiElementGroup>[<span class=prodNo>42</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">multiElementGroup</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-unaryTripleExpr>unaryTripleExpr</a></span> (';' <span class=prod><a class=grammarRef href=#prod-unaryTripleExpr>unaryTripleExpr</a></span>)+ ';'?</code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 If the right <a class=grammarRef href=#prod-unaryTripleExpr>unaryTripleExpr</a> matches one or more
 times, the result is a <a class="obj internalDFN" href=#dfn-eachof data-link-type=dfn id=ref-for-dfn-eachof-7>EachOf</a> object with <span class=param>expressions</span>
 containing the first <a class=grammarRef href=#prod-unaryTripleExpr>unaryTripleExpr</a> followed by
 the ordered list from the second <a class=grammarRef href=#prod-unaryTripleExpr>unaryTripleExpr</a>:
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td class=obj><a href=#dfn-eachof class=internalDFN data-link-type=dfn id=ref-for-dfn-eachof-8>EachOf</a></td>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-14>tripleExprLabel</a>? <span class=param>expressions</span>:[<a class="nobref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-10>tripleExpr</a>{2,}] <span class=param>min</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-14>INTEGER</a>? <span class=param>max</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-15>INTEGER</a>? <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-15>SemAct</a>+]? <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-8>Annotation</a>+]? }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 otherwise the result is the left <a class=grammarRef href=#prod-unaryTripleExpr>unaryTripleExpr</a>.
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-unaryTripleExpr>[<span class=prodNo>43</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">unaryTripleExpr</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content>('$' <span class=prod><a class=grammarRef href=#prod-tripleExprLabel>tripleExprLabel</a></span>)? (<span class=prod><a class=grammarRef href=#prod-tripleConstraint>tripleConstraint</a></span> | <span class=prod><a class=grammarRef href=#prod-bracketedTripleExpr>bracketedTripleExpr</a></span>)<br>
| <span class=prod><a class=grammarRef href=#prod-include>include</a></span></code></td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-bracketedTripleExpr>[<span class=prodNo>44</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">bracketedTripleExpr</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'(' <span class=prod><a class=grammarRef href=#prod-tripleExpression>tripleExpression</a></span> ')' <span class=prod><a class=grammarRef href=#prod-cardinality>cardinality</a></span>? <span class=prod><a class=grammarRef href=#prod-annotation>annotation</a></span>* <span class=prod><a class=grammarRef href=#prod-semanticActions>semanticActions</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=grammarParagraph>
 <tr>
 <td colspan=4>
 <p>
 Triple constraints are matched against RDF triples.
 </p>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-tripleConstraint>[<span class=prodNo>45</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">tripleConstraint</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-senseFlags>senseFlags</a></span>? <span class=prod><a class=grammarRef href=#prod-predicate>predicate</a></span> <span class=prod><a class=grammarRef href=#prod-inlineShapeExpression>inlineShapeExpression</a></span> <span class=prod><a class=grammarRef href=#prod-cardinality>cardinality</a></span>? <span class=prod><a class=grammarRef href=#prod-annotation>annotation</a></span>* <span class=prod><a class=grammarRef href=#prod-semanticActions>semanticActions</a></span></code>
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-tripleconstraint data-link-type=dfn id=ref-for-dfn-tripleconstraint-15>TripleConstraint</a></td>
 <td>{</td>
 <td><span class=param>id</span>:<a href=#dfn-tripleexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprlabel-15>tripleExprLabel</a>? <span class=param>inverse</span>:<a href=#dfn-bool class=internalDFN data-link-type=dfn id=ref-for-dfn-bool-8>BOOL</a>?
 <span class=param>predicate</span>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-17>IRIREF</a> <span class=param>valueExpr</span>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-27>shapeExpr</a>? <span class=param>min</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-16>INTEGER</a>? <span class=param>max</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-17>INTEGER</a>? <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-16>SemAct</a>+]? <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-9>Annotation</a>+]? }
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 <ul>
 <li><span class=param>inverse</span> is true if the <span class=prod><a class=grammarRef href=#prod-senseFlags>senseFlags</a></span> matched "<code>^</code>".</li>
 <li><a class=param data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a> comes from the <a class=grammarRef href=#prod-predicate>predicate</a> production.</li>
 <li><span class=param>valueExpr</span> comes from the <a class=grammarRef href=#prod-inlineShapeExpression>inlineShapeExpression</a> production. It it is an empty shape
 <code>{"type": "Shape"}</code>, <span class=param>valueExpr</span> is not assigned.
 </li>
 <li><span class=param>min</span> comes from the <a class=grammarRef href=#prod-cardinality>cardinality</a> production.</li>
 <li><span class=param>max</span> comes from the <a class=grammarRef href=#prod-cardinality>cardinality</a> production.</li>
 <li><span class=param>annotations</span> is the set of <a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-10>Annotation</a>s matching
 the <span class=prod><a class=grammarRef href=#prod-annotation>annotation</a></span>
 production.</li>
 <li><span class=param>semActs</span> is the set of semantic actions matching the <span class=prod><a class=grammarRef href=#prod-semanticActions>semanticActions</a></span>
 production.</li>
 </ul>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-cardinality>[<span class=prodNo>46</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">cardinality</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'*' | '+' | '?' | <span class=prod><a class=grammarRef href=#term-REPEAT_RANGE>REPEAT_RANGE</a></span></code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>
 In <a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-13>ShExJ</a>, <code>"*"</code> is represented as <code>-1</code>, standing for the unbounded
 cardinality..
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-senseFlags>[<span class=prodNo>47</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">senseFlags</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'^'</code></td>
 </tr>
 </tbody>
 <tbody class=grammarParagraph>
 <tr>
 <td colspan=4>
 <p>
 Value sets identify ranges of RDF nodes by explicit inclusion or by range (indicated by
 "<code>~</code>").
 Ranges may include exclusions, which may also be ranges but must not in turn contain exclusions.
 A <a class="param internalDFN" href=#dfn-valuesetvalue data-link-type=dfn id=ref-for-dfn-valuesetvalue-4>valueSetValue</a> may be an <a class="param internalDFN" href=#dfn-objectvalue data-link-type=dfn id=ref-for-dfn-objectvalue-4>objectValue</a> or one of <a class="param internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-7>IriStem</a>, <a class="param internalDFN" href=#dfn-iristemrange data-link-type=dfn id=ref-for-dfn-iristemrange-3>IriStemRange</a>, <a class="param internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-7>LiteralStem</a>, <a class="param internalDFN" href=#dfn-literalstemrange data-link-type=dfn id=ref-for-dfn-literalstemrange-3>LiteralStemRange</a>, <a class="param internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-7>LanguageStem</a>, <a class="param internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-3>LanguageStemRange</a>, .
 </p>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-valueSet>[<span class=prodNo>48</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">valueSet</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'[' <span class=prod><a class=grammarRef href=#prod-valueSetValue>valueSetValue</a></span>* ']'</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-valueSetValue>[<span class=prodNo>49</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">valueSetValue</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-iriRange>iriRange</a></span> | <span class=prod><a class=grammarRef href=#prod-literalRange>literalRange</a></span> | <span class=prod><a class=grammarRef href=#prod-languageRange>languageRange</a></span><br>
| <span class=prod><a class=grammarRef href=#prod-exclusion>exclusion</a></span>+</code></td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If "<code>.</code>" matches and <span class=prod><a class=grammarRef href=#prod-exclusion>exclusion</a></span> matches one or more times, all matched items must be
 consistently iri, literal, or language. <code class="production prod">valueSetValue</code> returns
 either a <a class="obj internalDFN" href=#dfn-iristemrange data-link-type=dfn id=ref-for-dfn-iristemrange-4>IriStemRange</a>, <a class="obj internalDFN" href=#dfn-literalstemrange data-link-type=dfn id=ref-for-dfn-literalstemrange-4>LiteralStemRange</a>, or <a class="obj internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-4>LanguageStemRange</a> object with <span class=param>exclusions</span> equal to the set
 of results of <span class=prod><a class=grammarRef href=#prod-exclusion>exclusion</a></span>:</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-iristemrange data-link-type=dfn id=ref-for-dfn-iristemrange-5>IriStemRange</a></td>
 <td>{</td>
 <td><span class=param>stem</span>:(<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-18>IRIREF</a> | <a class="objref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-5>Wildcard</a>) <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-iriref data-link-type=dfn id=ref-for-dfn-iriref-19>IRIREF</a>|<a class="objref internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-8>IriStem</a> +] }</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-literalstemrange data-link-type=dfn id=ref-for-dfn-literalstemrange-5>LiteralStemRange</a></td>
 <td>{</td>
 <td><span class=param>stem</span>:(<a class="nobref internalDFN" href=#dfn-string data-link-type=dfn id=ref-for-dfn-string-12>STRING</a> | <a class="objref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-6>Wildcard</a>) <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-string data-link-type=dfn id=ref-for-dfn-string-13>STRING</a>|<a class="objref internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-8>LiteralStem</a> +] }
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-5>LanguageStemRange</a></td>
 <td>{</td>
 <td><span class=param>stem</span>:(<a href=#dfn-langtag class=internalDFN data-link-type=dfn id=ref-for-dfn-langtag-5>LANGTAG</a> | <a class="objref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-7>Wildcard</a>) <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-langtag data-link-type=dfn id=ref-for-dfn-langtag-6>LANGTAG</a>|<a class="objref internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-8>LanguageStem</a> +] }
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If "<code>~</code>" matches with no <span class=prod><a class=grammarRef href=#prod-exclusion>exclusion</a></span>, <code class="production prod">valueSetValue</code>
 returns a <a class="obj internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-8>Wildcard</a> object:</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-9>Wildcard</a></td>
 <td>{</td>
 <td><span class=comment>/* empty */</span> }</td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-exclusion>[<span class=prodNo>50</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">exclusion</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'.' (<span class=prod><a class=grammarRef href=#prod-iriExclusion>iriExclusion</a></span> | <span class=prod><a class=grammarRef href=#prod-literalExclusion>literalExclusion</a></span> | <span class=prod><a class=grammarRef href=#prod-languageExclusion>languageExclusion</a></span>) +</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-iriExclusion>[<span class=prodNo>50.1</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">iriExclusion</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'-' <span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> '~'?</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-literalExclusion>[<span class=prodNo>50.2</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">literalExclusion</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'-' <span class=prod><a class=grammarRef href=#prod-literal>literal</a></span> '~'?</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-languageExclusion>[<span class=prodNo>50.3</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">languageExclusion</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'-' <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span> '~'?</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-iriRange>[<span class=prodNo>51</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">iriRange</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> ('~' <span class=prod><a class=grammarRef href=#prod-iriExclusion>iriExclusion</a></span>*)?</code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If <span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> matches with
 no "<code>~</code>", iriRange returns <span class=prod><a class=grammarRef href=#prod-iri>iri</a></span>.</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If <span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> and
 "<code>~</code>" match with no <span class=prod><a class=grammarRef href=#prod-iriExclusion>iriExclusion</a></span>, iriRange returns a <a class="obj internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-9>IriStem</a>
 object:</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-10>IriStem</a></td>
 <td>{</td>
 <td><span class=param>stem</span>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-20>IRIREF</a> }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If <span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> and
 "<code>~</code>" match and <span class=prod><a class=grammarRef href=#prod-iriExclusion>iriExclusion</a></span> matches one or more times, iriRange returns a <a class="obj internalDFN" href=#dfn-iristemrange data-link-type=dfn id=ref-for-dfn-iristemrange-6>IriStemRange</a> object with <span class=param>exclusions</span> equal to the set of
 results of <span class=prod><a class=grammarRef href=#prod-iriExclusion>iriExclusion</a></span>:
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-iristemrange data-link-type=dfn id=ref-for-dfn-iristemrange-7>IriStemRange</a></td>
 <td>{</td>
 <td><span class=param>stem</span>:(<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-21>IRIREF</a> | <a class="objref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-10>Wildcard</a>) <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-iriref data-link-type=dfn id=ref-for-dfn-iriref-22>IRIREF</a>|<a class="objref internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-11>IriStem</a> +] }</td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-iriExclusion>[<span class=prodNo>52</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">iriExclusion</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'-' <span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> '~'?</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-literalRange>[<span class=prodNo>53</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">literalRange</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#prod-literal>literal</a></span> ('~' <span class=prod><a class=grammarRef href=#prod-literalExclusion>literalExclusion</a></span>*)?</code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If <span class=prod><a class=grammarRef href=#prod-literal>literal</a></span>
 matches with no "<code>~</code>", literalRange returns <span class=prod><a class=grammarRef href=#prod-literal>literal</a></span>.</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If <span class=prod><a class=grammarRef href=#prod-literal>literal</a></span> and
 "<code>~</code>" match with no <span class=prod><a class=grammarRef href=#prod-literalExclusion>literalExclusion</a></span>, literalRange returns a <a class="obj internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-9>LiteralStem</a> object:</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-10>LiteralStem</a></td>
 <td>{</td>
 <td><span class=param>stem</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-14>STRING</a> }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If <span class=prod><a class=grammarRef href=#prod-literal>literal</a></span> and
 "<code>~</code>" match and <span class=prod><a class=grammarRef href=#prod-literalExclusion>literalExclusion</a></span> matches one or more times, literalRange
 returns a <a class="obj internalDFN" href=#dfn-literalstemrange data-link-type=dfn id=ref-for-dfn-literalstemrange-6>LiteralStemRange</a> object with <span class=param>exclusions</span> equal to
 the set of results of <span class=prod><a class=grammarRef href=#prod-literalExclusion>literalExclusion</a></span>:</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-literalstemrange data-link-type=dfn id=ref-for-dfn-literalstemrange-7>LiteralStemRange</a></td>
 <td>{</td>
 <td><span class=param>stem</span>:(<a class="nobref internalDFN" href=#dfn-string data-link-type=dfn id=ref-for-dfn-string-15>STRING</a> | <a class="objref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-11>Wildcard</a>) <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-string data-link-type=dfn id=ref-for-dfn-string-16>STRING</a>|<a class="objref internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-11>LiteralStem</a> +] }
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-literalExclusion>[<span class=prodNo>54</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">literalExclusion</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'-' <span class=prod><a class=grammarRef href=#prod-literal>literal</a></span> '~'?</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-languageRange>[<span class=prodNo>55</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">languageRange</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span> ('~' <span class=prod><a class=grammarRef href=#prod-languageExclusion>languageExclusion</a></span>*)?<br>
| <span class=prod>'@' '~' <span class=prod><a class=grammarRef href=#prod-languageExclusion>languageExclusion</a></span>*</span></code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span>
 matches with no "<code>~</code>" match , languageRange returns a <a class="obj internalDFN" href=#dfn-language data-link-type=dfn id=ref-for-dfn-language-3>Language</a> object with
 <span class=param>languageTag</span> equal to <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span>:
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-language data-link-type=dfn id=ref-for-dfn-language-4>Language</a></td>
 <td>{</td>
 <td><span class=param>languageTag</span>:<a href=#dfn-langtag class=internalDFN data-link-type=dfn id=ref-for-dfn-langtag-7>LANGTAG</a> }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span> and
 "<code>~</code>" match with no <span class=prod><a class=grammarRef href=#prod-languageExclusion>languageExclusion</a></span>, languageRange returns a <a class="obj internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-9>LanguageStem</a> object:</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-10>LanguageStem</a></td>
 <td>{</td>
 <td><span class=param>stem</span>:<a href=#dfn-langtag class=internalDFN data-link-type=dfn id=ref-for-dfn-langtag-8>LANGTAG</a> }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span> and
 "<code>~</code>" match and <span class=prod><a class=grammarRef href=#prod-languageExclusion>languageExclusion</a></span> matches one or more times, languageRange
 returns a <a class="obj internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-6>LanguageStemRange</a> object with <span class=param>exclusions</span> equal
 to the set of results of <span class=prod><a class=grammarRef href=#prod-languageExclusion>languageExclusion</a></span>:</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-7>LanguageStemRange</a></td>
 <td>{</td>
 <td><span class=param>stem</span>:(<a href=#dfn-langtag class=internalDFN data-link-type=dfn id=ref-for-dfn-langtag-9>LANGTAG</a> | <a class="objref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-12>Wildcard</a>) <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-langtag data-link-type=dfn id=ref-for-dfn-langtag-10>LANGTAG</a>|<a class="objref internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-11>LanguageStem</a> +] }
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If '@' '~' matched with no <span class=prod><a class=grammarRef href=#prod-languageExclusion>languageExclusion</a></span>, languageRange returns a <a class="obj internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-8>LanguageStemRange</a> object with an empty <span class=param>stem</span>:</td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-9>LanguageStemRange</a></td>
 <td>{</td>
 <td><span class=param>stem</span>: "" }</td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>If '@' '~' matched and <span class=prod><a class=grammarRef href=#prod-languageExclusion>languageExclusion</a></span> matches one or more times, languageRange
 returns a <a class="obj internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-10>LanguageStemRange</a> object with an empty <span class=param>stem</span> ad
 <span class=param>exclusions</span> equal to the set of results of <span class=prod><a class=grammarRef href=#prod-languageExclusion>languageExclusion</a></span>:
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-11>LanguageStemRange</a></td>
 <td>{</td>
 <td><span class=param>stem</span>: "" <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-langtag data-link-type=dfn id=ref-for-dfn-langtag-11>LANGTAG</a>|<a class="objref internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-12>LanguageStem</a> +] }</td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-languageExclusion>[<span class=prodNo>56</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">languageExclusion</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'-' <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span> '~'?</code>
 </td>
 </tr>
 </tbody>
 <tbody class=grammarParagraph>
 <tr>
 <td colspan=4>
 <p>
 Triple expressions can include the <span class=prod><a class=grammarRef href=#prod-shapeExpression>shapeExpression</a></span> in a <span class=prod><a class=grammarRef href=#prod-shapeExprDecl>shapeExprDecl</a></span>.
 </p>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-include>[<span class=prodNo>57</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">include</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'&amp;' <span class=prod><a class=grammarRef href=#prod-tripleExprLabel>tripleExprLabel</a></span></code>
 </td>
 </tr>
 <tr class=params>
 <td></td>
 <td colspan=3>Per the <a href=#tripleExprRef-requirement>triple expression refrence requirement</a>,
 <span class=param>tripleExprLabel</span> property <em class=rfc2119>MUST</em> appear in the schema's <a class="param internalDFN" href=#dfn-shapes data-link-type=dfn id=ref-for-dfn-shapes-11>shapes</a> map and the corresponding <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-15>triple expression</a> <em class=rfc2119>MUST</em> be a <span class=jobjref><a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-21>Shape</a></span> with a <span class=param>tripleExpr</span>.
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-tripleexprref data-link-type=dfn id=ref-for-dfn-tripleexprref-9>tripleExprRef</a></td>
 <td>=</td>
 <td><a class="nobref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-16>tripleExprLabel</a> ;</td>
 </tr>
 </tbody>
 <tbody class=grammarParagraph>
 <tr class=borderHack>
 <td></td>
 <td colspan=3></td>
 </tr>
 <tr>
 <td colspan=4>
 <p>
 Triple expressions can include annotations in the form of a tuple of a <span class=prod><a class=grammarRef href=#prod-predicate>predicate</a></span> and an <span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> or <span class=prod><a class=grammarRef href=#prod-literal>literal</a></span>.
 </p>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-annotation>[<span class=prodNo>58</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">annotation</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"//" <span class=prod><a class=grammarRef href=#prod-predicate>predicate</a></span> (<span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> | <span class=prod><a class=grammarRef href=#prod-literal>literal</a></span>)</code>
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-11>Annotation</a></td>
 <td>{</td>
 <td><a class=param data-cite=rdf11-concepts#dfn-predicate data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-23>IRIREF</a> <span class=param>object</span>:<a class="nobref internalDFN" href=#dfn-objectvalue data-link-type=dfn id=ref-for-dfn-objectvalue-5>objectValue</a> }</td>
 </tr>
 </tbody>
 <tbody class=grammarParagraph>
 <tr class=borderHack>
 <td></td>
 <td colspan=3></td>
 </tr>
 <tr>
 <td colspan=4>
 <p>
 Triple expressions can include semantic actions consisting of an <span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> and an optional code string.
 </p>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-semanticActions>[<span class=prodNo>59</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">semanticActions</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-codeDecl>codeDecl</a></span>*</code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-codeDecl>[<span class=prodNo>60</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">codeDecl</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'%' <span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> (<span class=prod><a class=grammarRef href=#term-CODE>CODE</a></span> | '%')</code>
 </td>
 </tr>
 <tr class=obj>
 <td></td>
 <td><a class="obj internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-17>SemAct</a></td>
 <td>{</td>
 <td><span class=param>name</span>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-24>IRIREF</a> <span class=param>code</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-17>STRING</a>? }</td>
 </tr>
 </tbody>
 
 <tbody class=grammarParagraph>
 <tr class=borderHack>
 <td></td>
 <td colspan=3></td>
 </tr>
 <tr>
 <td colspan=4>
 <p>
 The remaining productions come from the specifications for SPARQL and Turtle.
 </p>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-literal>[<span class=prodNo>13t</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">literal</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-rdfLiteral>rdfLiteral</a></span> | <span class=prod><a class=grammarRef href=#prod-numericLiteral>numericLiteral</a></span> | <span class=prod><a class=grammarRef href=#prod-booleanLiteral>booleanLiteral</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-predicate>[<span class=prodNo>61</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">predicate</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> | <span class=prod><a class=grammarRef href=#term-RDF_TYPE>RDF_TYPE</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-datatype>[<span class=prodNo>62</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">datatype</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-iri>iri</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-shapeExprLabel>[<span class=prodNo>63</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">shapeExprLabel</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> | <span class=prod><a class=grammarRef href=#prod-blankNode>blankNode</a></span></code>
 </td>
 </tr>
 <tr style=vertical-align:baseline>
 <td id=prod-tripleExprLabel>[<span class=prodNo>64</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">tripleExprLabel</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-iri>iri</a></span> | <span class=prod><a class=grammarRef href=#prod-blankNode>blankNode</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-numericLiteral>[<span class=prodNo>16t</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">numericLiteral</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#term-INTEGER>INTEGER</a></span> | <span class=prod><a class=grammarRef href=#term-DECIMAL>DECIMAL</a></span> | <span class=prod><a class=grammarRef href=#term-DOUBLE>DOUBLE</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-rdfLiteral>[<span class=prodNo>65</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">rdfLiteral</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#prod-langString>langString</a></span> | <span class=prod><a class=grammarRef href=#prod-string>string</a></span> ("^^" <span class=prod><a class=grammarRef href=#prod-datatype>datatype</a></span>)?</code>
 </td>
 </tr>
 <tr id=handle-RDFLiteral class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal> literal </a></td>
 <td></td>
 <td>The literal has a lexical form of the first rule argument, <code>String</code>. If the
 <code>'^^' iri</code> rule matched, the datatype is <code>iri</code> and the literal has no <a data-cite=rdf11-concepts#dfn-language-tag data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag>language
 tag</a>. If the <code>langString</code> rule matched, the datatype is <code>rdf:langString</code> and
 the <a data-cite=rdf11-concepts#dfn-language-tag data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag>language tag</a> is extracted from <code>langTag</code>. If neither matched, the datatype is
 <code>xsd:string</code> and the literal has no <a data-cite=rdf11-concepts#dfn-language-tag data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag>language tag</a>.
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-booleanLiteral>[<span class=prodNo>134s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">booleanLiteral</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"true" | "false"</code></td>
 </tr>
 <tr id=handle-BooleanLiteral class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal> literal </a></td>
 <td></td>
 <td>The literal has a lexical form of the <code>true</code> or <code>false</code>, depending on which
 matched the input, and a datatype of <code>xsd:boolean</code>.</td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-string>[<span class=prodNo>135s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">string</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#term-STRING_LITERAL1>STRING_LITERAL1</a></span> | <span class=prod><a class=grammarRef href=#term-STRING_LITERAL_LONG1>STRING_LITERAL_LONG1</a></span><br>
| <span class=prod><a class=grammarRef href=#term-STRING_LITERAL2>STRING_LITERAL2</a></span> | <span class=prod><a class=grammarRef href=#term-STRING_LITERAL_LONG2>STRING_LITERAL_LONG2</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-langString>[<span class=prodNo>66</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">langString</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#term-LANG_STRING_LITERAL1>LANG_STRING_LITERAL1</a></span> | <span class=prod><a class=grammarRef href=#term-LANG_STRING_LITERAL_LONG1>LANG_STRING_LITERAL_LONG1</a></span><br>
| <span class=prod><a class=grammarRef href=#term-LANG_STRING_LITERAL2>LANG_STRING_LITERAL2</a></span> | <span class=prod><a class=grammarRef href=#term-LANG_STRING_LITERAL_LONG2>LANG_STRING_LITERAL_LONG2</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-iri>[<span class=prodNo>136s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">iri</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#term-IRIREF>IRIREF</a></span> | <span class=prod><a class=grammarRef href=#prod-prefixedName>prefixedName</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-prefixedName>[<span class=prodNo>137s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">prefixedName</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#term-PNAME_LN>PNAME_LN</a></span> | <span class=prod><a class=grammarRef href=#term-PNAME_NS>PNAME_NS</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=prod>
 <tr style=vertical-align:baseline>
 <td id=prod-blankNode>[<span class=prodNo>138s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production prod">blankNode</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#term-BLANK_NODE_LABEL>BLANK_NODE_LABEL</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=grammarParagraph>
 <tr>
 <td colspan=4>
 <div class=header-wrapper><h2 id=terminals>Terminals</h2><a class="self-link sf-hidden" href=#terminals aria-label="Permalink for this Section"></a></div>
 <p>
 Terminals return:
 </p>
 <ul>
 <li>the RDF abstract types <a class=math data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a>, <a data-cite=rdf11-concepts#dfn-lexical-form href=https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form>lexical form</a>, <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal>literal</a>, <dfn data-cite=rdf11-concepts#dfn-language-tag id=dfn-language-tag class=externalDFN data-no-export data-dfn-type=dfn><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag data-cite=rdf11-concepts data-cite-path data-cite-frag=#dfn-language-tag>language tag</a></dfn>.</li>
 <li>a string of unicode codepoints for <a href=#term-CODE>CODE</a>.</li>
 <li>a <code>repeat range</code> for <a href=#term-REPEAT_RANGE>REPEAT_RANGE</a>. A
 <code>repeat range</code> is a tuple of non-negative integers or a non-negative integer and a token
 for <code>*</code>.
 </li>
 </ul>
 </td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-CODE>[<span class=prodNo>67</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">CODE</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"{" ([^%\\] | "\\" [%\\] | <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span>)* "%" "}"</code>
 </td>
 </tr>
 <tr id=handle-IRIREF-2 class=params>
 <td></td>
 <td>returns: a string of unicode codepoints</td>
 <td></td>
 <td>The characters between "{" and "%}" are taken, with the <a data-cite=turtle#numeric href=https://www.w3.org/TR/turtle/#numeric>numeric escape
 sequences</a> unescaped, to form the unicode string of the IRI.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-REPEAT_RANGE>[<span class=prodNo>68</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">REPEAT_RANGE</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"{" <span class=prod><a class=grammarRef href=#term-INTEGER>INTEGER</a></span> ( "," (<span class=prod><a class=grammarRef href=#term-INTEGER>INTEGER</a></span> | "*")? )? "}"</code>
 </td>
 </tr>
 <tr id=handle-REPEAT_RANGE class=params>
 <td></td>
 <td>returns: repeat range</td>
 <td></td>
 <td>The base-10 numeric values of <span class=prod><a class=grammarRef href=#term-INTEGER>INTEGER</a></span> are taken or a non-negative integer and an <code>*</code>
 token if "<code>*</code>" was matched.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-RDF_TYPE>[<span class=prodNo>69</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">RDF_TYPE</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"a"</code></td>
 </tr>
 <tr id=handle-RDF_TYPE class=params>
 <td></td>
 <td> returns: <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri> IRI </a></td>
 <td></td>
 <td>The <code>iri</code> <code>http://www.w3.org/1999/02/22-rdf-syntax-ns#</code> is returned.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-IRIREF>[<span class=prodNo>18t</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">IRIREF</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"&lt;" ([^#0000- &lt;&gt;\"{}|^`\\] | <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span>)* "&gt;"</code>
 </td>
 </tr>
 <tr id=handle-IRIREF class=params>
 <td></td>
 <td>returns: <a class=math data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRI</a></td>
 <td></td>
 <td>The characters between "&lt;" and "&gt;" are taken, with the <a data-cite=turtle#numeric href=https://www.w3.org/TR/turtle/#numeric>numeric
 escape sequences</a> unescaped, to form the unicode string of the IRI. Relative IRI resolution is
 performed per Turtle <a class=sectionRef data-cite=turtle#sec-iri-references href=https://www.w3.org/TR/turtle/#sec-iri-references>Section 6.3</a>.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-PNAME_NS>[<span class=prodNo>140s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">PNAME_NS</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#term-PN_PREFIX>PN_PREFIX</a></span>? ":"</code>
 </td>
 </tr>
 <tr id=handle-PNAME_NS class=params>
 <td></td>
 <td>returns: <a href=#dfn-prefix class=internalDFN data-link-type=dfn id=ref-for-dfn-prefix-1> PREFIX </a></td>
 <td></td>
 <td>When used in a <a href=#prod-prefixDecl>prefixDecl</a> production, the prefix is a potentially empty
 unicode string matching the first argument of the rule and serves as a key into the <a href=#dfn-prefixes-map class=internalDFN data-link-type=dfn id=ref-for-dfn-prefixes-map-1>prefixes map</a>.
 </td>
 </tr>
 <tr id=handle-PNAME_NS2 class=params>
 <td></td>
 <td> returns: <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri> IRI </a></td>
 <td></td>
 <td>When used elsewhere, the <code>iri</code> is the value in the <a href=#dfn-prefixes-map class=internalDFN data-link-type=dfn id=ref-for-dfn-prefixes-map-2>prefixes map</a> corresponding to the
 first argument of the rule.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-PNAME_LN>[<span class=prodNo>141s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">PNAME_LN</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#term-PNAME_NS>PNAME_NS</a></span> <span class=prod><a class=grammarRef href=#term-PN_LOCAL>PN_LOCAL</a></span></code>
 </td>
 </tr>
 <tr id=handle-PNAME_LN class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri> IRI </a></td>
 <td></td>
 <td>A potentially empty <a href=#dfn-prefix class=internalDFN data-link-type=dfn id=ref-for-dfn-prefix-2>prefix</a> is identified by the first token, <code>PNAME_NS</code>. The unicode
 string of the IRI is formed by unescaping the <a href=https://tools.ietf.org/html/rfc3987#page-9>reserved characters</a> [<cite><a class=bibref data-link-type=biblio href=#bib-rfc7159 title="The JavaScript Object Notation (JSON) Data Interchange Format">rfc7159</a></cite>] in the second
 argument, <code>PN_LOCAL</code>, and concatenating this onto the <code>namespace</code> found in the
 <a href=#dfn-prefixes-map class=internalDFN data-link-type=dfn id=ref-for-dfn-prefixes-map-3>prefixes map</a>'s entry for <code>PNAME_NS</code>.
 </td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-ATPNAME_NS>[<span class=prodNo>70</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">ATPNAME_NS</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"@" <span class=prod><a class=grammarRef href=#term-PNAME_NS>PNAME_NS</a></span></code>
 </td>
 </tr>
 <tr id=handle-ATPNAME_NS class=params>
 <td></td>
 <td> returns: <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri> IRI </a></td>
 <td></td>
 <td>The <code>iri</code> is the value in the <a href=#dfn-prefixes-map class=internalDFN data-link-type=dfn id=ref-for-dfn-prefixes-map-4>prefixes map</a> corresponding to the second token of the
 rule.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-ATPNAME_LN>[<span class=prodNo>71</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">ATPNAME_LN</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"@" <span class=prod><a class=grammarRef href=#term-PNAME_LN>PNAME_LN</a></span></code>
 </td>
 </tr>
 <tr id=handle-ATPNAME_LN class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-iri data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri> IRI </a></td>
 <td></td>
 <td>A potentially empty <a href=#dfn-prefix class=internalDFN data-link-type=dfn id=ref-for-dfn-prefix-3>prefix</a> is identified by the second token, <code>PNAME_NS</code>. The
 unicode string of the IRI is formed by unescaping the <a href=https://tools.ietf.org/html/rfc3987#page-9>reserved characters</a> [<cite><a class=bibref data-link-type=biblio href=#bib-rfc7159 title="The JavaScript Object Notation (JSON) Data Interchange Format">rfc7159</a></cite>] in the third
 token, <code>PN_LOCAL</code>, and concatenating this onto the <code>namespace</code> found in the
 <a href=#dfn-prefixes-map class=internalDFN data-link-type=dfn id=ref-for-dfn-prefixes-map-5>prefixes map</a>'s entry for <code>PNAME_NS</code>.
 </td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-REGEXP>[<span class=prodNo>72</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">REGEXP</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'/' ([^/\\\n\r]<br>
&nbsp;&nbsp;&nbsp;&nbsp; | '\\' [nrt\\|.?*+(){}$-\[\]^/]<br>
&nbsp;&nbsp;&nbsp;&nbsp; | <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span><br>
&nbsp;&nbsp;&nbsp;&nbsp;)+ '/' [smix]*</code></td>
 </tr>
 <tr class=obj>
 <td></td>
 <td></td>
 <td>{</td>
 <td><span class=param>pattern</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-18>STRING</a> <span class=param>flags</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-19>STRING</a>? }
 </td>
 </tr>
 <tr id=handle-REGEXP class=params>
 <td></td>
 <td>returns: <a data-cite=ECMASCRIPT-6.0#sec-terms-and-definitions-object href=http://www.ecma-international.org/ecma-262/6.0/index.html#sec-terms-and-definitions-object>JSON object</a></td>
 <td></td>
 <td><span class=param>pattern</span> is a unicode string formed from the characters between the
 outermost '/'s by unescaping matches of '\\' '/' in the terminal pattern as well as the <a data-cite=turtle#numeric href=https://www.w3.org/TR/turtle/#numeric>numeric escape sequences</a> matched by <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span>.
 The remaining escape sequences are included verbatim in <span class=param>pattern</span>, e.g. <div class="inline shexc">
 <pre aria-busy=false><code class=hljs>^\/\t\\\U0001D4B8$</code></pre>
 </div> would become <div class="inline json">
 <pre aria-busy=false><code class=hljs>^/\t\\\U0001D4B8$</code></pre>
 </div>.<br>
 <span class=param>flags</span> is a sequence of the characters [smix] if any were matched. Otherwise
 no <span class=param>flags</span> attribute is returned.
 </td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-BLANK_NODE_LABEL>[<span class=prodNo>142s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">BLANK_NODE_LABEL</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"_:" (<span class=prod><a class=grammarRef href=#term-PN_CHARS_U>PN_CHARS_U</a></span> | [0-9]) ((<span class=prod><a class=grammarRef href=#term-PN_CHARS>PN_CHARS</a></span> | ".")* <span class=prod><a class=grammarRef href=#term-PN_CHARS>PN_CHARS</a></span>)?</code>
 </td>
 </tr>
 <tr id=handle-BLANK_NODE_LABEL class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-blank-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node>blank node</a></td>
 <td></td>
 <td>The characters following the "<code>_:</code>" form a <a data-cite=rdf11-concepts#dfn-blank-node-identifier data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier>blank node identifier</a>. This corresponds
 to any <a data-cite=rdf11-concepts#dfn-blank-node data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node>blank node</a> in the input dataset that had the same label.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-LANGTAG>[<span class=prodNo>145s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">LANGTAG</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"@" ([a-zA-Z])+ ("-" ([a-zA-Z0-9])+)*</code></td>
 </tr>
 <tr id=handle-LANGTAG class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-language-tag data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag>language tag</a></td>
 <td></td>
 <td>The characters following the <code>@</code> form the unicode string of the <a data-cite=rdf11-concepts#dfn-language-tag data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag>language tag</a>.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-INTEGER>[<span class=prodNo>19t</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">INTEGER</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>[+-]? [0-9]+</code></td>
 </tr>
 <tr id=handle-INTEGER class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal> literal </a></td>
 <td></td>
 <td>The literal has a lexical form of the input string, and a datatype of <code>xsd:integer</code>.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-DECIMAL>[<span class=prodNo>20t</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">DECIMAL</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>[+-]? [0-9]* "." [0-9]+</code></td>
 </tr>
 <tr id=handle-DECIMAL class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal> literal </a></td>
 <td></td>
 <td>The literal has a lexical form of the input string, and a datatype of <code>xsd:double</code>.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-DOUBLE>[<span class=prodNo>21t</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">DOUBLE</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>[+-]? ([0-9]+ "." [0-9]* <span class=prod><a class=grammarRef href=#term-EXPONENT>EXPONENT</a></span> | "."? [0-9]+ <span class=prod><a class=grammarRef href=#term-EXPONENT>EXPONENT</a></span>)</code>
 </td>
 </tr>
 <tr id=handle-DOUBLE class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-literal data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-literal> literal </a></td>
 <td></td>
 <td>The literal has a lexical form of the input string, and a datatype of <code>xsd:double</code>.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-EXPONENT>[<span class=prodNo>155s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">EXPONENT</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>[eE] [+-]? [0-9]+</code></td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-STRING_LITERAL1>[<span class=prodNo>156s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">STRING_LITERAL1</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"'" ([^'\\\n\r] | <span class=prod><a class=grammarRef href=#term-ECHAR>ECHAR</a></span> | <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span>)* "'"</code>
 </td>
 </tr>
 <tr id=handle-STRING_LITERAL1 class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-lexical-form href=https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form> lexical form</a></td>
 <td></td>
 <td>The characters between the outermost "'"s are taken, with <a data-cite=turtle#numeric href=https://www.w3.org/TR/turtle/#numeric>numeric</a>
 and <a data-cite=turtle#string href=https://www.w3.org/TR/turtle/#string>string</a> escape sequences unescaped, to form the unicode string of a
 lexical form.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-STRING_LITERAL2>[<span class=prodNo>157s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">STRING_LITERAL2</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'"' ([^\"\\\n\r] | <span class=prod><a class=grammarRef href=#term-ECHAR>ECHAR</a></span> | <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span>)* '"'</code>
 </td>
 </tr>
 <tr id=handle-STRING_LITERAL2 class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-lexical-form href=https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form> lexical form</a></td>
 <td></td>
 <td>The characters between the outermost '"'s are taken, with <a data-cite=turtle#numeric href=https://www.w3.org/TR/turtle/#numeric>numeric</a>
 and <a data-cite=turtle#string href=https://www.w3.org/TR/turtle/#string>string</a> escape sequences unescaped, to form the unicode string of a
 lexical form.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-STRING_LITERAL_LONG1>[<span class=prodNo>158s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">STRING_LITERAL_LONG1</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"'''" ( ("'" | "''")? ([^\\'\\] | <span class=prod><a class=grammarRef href=#term-ECHAR>ECHAR</a></span> | <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span>) )* "'''"</code>
 </td>
 </tr>
 <tr id=handle-STRING_LITERAL_LONG1 class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-lexical-form href=https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form> lexical form</a></td>
 <td></td>
 <td>The characters between the outermost "'''"s are taken, with <a data-cite=turtle#numeric href=https://www.w3.org/TR/turtle/#numeric>numeric</a>
 and <a data-cite=turtle#string href=https://www.w3.org/TR/turtle/#string>string</a> escape sequences unescaped, to form the unicode string of a
 lexical form.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-STRING_LITERAL_LONG2>[<span class=prodNo>159s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">STRING_LITERAL_LONG2</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'"""' ( ('"' | '""')? ([^\"\\] | <span class=prod><a class=grammarRef href=#term-ECHAR>ECHAR</a></span> | <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span>) )* '"""'</code>
 </td>
 </tr>
 <tr id=handle-STRING_LITERAL_LONG2 class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-lexical-form href=https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form> lexical form</a></td>
 <td></td>
 <td>The characters between the outermost '"""'s are taken, with <a data-cite=turtle#numeric href=https://www.w3.org/TR/turtle/#numeric>numeric</a>
 and <a data-cite=turtle#string href=https://www.w3.org/TR/turtle/#string>string</a> escape sequences unescaped, to form the unicode string of a
 lexical form.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-LANG_STRING_LITERAL1>[<span class=prodNo>73</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">LANG_STRING_LITERAL1</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"'" ([^'\\\n\r] | <span class=prod><a class=grammarRef href=#term-ECHAR>ECHAR</a></span> | <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span>)* "'" <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span></code>
 </td>
 </tr>
 <tr id=handle-LANG_STRING_LITERAL1 class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-lexical-form href=https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form> lexical form</a></td>
 <td></td>
 <td>The characters between the outermost "'"s are taken, with <a data-cite=turtle#numeric href=https://www.w3.org/TR/turtle/#numeric>numeric</a>
 and <a data-cite=turtle#string href=https://www.w3.org/TR/turtle/#string>string</a> escape sequences unescaped, to form the unicode string of a
 lexical form. The trailing <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span> is used to create a <a data-cite=rdf11-concepts#dfn-language-tagged-string data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string>language-tagged string</a>.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-LANG_STRING_LITERAL2>[<span class=prodNo>74</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">LANG_STRING_LITERAL2</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'"' ([^\"\\\n\r] | <span class=prod><a class=grammarRef href=#term-ECHAR>ECHAR</a></span> | <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span>)* '"' <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span></code>
 </td>
 </tr>
 <tr id=handle-LANG_STRING_LITERAL2 class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-lexical-form href=https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form> lexical form</a></td>
 <td></td>
 <td>The characters between the outermost '"'s are taken, with <a data-cite=turtle#numeric href=https://www.w3.org/TR/turtle/#numeric>numeric</a>
 and <a data-cite=turtle#string href=https://www.w3.org/TR/turtle/#string>string</a> escape sequences unescaped, to form the unicode string of a
 lexical form. The trailing <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span> is used to create a <a data-cite=rdf11-concepts#dfn-language-tagged-string data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string>language-tagged string</a>.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-LANG_STRING_LITERAL_LONG1>[<span class=prodNo>75</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">LANG_STRING_LITERAL_LONG1</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"'''" ( ("'" | "''")? ([^\\'\\] | <span class=prod><a class=grammarRef href=#term-ECHAR>ECHAR</a></span> | <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span>) )* "'''" <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span></code>
 </td>
 </tr>
 <tr id=handle-LANG_STRING_LITERAL_LONG1 class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-lexical-form href=https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form> lexical form</a></td>
 <td></td>
 <td>The characters between the outermost "'''"s are taken, with <a data-cite=turtle#numeric href=https://www.w3.org/TR/turtle/#numeric>numeric</a>
 and <a data-cite=turtle#string href=https://www.w3.org/TR/turtle/#string>string</a> escape sequences unescaped, to form the unicode string of a
 lexical form. The trailing <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span> is used to create a <a data-cite=rdf11-concepts#dfn-language-tagged-string data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string>language-tagged string</a>.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-LANG_STRING_LITERAL_LONG2>[<span class=prodNo>76</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">LANG_STRING_LITERAL_LONG2</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>'"""' ( ('"' | '""')? ([^\"\\] | <span class=prod><a class=grammarRef href=#term-ECHAR>ECHAR</a></span> | <span class=prod><a class=grammarRef href=#term-UCHAR>UCHAR</a></span>) )* '"""' <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span></code>
 </td>
 </tr>
 <tr id=handle-LANG_STRING_LITERAL_LONG2 class=params>
 <td></td>
 <td>returns: <a data-cite=rdf11-concepts#dfn-lexical-form href=https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form> lexical form</a></td>
 <td></td>
 <td>The characters between the outermost '"""'s are taken, with <a data-cite=turtle#numeric href=https://www.w3.org/TR/turtle/#numeric>numeric</a>
 and <a data-cite=turtle#string href=https://www.w3.org/TR/turtle/#string>string</a> escape sequences unescaped, to form the unicode string of a
 lexical form. The trailing <span class=prod><a class=grammarRef href=#term-LANGTAG>LANGTAG</a></span> is used to create a <a data-cite=rdf11-concepts#dfn-language-tagged-string data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string>language-tagged string</a>.</td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-UCHAR>[<span class=prodNo>26t</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">UCHAR</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content>"\\u" <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span> <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span> <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span> <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span><br>
| "\\U" <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span> <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span> <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span> <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span> <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span> <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span> <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span> <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-ECHAR>[<span class=prodNo>160s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">ECHAR</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"\\" [tbnrf\\\"\\']</code></td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-PN_CHARS_BASE>[<span class=prodNo>164s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">PN_CHARS_BASE</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content>[A-Z] | [a-z]<br>
| [#00C0-#00D6] | [#00D8-#00F6] | [#00F8-#02FF]<br>
| [#0370-#037D] | [#037F-#1FFF]<br>
| [#200C-#200D] | [#2070-#218F] | [#2C00-#2FEF]<br>
| [#3001-#D7FF] | [#F900-#FDCF] | [#FDF0-#FFFD]<br>
| [#10000-#EFFFF]</code></td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-PN_CHARS_U>[<span class=prodNo>165s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">PN_CHARS_U</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#term-PN_CHARS_BASE>PN_CHARS_BASE</a></span> | "_"</code>
 </td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-PN_CHARS>[<span class=prodNo>167s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">PN_CHARS</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content><span class=prod><a class=grammarRef href=#term-PN_CHARS_U>PN_CHARS_U</a></span> | "-" | [0-9]<br>
| [#00B7] | [#0300-#036F] | [#203F-#2040]</code></td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-PN_PREFIX>[<span class=prodNo>168s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">PN_PREFIX</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#term-PN_CHARS_BASE>PN_CHARS_BASE</a></span> ( (<span class=prod><a class=grammarRef href=#term-PN_CHARS>PN_CHARS</a></span> | ".")* <span class=prod><a class=grammarRef href=#term-PN_CHARS>PN_CHARS</a></span> )?</code>
 </td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-PN_LOCAL>[<span class=prodNo>77</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">PN_LOCAL</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>(<span class=prod><a class=grammarRef href=#term-PN_CHARS_U>PN_CHARS_U</a></span> | ":" | [0-9] | <span class=prod><a class=grammarRef href=#term-PLX>PLX</a></span>) ((<span class=prod><a class=grammarRef href=#term-PN_CHARS>PN_CHARS</a></span> | "." | ":" | <span class=prod><a class=grammarRef href=#term-PLX>PLX</a></span>)* (<span class=prod><a class=grammarRef href=#term-PN_CHARS>PN_CHARS</a></span> | ":" | <span class=prod><a class=grammarRef href=#term-PLX>PLX</a></span>))? </code>
 </td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-PLX>[<span class=prodNo>170s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">PLX</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content><span class=prod><a class=grammarRef href=#term-PERCENT>PERCENT</a></span> | <span class=prod><a class=grammarRef href=#term-PN_LOCAL_ESC>PN_LOCAL_ESC</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-PERCENT>[<span class=prodNo>171s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">PERCENT</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"%" <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span> <span class=prod><a class=grammarRef href=#term-HEX>HEX</a></span></code>
 </td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-HEX>[<span class=prodNo>172s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">HEX</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>[0-9] | [A-F] | [a-f]</code></td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-PN_LOCAL_ESC>[<span class=prodNo>173s</span>]&nbsp;&nbsp;&nbsp;</td>
 <td>&lt;<code class="production term">PN_LOCAL_ESC</code>&gt;</td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td><code class=content>"\\" ( "_" | "~" | "." | "-" | "!" | "$" | "&amp;" | "'" | "(" | ")" | "*" | "+" | "," | ";" | "=" | "/" | "?" | "#" | "@" | "%" )</code>
 </td>
 </tr>
 </tbody>
 <tbody class=term>
 <tr style=vertical-align:baseline>
 <td id=term-PASSED_TOKENS>[<span class=prodNo>98</span>]&nbsp;&nbsp;&nbsp;</td>
 <td><code class="production directive">PASSED TOKENS</code></td>
 <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
 <td>&nbsp;&nbsp;&nbsp;<code class=content>[ \t\r\n]+<br>
| "#" [^\r\n]*<br>
| "/*" ([^*] | '*' ([^/] | '\\/'))* "*/"</code></td>
 </tr>
 </tbody>
 </table>
 </div>
 </div>
 
 </section>
 <section id=shexj class=appendix><div class=header-wrapper><h2 id=shex-json-syntax-shexj>ShEx JSON Syntax (ShExJ)</h2><a class="self-link sf-hidden" href=#shexj aria-label="Permalink for this Appendix"></a></div>
 
 <p>
 This section aggregates the <a href=#dfn-json-grammar class=internalDFN data-link-type=dfn id=ref-for-dfn-json-grammar-1>JSON grammar</a> rules defined above and includes terminals referenced above.
 </p>
 <p>
 A ShExJ document is a JSON-LD [<cite><a class=bibref data-link-type=biblio href=#bib-json-ld title="JSON-LD 1.0">JSON-LD</a></cite>] document which uses a proscribed structure to define a <a href=#dfn-shapes-schema class=internalDFN data-link-type=dfn id=ref-for-dfn-shapes-schema-7>schema</a>
 containing <a href=#dfn-shape-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-expressions-15>shape expressions</a> and <a href=#dfn-triple-expressions class=internalDFN data-link-type=dfn id=ref-for-dfn-triple-expressions-16>triple expressions</a>.
 A ShExJ document <em class=rfc2119>MAY</em> include an <code>@context</code> property referencing
 <code>http://www.w3.org/ns/shex.jsonld</code>.
 In the absense of a top-level <code>@context</code>, ShEx Processors <em class=rfc2119>MUST</em> act as if a <code>@context</code>
 property is present with the value <code>http://www.w3.org/ns/shex.jsonld</code>.
 </p>
 <p>
 A ShExJ document can also be thought of as the serialization of an <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>RDF Graph</a> using the Shape Expression
 Vocabulary [<cite><a class=bibref data-link-type=biblio href=#bib-shex-vocab title="Shape Expression Vocabulary">shex-vocab</a></cite>] which conforms to the shape defined in <a href=#shexr class="secionRef sec-ref">RDF Representation of ShEx (ShExR)</a>.
 Processors <em class=rfc2119>MAY</em> interpret a ShExJ document as an RDF Graph.
 Processors may also transform arbitrary RDF Graphs conforming to <a href=#shexr class="secionRef sec-ref">RDF Representation of ShEx (ShExR)</a> into
 ShExJ using a mechanism not described within this specification.
 </p>
 <p>In ShExJ, the unbounded cardinality constraint is <code>-1</code>, rather than <code>"*"</code>.</p>
 <p>
 This is the complete grammar for <dfn id=dfn-shexj tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>ShExJ</dfn>.
 </p>
 <div class=shexjTable>
 <table class=shexj>
 
 <tbody><tr class=obj>
 <th class=obj><a href=#dfn-shapes-schema class=internalDFN data-link-type=dfn id=ref-for-dfn-shapes-schema-8>Schema</a></th>
 <td>{</td>
 <td><dfn class=param data-lt=context id=dfn-context tabindex=0 aria-haspopup=dialog data-dfn-type=dfn></dfn>"@context":"http://www.w3.org/ns/shex.jsonld"?<br><a class="param internalDFN" href=#dfn-imports data-link-type=dfn id=ref-for-dfn-imports-4>imports</a>:[<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-25>IRIREF</a>+]? <span class=param>startActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-18>SemAct</a>+]? <a class="param internalDFN" href=#dfn-start data-link-type=dfn id=ref-for-dfn-start-6>start</a>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-28>shapeExpr</a>? <a class="param internalDFN" href=#dfn-shapes data-link-type=dfn id=ref-for-dfn-shapes-12>shapes</a>:[<a class="nobref internalDFN" href=#dfn-shapedecl data-link-type=dfn id=ref-for-dfn-shapedecl-10>ShapeDecl</a>+]? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-shapedecl class=internalDFN data-link-type=dfn id=ref-for-dfn-shapedecl-11>ShapeDecl</a></th>
 <td>{</td>
 <td> <span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-21>shapeExprLabel</a> <span class=param>abstract</span>:<a class="nobref internalDFN" href=#dfn-bool data-link-type=dfn id=ref-for-dfn-bool-9>BOOL</a>? <span class=param>shapeExpr</span>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-29>shapeExpr</a> | <a class="objref internalDFN" href=#dfn-shapeexternal data-link-type=dfn id=ref-for-dfn-shapeexternal-7>ShapeExternal</a> }</td>
 </tr>
 <tr class=nob>
 <th class=obj><a href=#dfn-shapeexpr class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexpr-30>shapeExpr</a></th>
 <td>=</td>
 <td><a class="objref internalDFN" href=#dfn-shapeor data-link-type=dfn id=ref-for-dfn-shapeor-10>ShapeOr</a> | <a class="objref internalDFN" href=#dfn-shapeand data-link-type=dfn id=ref-for-dfn-shapeand-9>ShapeAnd</a> | <a class="objref internalDFN" href=#dfn-shapenot data-link-type=dfn id=ref-for-dfn-shapenot-9>ShapeNot</a> | <a class="objref internalDFN" href=#dfn-nodeconstraint data-link-type=dfn id=ref-for-dfn-nodeconstraint-10>NodeConstraint</a> | <a class="objref internalDFN" href=#dfn-shape data-link-type=dfn id=ref-for-dfn-shape-22>Shape</a> | <a class="objref internalDFN" href=#dfn-shapeexprref data-link-type=dfn id=ref-for-dfn-shapeexprref-17>ShapeExprRef</a> ;
 </td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-shapeor class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeor-11>ShapeOr</a></th>
 <td>{</td>
 <td><span class=param>shapeExprs</span>:[<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-31>shapeExpr</a>{2,}] }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-shapeand class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeand-10>ShapeAnd</a></th>
 <td>{</td>
 <td><span class=param>shapeExprs</span>:[<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-32>shapeExpr</a>{2,}] }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-shapenot class=internalDFN data-link-type=dfn id=ref-for-dfn-shapenot-10>ShapeNot</a></th>
 <td>{</td>
 <td><span class=param>shapeExpr</span>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-33>shapeExpr</a> }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-shapeexternal class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexternal-8>ShapeExternal</a></th>
 <td>{</td>
 <td>}</td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-shapeexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprref-18>ShapeExprRef</a></th>
 <td>{</td>
 <td><span class=param>label</span>:<span class=nobref>shapeExprLabel <span class=param>exact</span>:<a href=#dfn-bool class=internalDFN data-link-type=dfn id=ref-for-dfn-bool-10>BOOL</a>? }</span></td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-shapeexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-shapeexprlabel-22>shapeExprLabel</a></th>
 <td>=</td>
 <td><a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-26>IRIREF</a> | <a href=#dfn-bnode class=internalDFN data-link-type=dfn id=ref-for-dfn-bnode-5>BNODE</a> ;</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-nodeconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-nodeconstraint-11>NodeConstraint</a></th>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-shapeexprlabel data-link-type=dfn id=ref-for-dfn-shapeexprlabel-23>shapeExprLabel</a>? <span class=param>nodeKind</span>:(<span class=literal>"iri"</span> | <span class=literal>"bnode"</span> |
 <span class=literal>"nonliteral"</span> | <span class=literal>"literal"</span>)? <span class=param>datatype</span>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-27>IRIREF</a>? <a class="nobref internalDFN" href=#dfn-xsfacet data-link-type=dfn id=ref-for-dfn-xsfacet-8>xsFacet</a>* <span class=param>values</span>:[<a class="nobref internalDFN" href=#dfn-valuesetvalue data-link-type=dfn id=ref-for-dfn-valuesetvalue-5>valueSetValue</a>+]? }
 </td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-xsfacet class=internalDFN data-link-type=dfn id=ref-for-dfn-xsfacet-9>xsFacet</a></th>
 <td>=</td>
 <td><a class="nobref internalDFN" href=#dfn-stringfacet data-link-type=dfn id=ref-for-dfn-stringfacet-6>stringFacet</a> | <a class="nobref internalDFN" href=#dfn-numericfacet data-link-type=dfn id=ref-for-dfn-numericfacet-6>numericFacet</a> ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-stringfacet class=internalDFN data-link-type=dfn id=ref-for-dfn-stringfacet-7>stringFacet</a></th>
 <td>=</td>
 <td>(<span class=param>length</span>|<span class=param>minlength</span>|<span class=param>maxlength</span>):<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-18>INTEGER</a> | <span class=param>pattern</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-20>STRING</a> <span class=param>flags</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-21>STRING</a>? ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-numericfacet class=internalDFN data-link-type=dfn id=ref-for-dfn-numericfacet-7>numericFacet</a></th>
 <td>=</td>
 <td>(<span class=param>mininclusive</span>|<span class=param>minexclusive</span>|<span class=param>maxinclusive</span>|<span class=param>maxexclusive</span>):<a class="nobref internalDFN" href=#dfn-numericliteral data-link-type=dfn id=ref-for-dfn-numericliteral-3>numericLiteral</a> </td>
 </tr>
 <tr>
 <th></th>
 <td>|</td>
 <td>(<span class=param>totaldigits</span>|<span class=param>fractiondigits</span>):<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-19>INTEGER</a> ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-numericliteral class=internalDFN data-link-type=dfn id=ref-for-dfn-numericliteral-4>numericLiteral</a></th>
 <td>=</td>
 <td><a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-20>INTEGER</a> | <a href=#dfn-decimal class=internalDFN data-link-type=dfn id=ref-for-dfn-decimal-2>DECIMAL</a> | <a href=#dfn-double class=internalDFN data-link-type=dfn id=ref-for-dfn-double-2>DOUBLE</a> ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-valuesetvalue class=internalDFN data-link-type=dfn id=ref-for-dfn-valuesetvalue-6>valueSetValue</a></th>
 <td>=</td>
 <td><a class="nobref internalDFN" href=#dfn-objectvalue data-link-type=dfn id=ref-for-dfn-objectvalue-6>objectValue</a> | <a class="objref internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-12>IriStem</a> | <a class="objref internalDFN" href=#dfn-iristemrange data-link-type=dfn id=ref-for-dfn-iristemrange-8>IriStemRange</a> |
 <a class="objref internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-12>LiteralStem</a> | <a class="objref internalDFN" href=#dfn-literalstemrange data-link-type=dfn id=ref-for-dfn-literalstemrange-8>LiteralStemRange</a> | <a class="objref internalDFN" href=#dfn-language data-link-type=dfn id=ref-for-dfn-language-5>Language</a>
 | <a class="objref internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-13>LanguageStem</a> | <a class="objref internalDFN" href=#dfn-languagestemrange data-link-type=dfn id=ref-for-dfn-languagestemrange-12>LanguageStemRange</a> ;
 </td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-objectvalue class=internalDFN data-link-type=dfn id=ref-for-dfn-objectvalue-7>objectValue</a></th>
 <td>=</td>
 <td><a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-28>IRIREF</a> | <a href=#dfn-objectliteral class=internalDFN data-link-type=dfn id=ref-for-dfn-objectliteral-2>ObjectLiteral</a> ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-objectliteral class=internalDFN data-link-type=dfn id=ref-for-dfn-objectliteral-3>ObjectLiteral</a></th>
 <td>{</td>
 <td><span class=param>value</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-22>STRING</a> <span class=param>language</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-23>STRING</a>? <span class=param>type</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-24>STRING</a>? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-iristem class=internalDFN data-link-type=dfn id=ref-for-dfn-iristem-13>IriStem</a></th>
 <td>{</td>
 <td><span class=param>stem</span>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-29>IRIREF</a> }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-iristemrange class=internalDFN data-link-type=dfn id=ref-for-dfn-iristemrange-9>IriStemRange</a></th>
 <td>{</td>
 <td><span class=param>stem</span>:(<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-30>IRIREF</a> | <a class="objref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-13>Wildcard</a>) <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-iriref data-link-type=dfn id=ref-for-dfn-iriref-31>IRIREF</a>|<a class="objref internalDFN" href=#dfn-iristem data-link-type=dfn id=ref-for-dfn-iristem-14>IriStem</a>+]? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-literalstem class=internalDFN data-link-type=dfn id=ref-for-dfn-literalstem-13>LiteralStem</a></th>
 <td>{</td>
 <td><span class=param>stem</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-25>STRING</a> }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-literalstemrange class=internalDFN data-link-type=dfn id=ref-for-dfn-literalstemrange-9>LiteralStemRange</a></th>
 <td>{</td>
 <td><span class=param>stem</span>:(<a class="nobref internalDFN" href=#dfn-string data-link-type=dfn id=ref-for-dfn-string-26>STRING</a> | <a class="objref internalDFN" href=#dfn-wildcard data-link-type=dfn id=ref-for-dfn-wildcard-14>Wildcard</a>) <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-string data-link-type=dfn id=ref-for-dfn-string-27>STRING</a>|<a class="objref internalDFN" href=#dfn-literalstem data-link-type=dfn id=ref-for-dfn-literalstem-14>LiteralStem</a>+]? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-language class=internalDFN data-link-type=dfn id=ref-for-dfn-language-6>Language</a></th>
 <td>{</td>
 <td><span class=param>languageTag</span>:<a href=#dfn-langtag class=internalDFN data-link-type=dfn id=ref-for-dfn-langtag-12>LANGTAG</a> }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-languagestem class=internalDFN data-link-type=dfn id=ref-for-dfn-languagestem-14>LanguageStem</a></th>
 <td>{</td>
 <td><span class=param>stem</span>:(<a href=#dfn-langtag class=internalDFN data-link-type=dfn id=ref-for-dfn-langtag-13>LANGTAG</a> | <a class="@@ internalDFN" style=background:#FBE9E9 href=#dfn-empty data-link-type=dfn id=ref-for-dfn-empty-1>EMPTY</a>) }
 </td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-languagestemrange class=internalDFN data-link-type=dfn id=ref-for-dfn-languagestemrange-13>LanguageStemRange</a></th>
 <td>{</td>
 <td><span class=param>stem</span>:(<a href=#dfn-langtag class=internalDFN data-link-type=dfn id=ref-for-dfn-langtag-14>LANGTAG</a> | <a class="@@ internalDFN" style=background:#FBE9E9 href=#dfn-empty data-link-type=dfn id=ref-for-dfn-empty-2>EMPTY</a>)
 <span class=param>exclusions</span>:[<a class="nobref internalDFN" href=#dfn-langtag data-link-type=dfn id=ref-for-dfn-langtag-15>LANGTAG</a>|<a class="objref internalDFN" href=#dfn-languagestem data-link-type=dfn id=ref-for-dfn-languagestem-15>LanguageStem</a>+]? }
 </td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-wildcard class=internalDFN data-link-type=dfn id=ref-for-dfn-wildcard-15>Wildcard</a></th>
 <td>{</td>
 <td><span class=comment>/* empty */</span> }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-shape class=internalDFN data-link-type=dfn id=ref-for-dfn-shape-23>Shape</a></th>
 <td>{</td>
 <td><span class=param>extends</span>:[<a class="objref internalDFN" href=#dfn-shapeexprref data-link-type=dfn id=ref-for-dfn-shapeexprref-19>shapeExprRef</a>]? <span class=param>closed</span>:<a href=#dfn-bool class=internalDFN data-link-type=dfn id=ref-for-dfn-bool-11>BOOL</a>? <span class=param>extra</span>:[<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-32>IRIREF</a>+]? <span class=param>expression</span>:<a class="nobref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-11>tripleExpr</a>?
 <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-19>SemAct</a>+]? <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-12>Annotation</a>+]? }
 </td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-tripleexpr class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexpr-12>tripleExpr</a></th>
 <td>=</td>
 <td><a class="objref internalDFN" href=#dfn-eachof data-link-type=dfn id=ref-for-dfn-eachof-9>EachOf</a> | <a class="objref internalDFN" href=#dfn-oneof data-link-type=dfn id=ref-for-dfn-oneof-7>OneOf</a> | <a class="objref internalDFN" href=#dfn-tripleconstraint data-link-type=dfn id=ref-for-dfn-tripleconstraint-16>TripleConstraint</a> | <a class="objref internalDFN" href=#dfn-tripleexprref data-link-type=dfn id=ref-for-dfn-tripleexprref-10>tripleExprRef</a> ;</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-eachof class=internalDFN data-link-type=dfn id=ref-for-dfn-eachof-10>EachOf</a></th>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-17>tripleExprLabel</a>? <span class=param>expressions</span>:[<a class="nobref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-13>tripleExpr</a>{2,}] <span class=param>min</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-21>INTEGER</a>? <span class=param>max</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-22>INTEGER</a>? <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-20>SemAct</a>+]? <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-13>Annotation</a>+]? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-oneof class=internalDFN data-link-type=dfn id=ref-for-dfn-oneof-8>OneOf</a></th>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-18>tripleExprLabel</a>? <span class=param>expressions</span>:[<a class="nobref internalDFN" href=#dfn-tripleexpr data-link-type=dfn id=ref-for-dfn-tripleexpr-14>tripleExpr</a>{2,}] <span class=param>min</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-23>INTEGER</a>? <span class=param>max</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-24>INTEGER</a>? <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-21>SemAct</a>+]? <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-14>Annotation</a>+]? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-tripleconstraint class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleconstraint-17>TripleConstraint</a></th>
 <td>{</td>
 <td><span class=param>id</span>:<a class="nobref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-19>tripleExprLabel</a>? <span class=param>inverse</span>:<a href=#dfn-bool class=internalDFN data-link-type=dfn id=ref-for-dfn-bool-12>BOOL</a>? <a class=param href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-33>IRIREF</a> <span class=param>valueExpr</span>:<a class="nobref internalDFN" href=#dfn-shapeexpr data-link-type=dfn id=ref-for-dfn-shapeexpr-34>shapeExpr</a>? <span class=param>min</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-25>INTEGER</a>? <span class=param>max</span>:<a href=#dfn-integer class=internalDFN data-link-type=dfn id=ref-for-dfn-integer-26>INTEGER</a>? <span class=param>semActs</span>:[<a class="objref internalDFN" href=#dfn-semact data-link-type=dfn id=ref-for-dfn-semact-22>SemAct</a>+]? <span class=param>annotations</span>:[<a class="objref internalDFN" href=#dfn-annotation data-link-type=dfn id=ref-for-dfn-annotation-15>Annotation</a>+]? }</td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-tripleexprref class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprref-11>tripleExprRef</a></th>
 <td>=</td>
 <td><a class="objref internalDFN" href=#dfn-tripleexprlabel data-link-type=dfn id=ref-for-dfn-tripleexprlabel-20>tripleExprLabel</a> ;</td>
 </tr>
 <tr class=nob>
 <th class=nob><a href=#dfn-tripleexprlabel class=internalDFN data-link-type=dfn id=ref-for-dfn-tripleexprlabel-21>tripleExprLabel</a></th>
 <td>=</td>
 <td><a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-34>IRIREF</a> | <a href=#dfn-bnode class=internalDFN data-link-type=dfn id=ref-for-dfn-bnode-6>BNODE</a> ;</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-semact class=internalDFN data-link-type=dfn id=ref-for-dfn-semact-23>SemAct</a></th>
 <td>{</td>
 <td><span class=param>name</span>:<a href=#dfn-iriref class=internalDFN data-link-type=dfn id=ref-for-dfn-iriref-35>IRIREF</a> <span class=param>code</span>:<a href=#dfn-string class=internalDFN data-link-type=dfn id=ref-for-dfn-string-28>STRING</a>? }</td>
 </tr>
 <tr class=obj>
 <th class=obj><a href=#dfn-annotation class=internalDFN data-link-type=dfn id=ref-for-dfn-annotation-16>Annotation</a></th>
 <td>{</td>
 <td><span class=param><a href=https://www.w3.org/TR/rdf11-concepts/#dfn-predicate>predicate</a></span>:<a href=https://www.w3.org/TR/rdf11-concepts/#dfn-iri>IRIREF</a> <span class=param>object</span>:<a class="nobref internalDFN" href=#dfn-objectvalue data-link-type=dfn id=ref-for-dfn-objectvalue-8>objectValue</a> }</td>
 </tr>
 <tr style="background-color:white;border-left:thin solid white;border-right:thin solid white">
 <th colspan=1 style=text-align:left><span style=opacity:0># </span>Terminals</th>
 <td></td>
 <td>These follow the <a href=http://www.w3.org/TR/2008/PER-xml-20080205/#sec-common-syn>rules for terminals
 in the XML 1.0 5th Edition</a></td>
 </tr>
 <tr class=trm>
 <td></td>
 <td><span class=comment>#</span></td>
 <td><span class=comment><a href=http://www.w3.org/TR/turtle/#grammar-production-IRIREF>Turtle IRIREF</a>
 without enclosing "&lt;&gt;"s</span></td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-iriref tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>IRIREF</dfn></th>
 <td>:</td>
 <td>(<a href=#dfn-pn_chars class=internalDFN data-link-type=dfn id=ref-for-dfn-pn_chars-1>PN_CHARS</a> | '.' | ':' | '/' | '\\' | '#' | '@' | '%' | '&amp;' | <a href=#dfn-uchar class=internalDFN data-link-type=dfn id=ref-for-dfn-uchar-1>UCHAR</a>)* ;</td>
 </tr>
 <tr class=trm>
 <td></td>
 <td><span class=comment>#</span></td>
 <td><span class=comment><a href=http://www.w3.org/TR/turtle/#grammar-production-BLANK_NODE_LABEL>Turtle
 BLANK_NODE_LABEL</a></span></td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-bnode tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>BNODE</dfn></th>
 <td>:</td>
 <td>'_:' (<a href=#dfn-pn_chars_u class=internalDFN data-link-type=dfn id=ref-for-dfn-pn_chars_u-1>PN_CHARS_U</a> | [0-9]) ((<a href=#dfn-pn_chars class=internalDFN data-link-type=dfn id=ref-for-dfn-pn_chars-2>PN_CHARS</a> | '.')* <a href=#dfn-pn_chars class=internalDFN data-link-type=dfn id=ref-for-dfn-pn_chars-3>PN_CHARS</a>)? ;</td>
 </tr>
 <tr class=trm>
 <td></td>
 <td><span class=comment>#</span></td>
 <td><span class=comment><a href=https://tools.ietf.org/html/rfc7159#section-3>JSON boolean
 values</a></span></td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-bool tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>BOOL</dfn></th>
 <td>:</td>
 <td>"true" | "false" ;</td>
 </tr>
 <tr class=trm>
 <td></td>
 <td><span class=comment>#</span></td>
 <td><span class=comment><a href=http://www.w3.org/TR/turtle/#grammar-production-INTEGER>Turtle
 INTEGER</a></span></td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-integer tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>INTEGER</dfn></th>
 <td>:</td>
 <td>[+-]? [0-9] + ;</td>
 </tr>
 <tr class=trm>
 <td></td>
 <td><span class=comment>#</span></td>
 <td><span class=comment><a href=http://www.w3.org/TR/turtle/#grammar-production-DECIMAL>Turtle
 DECIMAL</a></span></td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-decimal tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>DECIMAL</dfn></th>
 <td>:</td>
 <td>[+-]? [0-9]* '.' [0-9] + ;</td>
 </tr>
 <tr class=trm>
 <td></td>
 <td><span class=comment>#</span></td>
 <td><span class=comment><a href=http://www.w3.org/TR/turtle/#grammar-production-DOUBLE>Turtle
 DOUBLE</a></span></td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-double tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>DOUBLE</dfn></th>
 <td>:</td>
 <td>[+-]? ([0-9] + '.' [0-9]* <a href=#dfn-exponent class=internalDFN data-link-type=dfn id=ref-for-dfn-exponent-1>EXPONENT</a> | '.' [0-9]+ <a href=#dfn-exponent class=internalDFN data-link-type=dfn id=ref-for-dfn-exponent-2>EXPONENT</a> | [0-9]+ <a href=#dfn-exponent class=internalDFN data-link-type=dfn id=ref-for-dfn-exponent-3>EXPONENT</a>) ;</td>
 </tr>
 <tr class=trm>
 <td></td>
 <td><span class=comment>#</span></td>
 <td><span class=comment><a href=https://tools.ietf.org/html/bcp47#section-2.1>BCP47
 Language-Tag</a></span></td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-langtag tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>LANGTAG</dfn></th>
 <td>:</td>
 <td>[a-zA-Z]+ ('-' [a-zA-Z0-9]+)* ;</td>
 </tr>
 <tr class=trm>
 <td></td>
 <td><span class=comment>#</span></td>
 <td><span class=comment>any <a href=https://tools.ietf.org/html/rfc7159#section-7>JSON string</a></span>
 </td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-string tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>STRING</dfn></th>
 <td>:</td>
 <td>.* ;</td>
 </tr>
 <tr class=trm>
 <td></td>
 <td><span class=comment>#</span></td>
 <td><span class=comment>empty string</span></td>
 </tr>
 <tr class="trm @@" style=background:#FBE9E9>
 <th class=trm><dfn id=dfn-empty tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>EMPTY</dfn></th>
 <td>:</td>
 <td>^$ ;</td>
 </tr>
 <tr style="background-color:white;border-left:thin solid white;border-right:thin solid white">
 <th colspan=1 style=text-align:left><span style=opacity:0># </span>Components</th>
 <td></td>
 <td>These terminals are referenced by other terminals but not by external productions.</td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-pn_prefix tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>PN_PREFIX</dfn></th>
 <td>:</td>
 <td><a href=#dfn-pn_chars_base class=internalDFN data-link-type=dfn id=ref-for-dfn-pn_chars_base-1>PN_CHARS_BASE</a> ((<a href=#dfn-pn_chars class=internalDFN data-link-type=dfn id=ref-for-dfn-pn_chars-4>PN_CHARS</a> | '.')* <a href=#dfn-pn_chars class=internalDFN data-link-type=dfn id=ref-for-dfn-pn_chars-5>PN_CHARS</a>)? ;</td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-pn_chars_base tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>PN_CHARS_BASE</dfn></th>
 <td>:</td>
 <td>&nbsp;&nbsp;[A-Z] | [a-z] | [\u00C0-\u00D6] | [\u00D8-\u00F6]<br>
 | [\u00F8-\u02FF] | [\u0370-\u037D] | [\u037F-\u1FFF]<br>
 | [\u200C-\u200D] | [\u2070-\u218F] | [\u2C00-\u2FEF]<br>
 | [\u3001-\uD7FF] | [\uF900-\uFDCF] | [\uFDF0-\uFFFD]<br>
 | [\u10000-\uEFFFF] ;</td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-pn_chars tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>PN_CHARS</dfn></th>
 <td>:</td>
 <td><a href=#dfn-pn_chars_u class=internalDFN data-link-type=dfn id=ref-for-dfn-pn_chars_u-2>PN_CHARS_U</a> | '-' | [0-9] | '\u00B7' | [\u0300-\u036F] | [\u203F-\u2040] ;</td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-pn_chars_u tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>PN_CHARS_U</dfn></th>
 <td>:</td>
 <td><a href=#dfn-pn_chars_base class=internalDFN data-link-type=dfn id=ref-for-dfn-pn_chars_base-2>PN_CHARS_BASE</a> | '_' ;</td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-uchar tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>UCHAR</dfn></th>
 <td>:</td>
 <td>&nbsp;&nbsp;'\\u' <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-1>HEX</a> <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-2>HEX</a> <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-3>HEX</a> <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-4>HEX</a><br>
 | '\\U' <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-5>HEX</a> <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-6>HEX</a> <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-7>HEX</a> <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-8>HEX</a> <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-9>HEX</a> <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-10>HEX</a> <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-11>HEX</a> <a href=#dfn-hex class=internalDFN data-link-type=dfn id=ref-for-dfn-hex-12>HEX</a> ;</td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-hex tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>HEX</dfn></th>
 <td>:</td>
 <td>[0-9] | [A-F] | [a-f] ;</td>
 </tr>
 <tr class=trm>
 <th class=trm><dfn id=dfn-exponent tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>EXPONENT</dfn></th>
 <td>:</td>
 <td>[eE] [+-]? [0-9]+ ;</td>
 </tr>
 </table>
 </div>
 </section>
 <section id=shexr class=appendix><div class=header-wrapper><h2 id=rdf-representation-of-shex-shexr>RDF Representation of ShEx (ShExR)</h2><a class="self-link sf-hidden" href=#shexr aria-label="Permalink for this Appendix"></a></div>
 
 <p>
 A <dfn id=dfn-shexr tabindex=0 aria-haspopup=dialog data-dfn-type=dfn>ShExR</dfn> graph is any <a data-cite=rdf11-concepts#dfn-rdf-graph data-link-type=dfn href=https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph>RDF Graph</a> which conforms to the following <a href=#dfn-shapes-schema class=internalDFN data-link-type=dfn id=ref-for-dfn-shapes-schema-9>shapes schema</a> and meets
 the <a href=#schema-requirements>Schema Requirements</a>.
 Every <a href=#dfn-shexr class=internalDFN data-link-type=dfn id=ref-for-dfn-shexr-1>ShExR</a> document is <a href=https://www.w3.org/TR/rdf11-concepts/#dfn-graph-isomorphism>graph
 isomorphic</a>[<cite><a class=bibref data-link-type=biblio href=#bib-rdf11-concepts title="RDF 1.1 Concepts and Abstract Syntax">rdf11-concepts</a></cite>] to the <a href=https://www.w3.org/TR/json-ld11-api/#deserialize-json-ld-to-rdf-algorithm>RDF
 serialization</a>[<cite><a class=bibref data-link-type=biblio href=#bib-json-ld title="JSON-LD 1.0">json-ld</a></cite>] of some <a href=#dfn-shexj class=internalDFN data-link-type=dfn id=ref-for-dfn-shexj-14>ShExJ</a> document.
 </p>
 <div class=example id=example-shexr-shape-expression-schema>
 <div class=marker>
 <a class=self-link href=#example-shexr-shape-expression-schema>Example<bdi> 1</bdi></a><span class=example-title>: ShExR Shape Expression Schema</span>
 </div> <pre class=nohighlight data-oninclude=highlightShExC><span class=keyword>PREFIX</span> sx: <span class=relativeIRI>&lt;http://www.w3.org/ns/shex#&gt;</span>
<span class=keyword>PREFIX</span> xsd: <span class=relativeIRI>&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>
<span class=keyword>PREFIX</span> rdf: <span class=relativeIRI>&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span>
<span class=keyword>BASE</span> <span class=relativeIRI>&lt;http://www.w3.org/ns/shex&gt;</span>
<span class=keyword>start=</span>@<span class=relativeIRI>&lt;#Schema&gt;</span>

<span class=relativeIRI>&lt;#Schema&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:Schema]</span> ;
  sx:imports @<span class=relativeIRI>&lt;#IriList1Plus&gt;</span> ? ;
  sx:startActs @<span class=relativeIRI>&lt;#SemActList1Plus&gt;</span> ? ;
  sx:start @<span class=relativeIRI>&lt;#shapeDeclOrExpr&gt;</span> ? ;
  sx:shapes @<span class=relativeIRI>&lt;#ShapeDeclList1Plus&gt;</span> ?
}

<span class=relativeIRI>&lt;#shapeDeclOrExpr&gt;</span> @<span class=relativeIRI>&lt;#ShapeDecl&gt;</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#shapeExpr&gt;</span>

<span class=relativeIRI>&lt;#ShapeDecl&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:ShapeDecl]</span> ;
  sx:abstract <span class=valueSet>[true false]</span> ? ;
  sx:shapeExpr @<span class=relativeIRI>&lt;#shapeExpr&gt;</span>
}

<span class=relativeIRI>&lt;#shapeExpr&gt;</span> @<span class=relativeIRI>&lt;#ShapeOr&gt;</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#ShapeAnd&gt;</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#ShapeNot&gt;</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#NodeConstraint&gt;</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#Shape&gt;</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#ShapeExternal&gt;</span>

<span class=relativeIRI>&lt;#ShapeOr&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:ShapeOr]</span> ;
  sx:shapeExprs @<span class=relativeIRI>&lt;#shapeDeclOrExprList2Plus&gt;</span>
}

<span class=relativeIRI>&lt;#ShapeAnd&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:ShapeAnd]</span> ;
  sx:shapeExprs @<span class=relativeIRI>&lt;#shapeDeclOrExprList2Plus&gt;</span>
}

<span class=relativeIRI>&lt;#ShapeNot&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:ShapeNot]</span> ;
  sx:shapeExpr @<span class=relativeIRI>&lt;#shapeDeclOrExpr&gt;</span>
}

<span class=relativeIRI>&lt;#NodeConstraint&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:NodeConstraint]</span> ;
  sx:nodeKind <span class=valueSet>[sx:iri sx:bnode sx:literal sx:nonliteral]</span> ? ;
  sx:datatype <span class=keyword>IRI</span> ? ;
  &amp;<span class=relativeIRI>&lt;#xsFacets&gt;</span> ;
  sx:values @<span class=relativeIRI>&lt;#valueSetValueList1Plus&gt;</span> ? ;
  sx:semActs @<span class=relativeIRI>&lt;#SemActList1Plus&gt;</span> ? ;
  sx:annotation @<span class=relativeIRI>&lt;#AnnotationList1Plus&gt;</span> ?
}

<span class=relativeIRI>&lt;#Shape&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:Shape]</span> ;
  sx:extends @<span class=relativeIRI>&lt;#shapeDeclOrExprList1Plus&gt;</span>? ;
  sx:closed <span class=valueSet>[true false]</span> ? ;
  sx:extra <span class=keyword>IRI</span> * ;
  sx:expression @<span class=relativeIRI>&lt;#tripleExpression&gt;</span> ? ;
  sx:semActs @<span class=relativeIRI>&lt;#SemActList1Plus&gt;</span> ? ;
  sx:annotation @<span class=relativeIRI>&lt;#AnnotationList1Plus&gt;</span> ?
}

<span class=relativeIRI>&lt;#ShapeExternal&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:ShapeExternal]</span>
}

<span class=relativeIRI>&lt;#SemAct&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:SemAct]</span> ;
  sx:name <span class=keyword>IRI</span> ;
  sx:code xsd:string ?
}

<span class=relativeIRI>&lt;#Annotation&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:Annotation]</span> ;
  sx:predicate <span class=keyword>IRI</span> ;
  sx:object @<span class=relativeIRI>&lt;#objectValue&gt;</span>
}

<span class=relativeIRI>&lt;#facet_holder&gt;</span> { <span class=comment># hold labeled productions
</span>
  $<span class=relativeIRI>&lt;#xsFacets&gt;</span> ( &amp;<span class=relativeIRI>&lt;#stringFacet&gt;</span> | &amp;<span class=relativeIRI>&lt;#numericFacet&gt;</span> ) * ;
  $<span class=relativeIRI>&lt;#stringFacet&gt;</span> (
      sx:length xsd:integer
    | sx:minlength xsd:integer
    | sx:maxlength xsd:integer
    | sx:pattern xsd:string ; sx:flags xsd:string ?
  ) ;
  $<span class=relativeIRI>&lt;#numericFacet&gt;</span> (
      sx:mininclusive   @<span class=relativeIRI>&lt;#numericLiteral&gt;</span>
    | sx:minexclusive   @<span class=relativeIRI>&lt;#numericLiteral&gt;</span>
    | sx:maxinclusive   @<span class=relativeIRI>&lt;#numericLiteral&gt;</span>
    | sx:maxexclusive   @<span class=relativeIRI>&lt;#numericLiteral&gt;</span>
    | sx:totaldigits    xsd:integer
    | sx:fractiondigits xsd:integer
  )
}
<span class=relativeIRI>&lt;#numericLiteral&gt;</span> xsd:integer <span class=keyword>OR</span> xsd:decimal <span class=keyword>OR</span> xsd:double

<span class=relativeIRI>&lt;#valueSetValue&gt;</span> @<span class=relativeIRI>&lt;#objectValue&gt;</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#IriStem&gt;</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#IriStemRange&gt;</span>
                               <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#LiteralStem&gt;</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#LiteralStemRange&gt;</span>
                <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#Language&gt;</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#LanguageStem&gt;</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#LanguageStemRange&gt;</span>
<span class=relativeIRI>&lt;#objectValue&gt;</span> <span class=keyword>IRI</span> <span class=keyword>OR</span> <span class=keyword>LITERAL</span>

<span class=relativeIRI>&lt;#IriStem&gt;</span> <span class=keyword>CLOSED</span> { a <span class=valueSet>[sx:IriStem]</span> ; sx:stem xsd:string }
<span class=relativeIRI>&lt;#IriStemRange&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:IriStemRange]</span> ;
  sx:stem xsd:string <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#Wildcard&gt;</span> ;
  sx:exclusion @<span class=relativeIRI>&lt;#IriStemExclusionList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#LiteralStem&gt;</span> <span class=keyword>CLOSED</span> { a <span class=valueSet>[sx:LiteralStem]</span> ; sx:stem xsd:string }
<span class=relativeIRI>&lt;#LiteralStemRange&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:LiteralStemRange]</span> ;
  sx:stem xsd:string <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#Wildcard&gt;</span> ;
  sx:exclusion @<span class=relativeIRI>&lt;#LiteralStemExclusionList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#Language&gt;</span> <span class=keyword>CLOSED</span> { a <span class=valueSet>[sx:Language]</span> ; sx:languageTag xsd:string }
<span class=relativeIRI>&lt;#LanguageStem&gt;</span> <span class=keyword>CLOSED</span> { a <span class=valueSet>[sx:LanguageStem]</span> ; sx:stem xsd:string }
<span class=relativeIRI>&lt;#LanguageStemRange&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:LanguageStemRange]</span> ;
  sx:stem xsd:string <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#Wildcard&gt;</span> ;
  sx:exclusion @<span class=relativeIRI>&lt;#LanguageStemExclusionList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#Wildcard&gt;</span> <span class=keyword>BNODE</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:Wildcard]</span>
}

<span class=relativeIRI>&lt;#tripleExpression&gt;</span>
     @<span class=relativeIRI>&lt;#NotYetResolvedInclusion&gt;</span>
  <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#TripleConstraint&gt;</span>
  <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#OneOf&gt;</span>
  <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#EachOf&gt;</span>

<span class=relativeIRI>&lt;#NotYetResolvedInclusion&gt;</span> <span class=keyword>CLOSED</span> {} <span class=comment># will have 1 incoming, 0 outgoing arcs
</span>

<span class=relativeIRI>&lt;#OneOf&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:OneOf]</span> ;
  sx:min xsd:integer ? ;
  sx:max xsd:integer ? ;
  sx:expressions @<span class=relativeIRI>&lt;#tripleExpressionList2Plus&gt;</span> ;
  sx:semActs @<span class=relativeIRI>&lt;#SemActList1Plus&gt;</span> ? ;
  sx:annotation @<span class=relativeIRI>&lt;#AnnotationList1Plus&gt;</span> ?
}

<span class=relativeIRI>&lt;#EachOf&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:EachOf]</span> ;
  sx:min xsd:integer ? ;
  sx:max xsd:integer ? ;
  sx:expressions @<span class=relativeIRI>&lt;#tripleExpressionList2Plus&gt;</span> ;
  sx:semActs @<span class=relativeIRI>&lt;#SemActList1Plus&gt;</span> ? ;
  sx:annotation @<span class=relativeIRI>&lt;#AnnotationList1Plus&gt;</span> ?
}

<span class=relativeIRI>&lt;#TripleConstraint&gt;</span> <span class=keyword>CLOSED</span> {
  a <span class=valueSet>[sx:TripleConstraint]</span> ;
  sx:inverse <span class=valueSet>[true false]</span> ? ;
  sx:negated <span class=valueSet>[true false]</span> ? ;
  sx:min xsd:integer ? ;
  sx:max xsd:integer ? ;
  sx:predicate <span class=keyword>IRI</span> ;
  sx:valueExpr @<span class=relativeIRI>&lt;#shapeDeclOrExpr&gt;</span> ? ;
  sx:semActs @<span class=relativeIRI>&lt;#SemActList1Plus&gt;</span> ? ;
  sx:annotation @<span class=relativeIRI>&lt;#AnnotationList1Plus&gt;</span> ?
}

<span class=comment># RDF Lists
</span>

<span class=relativeIRI>&lt;#tripleExpressionList2Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first @<span class=relativeIRI>&lt;#tripleExpression&gt;</span> ;
  rdf:rest @<span class=relativeIRI>&lt;#tripleExpressionList1Plus&gt;</span>
}
<span class=relativeIRI>&lt;#tripleExpressionList1Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first @<span class=relativeIRI>&lt;#tripleExpression&gt;</span> ;
  rdf:rest  <span class=valueSet>[rdf:nil]</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#tripleExpressionList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#IriList1Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first <span class=keyword>IRI</span> ;
  rdf:rest  <span class=valueSet>[rdf:nil]</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#IriList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#SemActList1Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first @<span class=relativeIRI>&lt;#SemAct&gt;</span> ;
  rdf:rest  <span class=valueSet>[rdf:nil]</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#SemActList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#ShapeDeclList1Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first @<span class=relativeIRI>&lt;#ShapeDecl&gt;</span> ;
  rdf:rest  <span class=valueSet>[rdf:nil]</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#ShapeDeclList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#shapeDeclOrExprList2Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first @<span class=relativeIRI>&lt;#shapeDeclOrExpr&gt;</span> ;
  rdf:rest  @<span class=relativeIRI>&lt;#shapeDeclOrExprList1Plus&gt;</span>
}
<span class=relativeIRI>&lt;#shapeDeclOrExprList1Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first @<span class=relativeIRI>&lt;#shapeDeclOrExpr&gt;</span> ;
  rdf:rest  <span class=valueSet>[rdf:nil]</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#shapeDeclOrExprList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#valueSetValueList1Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first @<span class=relativeIRI>&lt;#valueSetValue&gt;</span> ;
  rdf:rest  <span class=valueSet>[rdf:nil]</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#valueSetValueList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#AnnotationList1Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first @<span class=relativeIRI>&lt;#Annotation&gt;</span> ;
  rdf:rest  <span class=valueSet>[rdf:nil]</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#AnnotationList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#IriStemExclusionList1Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first <span class=keyword>IRI</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#IriStem&gt;</span> ;
  rdf:rest  <span class=valueSet>[rdf:nil]</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#IriStemExclusionList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#LiteralStemExclusionList1Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first xsd:string <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#LiteralStem&gt;</span> ;
  rdf:rest  <span class=valueSet>[rdf:nil]</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#LiteralStemExclusionList1Plus&gt;</span>
}

<span class=relativeIRI>&lt;#LanguageStemExclusionList1Plus&gt;</span> <span class=keyword>CLOSED</span> {
  rdf:first xsd:string <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#LanguageStem&gt;</span> ;
  rdf:rest  <span class=valueSet>[rdf:nil]</span> <span class=keyword>OR</span> @<span class=relativeIRI>&lt;#LanguageStemExclusionList1Plus&gt;</span>
}
</pre>
 </div>
 </section>
 <section class="appendix normative"><div class=header-wrapper><h2 id=iana-considerations>IANA Considerations</h2><a class="self-link sf-hidden" href=#iana-considerations aria-label="Permalink for this Appendix"></a></div>
 
 <p>This section has been submitted to the Internet Engineering Steering
 Group (IESG) for review, approval, and registration with IANA.</p>
 <section><div class=header-wrapper><h3 id=text-shex>text/shex</h3><a class="self-link sf-hidden" href=#text-shex aria-label="Permalink for this Appendix"></a></div>
 <dl>
 <dt>Type name:</dt>
 <dd>text</dd>
 <dt>Subtype name:</dt>
 <dd>shex</dd>
 <dt>Required parameters:</dt>
 <dd>None</dd>
 <dt>Optional parameters:</dt>
 <dd>None</dd>
 <dt>Encoding considerations:</dt>
 <dd>8-bit text</dd>
 <dd>ShEx Compact Syntax (ShExC) is a text language which is encoded in UTF-8.</dd>
 <dt>Security considerations:</dt>
 <dd>Given that <a href=#dfn-shexc class=internalDFN data-link-type=dfn id=ref-for-dfn-shexc-6>ShExC</a> allows the substitution of long IRIs with short terms,
 <a href=#dfn-shexc class=internalDFN data-link-type=dfn id=ref-for-dfn-shexc-7>ShExC</a> documents may expand considerably when processed and, in the worst case,
 the resulting data might consume all of the recipient's resources. Applications
 should treat any data with due skepticism.
 </dd>
 <dt>Interoperability considerations:</dt>
 <dd>Not Applicable</dd>
 <dt>Published specification:</dt>
 <dd><a href=http://shex.io/shex-semantics/>http://shex.io/shex-semantics/</a></dd>
 <dt>Applications that use this media type:</dt>
 <dd>Any programming environment that requires the exchange of
 directed graphs. Implementations of ShEx have been created for
 JavaScript, Python, Ruby, and Java.
 </dd>
 <dt>Fragment Identifier Considerations:</dt>
 <dd>
 The structure of a ShEx schema is defined by its representation in JSON per <a href=#shexj>ShEx JSON Syntax
 (ShExJ)</a>.
 The JSON-LD context &lt;<a href=http://www.w3.org/ns/shex.jsonld>http://www.w3.org/ns/shex.jsonld</a>&gt;
 defines the RDF representation (ShExR) for every ShEx schema.
 A ShEx fragment identifies an instance of either the <a href=#dfn-shapeexpr id=ref-for-dfn-shapeexpr-35>shapeExpr</a> or <a href=#dfn-tripleexpr id=ref-for-dfn-tripleexpr-15>tripleExpr</a> ShExJ productions, as well as the RDF resource (see <a data-cite=RDF11-CONCEPTS#section-fragID href=https://www.w3.org/TR/rdf11-concepts/#section-fragID>RDF 1.1 Concepts and Abstract Syntax</a> §6 [<cite><a class=bibref data-link-type=biblio href=#bib-rdf11-concepts title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>]) in
 the corresponding ShExR.</dd>
 <dt>Restrictions on Usage:</dt>
 <dd>None</dd>
 <dt>Provisional Registrations:</dt>
 <dd>Not Applicable</dd>
 <dt>Additional information:</dt>
 <dd>
 <dl>
 <dt>Deprecated alias names for this type:</dt>
 <dd>None</dd>
 <dt>Magic number(s):</dt>
 <dd></dd>
 <dt>File extension(s):</dt>
 <dd>.shex</dd>
 <dt>Macintosh file type code(s):</dt>
 <dd>TEXT</dd>
 </dl>
 </dd>
 <dt>Intended usage:</dt>
 <dd>Common</dd>
 <dt>Other Information &amp; Comments:</dt>
 <dd>None</dd>
 <dt>Contact Person:</dt>
 <dd>
 <dl>
 <dt>Contact Name:</dt>
 <dd>Eric Prud'hommeaux</dd>
 <dt>Contact Email Address:</dt>
 <dd>eric@w3.org</dd>
 <dt>Change controller:</dt>
 <dd>W3C</dd>
 </dl>
 </dd>
 </dl>
 </section></section>
 <div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shex aria-label="Links in this document to definition: ShEx">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-arcsout aria-label="Links in this document to definition: arcsOut">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-predicatesout aria-label="Links in this document to definition: predicatesOut">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-arcsin aria-label="Links in this document to definition: arcsIn">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-predicatesin aria-label="Links in this document to definition: predicatesIn">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-neigh aria-label="Links in this document to definition: neigh">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-predicates aria-label="Links in this document to definition: predicates">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-def aria-label="Links in this document to definition: def">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-json-grammar aria-label="Links in this document to definition: JSON grammar">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-id aria-label="Links in this document to definition: id">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapes-schema aria-label="Links in this document to definition: Schema">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapedecl aria-label="Links in this document to definition: Shape Declarationss">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-imports aria-label="Links in this document to definition: imports">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-startacts aria-label="Links in this document to definition: startActs">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-start aria-label="Links in this document to definition: start">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapes aria-label="Links in this document to definition: shapes">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-isvalid aria-label="Links in this document to definition: isValid">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-typing aria-label="Links in this document to definition: typing">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-correct-typing aria-label="Links in this document to definition: correct typing">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-completetyping aria-label="Links in this document to definition: completeTyping">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-strata aria-label="Links in this document to definition: strata">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-stratification aria-label="Links in this document to definition: stratification">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shape-expressions aria-label="Links in this document to definition: shape expression">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapeexpr aria-label="Links in this document to definition: shapeExpr">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapeor aria-label="Links in this document to definition: ShapeOr">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapeexprs aria-label="Links in this document to definition: shapeExprs">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapeand aria-label="Links in this document to definition: ShapeAnd">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapenot aria-label="Links in this document to definition: ShapeNot">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapeexternal aria-label="Links in this document to definition: ShapeExternal">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapeexprref aria-label="Links in this document to definition: ShapeExprRef">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapeexprlabel aria-label="Links in this document to definition: shapeExprLabel">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-respec-offender-this-is-defined-more-than-once-in-the-document aria-label="Links in this document to definition: neigh">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-nestedshapes aria-label="Links in this document to definition: nestedShapes">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-directly-extends aria-label="Links in this document to definition: directly extends">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-extension-hierarchy-graph aria-label="Links in this document to definition: extension hierarchy graph">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-satisfies aria-label="Links in this document to definition: satisfies">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-satisfiesdescendant aria-label="Links in this document to definition: satisfiesDescendant">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-nodeconstraint aria-label="Links in this document to definition: NodeConstraint">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-xsfacet aria-label="Links in this document to definition: xsFacet">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-stringfacet aria-label="Links in this document to definition: stringFacet">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-numericfacet aria-label="Links in this document to definition: numericFacet">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-numericliteral aria-label="Links in this document to definition: numericLiteral">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-valuesetvalue aria-label="Links in this document to definition: valueSetValue">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-objectvalue aria-label="Links in this document to definition: objectValue">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-objectliteral aria-label="Links in this document to definition: ObjectLiteral">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-iristem aria-label="Links in this document to definition: IriStem">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-iristemrange aria-label="Links in this document to definition: IriStemRange">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-literalstem aria-label="Links in this document to definition: LiteralStem">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-literalstemrange aria-label="Links in this document to definition: LiteralStemRange">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-language aria-label="Links in this document to definition: Language">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-languagestem aria-label="Links in this document to definition: LanguageStem">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-languagestemrange aria-label="Links in this document to definition: LanguageStemRange">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-wildcard aria-label="Links in this document to definition: Wildcard">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-triple-expressions aria-label="Links in this document to definition: triple expression">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shape aria-label="Links in this document to definition: Shape">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-tripleexpr aria-label="Links in this document to definition: tripleExpr">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-eachof aria-label="Links in this document to definition: EachOf">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-expressions aria-label="Links in this document to definition: expressions">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-oneof aria-label="Links in this document to definition: OneOf">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-tripleconstraint aria-label="Links in this document to definition: TripleConstraint">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-tripleexprref aria-label="Links in this document to definition: tripleExprRef">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-tripleexprlabel aria-label="Links in this document to definition: tripleExprLabel">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-emptyexpression aria-label="Links in this document to definition: EmptyExpression">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-parentshapelabels aria-label="Links in this document to definition: parentShapeLabels">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-matchesshape aria-label="Links in this document to definition: matchesShape">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-parents aria-label="Links in this document to definition: parents">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-ncard aria-label="Links in this document to definition: nCard">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-cardinality aria-label="Links in this document to definition: cardinality">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-conforms aria-label="Links in this document to definition: conform">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shapeexprref-closure aria-label="Links in this document to definition: shapeExprRef closure">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-tripleexprwithid aria-label="Links in this document to definition: tripleExprWithId">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-tripleexprref-closure aria-label="Links in this document to definition: tripleExprRef closure">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-atomic-shapes aria-label="Links in this document to definition: atomic shapes">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-atomictripleconstraints aria-label="Links in this document to definition: atomicTripleConstraints">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-negated-reference aria-label="Links in this document to definition: negated reference">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-hierarchy-and-dependency-graph aria-label="Links in this document to definition: hierarchy and dependency graph">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-extendable aria-label="Links in this document to definition: extendable">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-mainshape aria-label="Links in this document to definition: mainShape">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-semact aria-label="Links in this document to definition: SemAct">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-annotation aria-label="Links in this document to definition: Annotation">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shexc aria-label="Links in this document to definition: ShExC">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-prefix aria-label="Links in this document to definition: base">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-prefixes-map aria-label="Links in this document to definition: prefixes map">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shexj aria-label="Links in this document to definition: ShExJ">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-context aria-label="Links in this document to definition: ">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-iriref aria-label="Links in this document to definition: IRIREF">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-bnode aria-label="Links in this document to definition: BNODE">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-bool aria-label="Links in this document to definition: BOOL">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-integer aria-label="Links in this document to definition: INTEGER">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-decimal aria-label="Links in this document to definition: DECIMAL">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-double aria-label="Links in this document to definition: DOUBLE">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-langtag aria-label="Links in this document to definition: LANGTAG">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-string aria-label="Links in this document to definition: STRING">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-empty aria-label="Links in this document to definition: EMPTY">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-pn_prefix aria-label="Links in this document to definition: PN_PREFIX">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-pn_chars_base aria-label="Links in this document to definition: PN_CHARS_BASE">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-pn_chars aria-label="Links in this document to definition: PN_CHARS">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-pn_chars_u aria-label="Links in this document to definition: PN_CHARS_U">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-uchar aria-label="Links in this document to definition: UCHAR">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-hex aria-label="Links in this document to definition: HEX">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-exponent aria-label="Links in this document to definition: EXPONENT">
 
 
 
 
 </div><div class="dfn-panel sf-hidden" hidden role=dialog aria-modal=true id=dfn-panel-for-dfn-shexr aria-label="Links in this document to definition: ShExR">
 
 
 
 
 </div>
